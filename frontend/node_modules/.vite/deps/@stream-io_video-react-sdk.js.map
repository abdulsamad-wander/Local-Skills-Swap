{
  "version": 3,
  "sources": ["../../@stream-io/src/core/components/Audio/Audio.tsx", "../../@stream-io/src/core/components/Audio/ParticipantsAudio.tsx", "../../@stream-io/src/core/components/ParticipantView/ParticipantViewContext.tsx", "../../@stream-io/src/hooks/useFloatingUIPreset.ts", "../../@stream-io/src/hooks/usePersistedDevicePreferences.ts", "../../@stream-io/src/hooks/useScrollPosition.ts", "../../@stream-io/src/hooks/useRequestPermission.ts", "../../@stream-io/src/hooks/useDeviceList.tsx", "../../@stream-io/src/hooks/useModeration.ts", "../../@stream-io/src/hooks/useDragToScroll.ts", "../../@stream-io/src/components/Menu/MenuToggle.tsx", "../../@stream-io/src/components/Menu/GenericMenu.tsx", "../../@stream-io/src/components/Icon/Icon.tsx", "../../@stream-io/src/core/hooks/usePictureInPictureState.ts", "../../@stream-io/src/core/components/ParticipantView/ParticipantActionsContextMenu.tsx", "../../@stream-io/src/utilities/isComponentType.ts", "../../@stream-io/src/utilities/chunk.ts", "../../@stream-io/src/utilities/applyElementToRef.ts", "../../@stream-io/src/core/components/Video/BaseVideo.tsx", "../../@stream-io/src/core/components/Video/BaseVideoPlaceholder.tsx", "../../@stream-io/src/core/components/Video/DefaultVideoPlaceholder.tsx", "../../@stream-io/src/core/components/Video/DefaultPictureInPicturePlaceholder.tsx", "../../@stream-io/src/core/components/Video/Video.tsx", "../../@stream-io/src/core/hooks/useTrackElementVisibility.ts", "../../@stream-io/src/components/Avatar/Avatar.tsx", "../../@stream-io/src/components/BackgroundFilters/BackgroundFiltersProvider.tsx", "../../@stream-io/src/components/Button/IconButton.tsx", "../../@stream-io/src/components/Button/CompositeButton.tsx", "../../@stream-io/src/components/Button/TextButton.tsx", "../../@stream-io/src/components/CallControls/AcceptCallButton.tsx", "../../@stream-io/src/components/Notification/Notification.tsx", "../../@stream-io/src/components/Notification/PermissionNotification.tsx", "../../@stream-io/src/components/Notification/SpeakingWhileMutedNotification.tsx", "../../@stream-io/src/components/Notification/RecordingInProgressNotification.tsx", "../../@stream-io/src/components/LoadingIndicator/LoadingIndicator.tsx", "../../@stream-io/src/components/Tooltip/Tooltip.tsx", "../../@stream-io/src/components/Tooltip/hooks/useEnterLeaveHandlers.ts", "../../@stream-io/src/components/Tooltip/WithTooltip.tsx", "../../@stream-io/src/components/CallControls/RecordCallButton.tsx", "../../@stream-io/src/components/Reaction/Reaction.tsx", "../../@stream-io/src/components/CallControls/ReactionsButton.tsx", "../../@stream-io/src/utilities/callControlHandler.ts", "../../@stream-io/src/components/CallControls/ScreenShareButton.tsx", "../../@stream-io/src/components/DeviceSettings/AudioVolumeIndicator.tsx", "../../@stream-io/src/components/DropdownSelect/DropdownSelect.tsx", "../../@stream-io/src/components/DeviceSettings/DeviceSelector.tsx", "../../@stream-io/src/components/DeviceSettings/SpeakerTest.tsx", "../../@stream-io/src/components/DeviceSettings/DeviceSelectorAudio.tsx", "../../@stream-io/src/components/DeviceSettings/DeviceSelectorVideo.tsx", "../../@stream-io/src/components/DeviceSettings/DeviceSettings.tsx", "../../@stream-io/src/components/CallControls/ToggleAudioButton.tsx", "../../@stream-io/src/components/CallControls/ToggleVideoButton.tsx", "../../@stream-io/src/components/CallControls/CancelCallButton.tsx", "../../@stream-io/src/components/CallControls/CallControls.tsx", "../../@stream-io/src/components/CallStats/CallStats.tsx", "../../@stream-io/src/components/CallControls/CallStatsButton.tsx", "../../@stream-io/src/components/CallControls/ToggleAudioOutputButton.tsx", "../../@stream-io/src/components/CallParticipantsList/BlockedUserListing.tsx", "../../@stream-io/src/components/CallParticipantsList/CallParticipantListHeader.tsx", "../../@stream-io/src/components/CallParticipantsList/CallParticipantListingItem.tsx", "../../@stream-io/src/components/CallParticipantsList/CallParticipantListing.tsx", "../../@stream-io/src/components/CallParticipantsList/EmptyParticipantSearchList.tsx", "../../@stream-io/src/components/Search/SearchInput.tsx", "../../@stream-io/src/components/Search/SearchResults.tsx", "../../@stream-io/src/components/Search/hooks/useSearch.ts", "../../@stream-io/src/components/CallParticipantsList/CallParticipantsList.tsx", "../../@stream-io/src/components/CallPreview/CallPreview.tsx", "../../@stream-io/src/components/CallRecordingList/CallRecordingListHeader.tsx", "../../@stream-io/src/components/CallRecordingList/CallRecordingListItem.tsx", "../../@stream-io/src/components/CallRecordingList/EmptyCallRecordingListing.tsx", "../../@stream-io/src/components/CallRecordingList/LoadingCallRecordingListing.tsx", "../../@stream-io/src/components/CallRecordingList/CallRecordingList.tsx", "../../@stream-io/src/components/NoiseCancellation/NoiseCancellationProvider.tsx", "../../@stream-io/src/components/RingingCall/RingingCallControls.tsx", "../../@stream-io/src/components/RingingCall/RingingCall.tsx", "../../@stream-io/src/components/Permissions/PermissionRequests.tsx", "../../@stream-io/src/components/StreamTheme/StreamTheme.tsx", "../../@stream-io/src/components/VideoPreview/VideoPreview.tsx", "../../@stream-io/src/core/components/ParticipantView/DefaultParticipantViewUI.tsx", "../../@stream-io/src/core/components/ParticipantView/ParticipantView.tsx", "../../@stream-io/src/core/components/StreamCall/StreamCall.tsx", "../../@stream-io/src/translations/index.ts", "../../@stream-io/src/core/components/StreamVideo/StreamVideo.tsx", "../../@stream-io/src/utilities/filter.ts", "../../@stream-io/src/core/components/CallLayout/hooks.ts", "../../@stream-io/src/core/components/CallLayout/LivestreamLayout.tsx", "../../@stream-io/src/core/components/CallLayout/PaginatedGridLayout.tsx", "../../@stream-io/src/core/hooks/useCalculateHardLimit.ts", "../../@stream-io/src/core/components/CallLayout/SpeakerLayout.tsx", "../../@stream-io/src/core/components/CallLayout/PipLayout/Pip.tsx", "../../@stream-io/src/core/components/CallLayout/PipLayout/Host.tsx", "../../@stream-io/src/core/components/CallLayout/PipLayout/Grid.tsx", "../../@stream-io/src/core/components/CallLayout/PipLayout/index.ts", "../../@stream-io/src/wrappers/LivestreamPlayer/LivestreamPlayer.tsx", "../../@stream-io/index.ts"],
  "sourcesContent": ["import { ComponentPropsWithoutRef, useEffect, useState } from 'react';\nimport {\n  AudioTrackType,\n  StreamVideoParticipant,\n} from '@stream-io/video-client';\nimport { useCall } from '@stream-io/video-react-bindings';\n\nexport type AudioProps = ComponentPropsWithoutRef<'audio'> & {\n  /**\n   * The participant whose audio stream we want to play.\n   */\n  participant: StreamVideoParticipant;\n\n  /**\n   * The type of audio stream to play for the given participant.\n   * The default value is `audioTrack`.\n   */\n  trackType?: AudioTrackType;\n};\n\nexport const Audio = ({\n  participant,\n  trackType = 'audioTrack',\n  ...rest\n}: AudioProps) => {\n  const call = useCall();\n  const [audioElement, setAudioElement] = useState<HTMLAudioElement | null>(\n    null,\n  );\n  const { userId, sessionId } = participant;\n\n  useEffect(() => {\n    if (!call || !audioElement) return;\n    const cleanup = call.bindAudioElement(audioElement, sessionId, trackType);\n    return () => {\n      cleanup?.();\n    };\n  }, [call, sessionId, audioElement, trackType]);\n\n  return (\n    <audio\n      autoPlay\n      {...rest}\n      ref={setAudioElement}\n      data-user-id={userId}\n      data-session-id={sessionId}\n      data-track-type={trackType}\n    />\n  );\n};\n\nAudio.displayName = 'Audio';\n", "import { ComponentProps, Fragment } from 'react';\nimport {\n  hasAudio,\n  hasScreenShareAudio,\n  StreamVideoParticipant,\n} from '@stream-io/video-client';\nimport { Audio } from './Audio';\n\nexport type ParticipantsAudioProps = {\n  /**\n   * The participants to play audio for.\n   */\n  participants: StreamVideoParticipant[];\n\n  /**\n   * Props to pass to the underlying `Audio` components.\n   */\n  audioProps?: ComponentProps<typeof Audio>;\n};\n\nexport const ParticipantsAudio = (props: ParticipantsAudioProps) => {\n  const { participants, audioProps } = props;\n  return (\n    <>\n      {participants.map((participant) => {\n        if (participant.isLocalParticipant) return null;\n        const { audioStream, screenShareAudioStream, sessionId } = participant;\n\n        const hasAudioTrack = hasAudio(participant);\n        const audioTrackElement = hasAudioTrack && audioStream && (\n          <Audio\n            {...audioProps}\n            trackType=\"audioTrack\"\n            participant={participant}\n          />\n        );\n\n        const hasScreenShareAudioTrack = hasScreenShareAudio(participant);\n        const screenShareAudioTrackElement = hasScreenShareAudioTrack &&\n          screenShareAudioStream && (\n            <Audio\n              {...audioProps}\n              trackType=\"screenShareAudioTrack\"\n              participant={participant}\n            />\n          );\n\n        return (\n          <Fragment key={sessionId}>\n            {audioTrackElement}\n            {screenShareAudioTrackElement}\n          </Fragment>\n        );\n      })}\n    </>\n  );\n};\n\nParticipantsAudio.displayName = 'ParticipantsAudio';\n", "import { createContext, useContext } from 'react';\nimport { ParticipantViewProps } from './ParticipantView';\n\nexport type ParticipantViewContextValue = Required<\n  Pick<ParticipantViewProps, 'participant' | 'trackType'>\n> & {\n  participantViewElement?: HTMLDivElement | null;\n  videoElement?: HTMLVideoElement | null;\n  videoPlaceholderElement?: HTMLDivElement | null;\n};\n\nexport const ParticipantViewContext = createContext<\n  ParticipantViewContextValue | undefined\n>(undefined);\n\nexport const useParticipantViewContext = () =>\n  useContext(ParticipantViewContext) as ParticipantViewContextValue;\n", "import { useEffect } from 'react';\nimport type { UseFloatingOptions } from '@floating-ui/react';\nimport {\n  autoUpdate,\n  flip,\n  offset,\n  shift,\n  size,\n  useFloating,\n} from '@floating-ui/react';\n\nexport const useFloatingUIPreset = ({\n  middleware = [],\n  placement,\n  strategy,\n  offset: offsetInPx = 10,\n}: Pick<UseFloatingOptions, 'placement' | 'strategy' | 'middleware'> & {\n  offset?: number;\n}) => {\n  const {\n    refs,\n    x,\n    y,\n    update,\n    elements: { domReference, floating },\n    context,\n  } = useFloating({\n    placement,\n    strategy,\n    middleware: [\n      offset(offsetInPx),\n      shift(),\n      flip(),\n      size({\n        padding: 10,\n        apply: ({ availableHeight, elements }) => {\n          Object.assign(elements.floating.style, {\n            maxHeight: `${availableHeight}px`,\n          });\n        },\n      }),\n      ...middleware,\n    ],\n  });\n\n  // handle window resizing\n  useEffect(() => {\n    if (!domReference || !floating) return;\n\n    const cleanup = autoUpdate(domReference, floating, update);\n\n    return () => cleanup();\n  }, [domReference, floating, update]);\n\n  return { refs, x, y, domReference, floating, strategy, context };\n};\n", "import { useEffect, useRef, useState } from 'react';\nimport { Call, CallingState, InputDeviceStatus } from '@stream-io/video-client';\nimport { useCall, useCallStateHooks } from '@stream-io/video-react-bindings';\n\nexport type LocalDevicePreference = {\n  selectedDeviceId: string;\n  selectedDeviceLabel: string;\n  muted?: boolean;\n};\n\nexport type LocalDevicePreferences = {\n  // Array is preference history with latest preferences first.\n  // Single preference still acceptable for backwards compatibility.\n  [type in DeviceKey]?: LocalDevicePreference | LocalDevicePreference[];\n};\n\ntype DeviceKey = 'microphone' | 'camera' | 'speaker';\n\ntype DeviceState<K extends DeviceKey> = {\n  [ManagerKey in K]: DeviceManagerLike;\n} & {\n  isMute?: boolean;\n  devices: MediaDeviceInfo[];\n  selectedDevice: string | undefined;\n};\n\ninterface DeviceManagerLike {\n  state: { selectedDevice: string | undefined; status?: InputDeviceStatus };\n  select: (deviceId: string) => Promise<void> | void;\n  enable?: () => Promise<void>;\n  disable?: () => Promise<void>;\n}\n\nconst defaultDevice = 'default';\n\n/**\n * This hook will apply and persist the device preferences from local storage.\n *\n * @param key the key to use for local storage.\n */\nexport const usePersistedDevicePreferences = (\n  key: string = '@stream-io/device-preferences',\n): void => {\n  const {\n    useCallSettings,\n    useCallCallingState,\n    useMicrophoneState,\n    useCameraState,\n    useSpeakerState,\n  } = useCallStateHooks();\n  const settings = useCallSettings();\n  const callingState = useCallCallingState();\n\n  const microphoneState: DeviceState<'microphone'> = useMicrophoneState();\n  const cameraState: DeviceState<'camera'> = useCameraState();\n  const speakerState: DeviceState<'speaker'> = useSpeakerState();\n\n  const [applyingState, setApplyingState] = useState<\n    'idle' | 'applying' | 'applied'\n  >('idle');\n\n  const call = useCall();\n\n  // Set deferServerDefaults flag synchronously during render.\n  // Please ensure the flag is set BEFORE any call.get() or call.getOrCreate()\n  // is called, preventing server defaults from overriding user preferences.\n  const deferredCallRef = useRef<Call | null>(null);\n  if (call && deferredCallRef.current !== call) {\n    call.camera.deferServerDefaults = true;\n    call.microphone.deferServerDefaults = true;\n    deferredCallRef.current = call;\n  }\n\n  // Cleanup: reset the flag when the component unmounts or call changes.\n  // This allows server defaults to apply if the hook is no longer used.\n  useEffect(() => {\n    return () => {\n      const currentCall = deferredCallRef.current;\n      if (currentCall) {\n        currentCall.camera.deferServerDefaults = false;\n        currentCall.microphone.deferServerDefaults = false;\n        deferredCallRef.current = null;\n      }\n    };\n  }, [call]);\n\n  // when the camera is disabled on call type level, we should discard\n  // any stored camera preferences.\n  const cameraDevices = settings?.video?.enabled ? cameraState.devices : false;\n  useEffect(\n    function apply() {\n      if (\n        callingState === CallingState.LEFT ||\n        microphoneState.devices.length === 0 ||\n        (Array.isArray(cameraDevices) && cameraDevices.length === 0) ||\n        speakerState.devices.length === 0 ||\n        !settings ||\n        applyingState !== 'idle'\n      ) {\n        return;\n      }\n\n      setApplyingState('applying');\n\n      (async () => {\n        const { audio, video } = settings;\n        for (const [deviceKey, state, defaultMuted, enabledInCallType] of [\n          ['microphone', microphoneState, !audio.mic_default_on, true],\n          ['camera', cameraState, !video.camera_default_on, video.enabled],\n          ['speaker', speakerState, false, true],\n        ] as const) {\n          const preferences = parseLocalDevicePreferences(key);\n          const preference = preferences[deviceKey];\n          const manager = (\n            state as DeviceState<'camera' | 'microphone' | 'speaker'>\n          )[deviceKey];\n\n          const applyPromise = preference\n            ? applyLocalDevicePreference(\n                manager,\n                [preference].flat(),\n                deviceKey === 'camera' ? cameraDevices || [] : state.devices,\n                enabledInCallType,\n              )\n            : applyMutedState(manager, defaultMuted, enabledInCallType);\n\n          await applyPromise.catch((err) => {\n            console.warn(\n              `Failed to apply ${deviceKey} device preferences`,\n              err,\n            );\n          });\n        }\n      })().finally(() =>\n        setApplyingState((state) => (state === 'applying' ? 'applied' : state)),\n      );\n    },\n    [\n      applyingState,\n      callingState,\n      cameraState,\n      cameraDevices,\n      key,\n      microphoneState,\n      microphoneState.devices,\n      settings,\n      speakerState,\n      speakerState.devices,\n    ],\n  );\n\n  useEffect(\n    function persist() {\n      if (callingState === CallingState.LEFT || applyingState !== 'applied') {\n        return;\n      }\n\n      for (const [deviceKey, devices, selectedDevice, isMute] of [\n        [\n          'camera',\n          cameraDevices || [],\n          cameraState.selectedDevice,\n          cameraState.isMute,\n        ],\n        [\n          'microphone',\n          microphoneState.devices,\n          microphoneState.selectedDevice,\n          microphoneState.isMute,\n        ],\n        [\n          'speaker',\n          speakerState.devices,\n          speakerState.selectedDevice,\n          speakerState.isMute,\n        ],\n      ] as const) {\n        try {\n          patchLocalDevicePreference(key, deviceKey, {\n            devices,\n            selectedDevice,\n            isMute,\n          });\n        } catch (err) {\n          console.warn(`Failed to save ${deviceKey} device preferences`, err);\n        }\n      }\n    },\n    [\n      applyingState,\n      callingState,\n      cameraDevices,\n      cameraState.isMute,\n      cameraState.selectedDevice,\n      key,\n      microphoneState.devices,\n      microphoneState.isMute,\n      microphoneState.selectedDevice,\n      speakerState.devices,\n      speakerState.isMute,\n      speakerState.selectedDevice,\n    ],\n  );\n};\n\nconst parseLocalDevicePreferences = (key: string): LocalDevicePreferences => {\n  const preferencesStr = window.localStorage.getItem(key);\n  let preferences: LocalDevicePreferences = {};\n\n  if (preferencesStr) {\n    try {\n      preferences = JSON.parse(preferencesStr);\n\n      if (Object.hasOwn(preferences, 'mic')) {\n        // for backwards compatibility\n        preferences.microphone = (\n          preferences as { mic: LocalDevicePreference }\n        ).mic;\n      }\n    } catch {\n      /* assume preferences are empty */\n    }\n  }\n\n  return preferences;\n};\n\nconst patchLocalDevicePreference = (\n  key: string,\n  deviceKey: DeviceKey,\n  state: Pick<DeviceState<never>, 'devices' | 'selectedDevice' | 'isMute'>,\n): void => {\n  const preferences = parseLocalDevicePreferences(key);\n  const nextPreference = getSelectedDevicePreference(\n    state.devices,\n    state.selectedDevice,\n  );\n  const preferenceHistory = [preferences[deviceKey] ?? []]\n    .flat()\n    .filter(\n      (p) =>\n        p.selectedDeviceId !== nextPreference.selectedDeviceId &&\n        (p.selectedDeviceLabel === '' ||\n          p.selectedDeviceLabel !== nextPreference.selectedDeviceLabel),\n    );\n\n  window.localStorage.setItem(\n    key,\n    JSON.stringify({\n      ...preferences,\n      mic: undefined, // for backwards compatibility\n      [deviceKey]: [\n        {\n          ...nextPreference,\n          muted: state.isMute,\n        } satisfies LocalDevicePreference,\n        ...preferenceHistory,\n      ].slice(0, 3),\n    }),\n  );\n};\n\nconst applyLocalDevicePreference = async (\n  manager: DeviceManagerLike,\n  preference: LocalDevicePreference[],\n  devices: MediaDeviceInfo[],\n  enabledInCallType: boolean,\n): Promise<void> => {\n  let muted: boolean | undefined;\n\n  for (const p of preference) {\n    muted ??= p.muted;\n\n    if (p.selectedDeviceId === defaultDevice) {\n      break;\n    }\n\n    const device =\n      devices.find((d) => d.deviceId === p.selectedDeviceId) ??\n      devices.find((d) => d.label === p.selectedDeviceLabel);\n\n    if (device) {\n      if (!manager.state.selectedDevice) {\n        await manager.select(device.deviceId);\n      }\n\n      muted = p.muted;\n      break;\n    }\n  }\n\n  if (typeof muted === 'boolean') {\n    await applyMutedState(manager, muted, enabledInCallType);\n  }\n};\n\nconst applyMutedState = async (\n  manager: DeviceManagerLike,\n  muted: boolean,\n  enabledInCallType: boolean,\n) => {\n  if (enabledInCallType && !manager.state.status) {\n    await manager[muted ? 'disable' : 'enable']?.();\n  }\n};\n\nconst getSelectedDevicePreference = (\n  devices: MediaDeviceInfo[],\n  selectedDevice: string | undefined,\n): Pick<LocalDevicePreference, 'selectedDeviceId' | 'selectedDeviceLabel'> => ({\n  selectedDeviceId: selectedDevice || defaultDevice,\n  selectedDeviceLabel:\n    devices?.find((d) => d.deviceId === selectedDevice)?.label ?? '',\n});\n", "import { useEffect, useState } from 'react';\n\nconst SCROLL_THRESHOLD = 10;\n\n/**\n * Hook which observes element's scroll position and returns text value based on the\n * position of the scrollbar (`top`, `bottom`, `between` and `null` if no scrollbar is available)\n */\nexport const useVerticalScrollPosition = (\n  scrollElement: HTMLElement | null,\n  threshold: number = SCROLL_THRESHOLD,\n) => {\n  const [scrollPosition, setScrollPosition] = useState<\n    'top' | 'bottom' | 'between' | null\n  >(null);\n\n  useEffect(() => {\n    if (!scrollElement) return;\n\n    const scrollHandler = () => {\n      const element = scrollElement;\n\n      const hasVerticalScrollbar = element.scrollHeight > element.clientHeight;\n\n      if (!hasVerticalScrollbar) return setScrollPosition(null);\n\n      const isAtTheTop = element.scrollTop <= threshold;\n      if (isAtTheTop) return setScrollPosition('top');\n\n      const isAtTheBottom =\n        Math.abs(\n          element.scrollHeight - element.scrollTop - element.clientHeight,\n        ) <= threshold;\n\n      if (isAtTheBottom) return setScrollPosition('bottom');\n\n      setScrollPosition('between');\n    };\n\n    const resizeObserver = new ResizeObserver(scrollHandler);\n    resizeObserver.observe(scrollElement);\n\n    scrollElement.addEventListener('scroll', scrollHandler);\n    return () => {\n      scrollElement.removeEventListener('scroll', scrollHandler);\n      resizeObserver.disconnect();\n    };\n  }, [scrollElement, threshold]);\n\n  return scrollPosition;\n};\n\nexport const useHorizontalScrollPosition = (\n  scrollElement: HTMLElement | null,\n  threshold: number = SCROLL_THRESHOLD,\n) => {\n  const [scrollPosition, setScrollPosition] = useState<\n    'start' | 'end' | 'between' | null\n  >(null);\n\n  useEffect(() => {\n    if (!scrollElement) return;\n\n    const scrollHandler = () => {\n      const element = scrollElement;\n\n      const hasHorizontalScrollbar = element.scrollWidth > element.clientWidth;\n\n      if (!hasHorizontalScrollbar) return setScrollPosition(null);\n\n      const isAtTheStart = element.scrollLeft <= threshold;\n      if (isAtTheStart) return setScrollPosition('start');\n\n      const isAtTheEnd =\n        Math.abs(\n          element.scrollWidth - element.scrollLeft - element.clientWidth,\n        ) <= threshold;\n\n      if (isAtTheEnd) return setScrollPosition('end');\n\n      setScrollPosition('between');\n    };\n\n    const resizeObserver = new ResizeObserver(scrollHandler);\n    resizeObserver.observe(scrollElement);\n\n    scrollElement.addEventListener('scroll', scrollHandler);\n    return () => {\n      scrollElement.removeEventListener('scroll', scrollHandler);\n      resizeObserver.disconnect();\n    };\n  }, [scrollElement, threshold]);\n\n  return scrollPosition;\n};\n", "import { useCallback, useEffect, useState } from 'react';\nimport { OwnCapability } from '@stream-io/video-client';\nimport { useCall, useCallStateHooks } from '@stream-io/video-react-bindings';\n\nexport const useRequestPermission = (permission: OwnCapability) => {\n  const call = useCall();\n  const { useHasPermissions } = useCallStateHooks();\n  const hasPermission = useHasPermissions(permission);\n  const [isAwaitingPermission, setIsAwaitingPermission] = useState(false); // TODO: load with possibly pending state\n\n  useEffect(() => {\n    const reset = () => setIsAwaitingPermission(false);\n\n    if (hasPermission) reset();\n  }, [hasPermission]);\n\n  const requestPermission = useCallback(async () => {\n    if (hasPermission) return true;\n\n    const canRequestPermission =\n      !!call?.permissionsContext.canRequest(permission);\n    if (isAwaitingPermission || !canRequestPermission) return false;\n\n    setIsAwaitingPermission(true);\n\n    try {\n      await call?.requestPermissions({\n        permissions: [permission],\n      });\n    } catch (error) {\n      setIsAwaitingPermission(false);\n      throw new Error(`requestPermission failed: ${error}`);\n    }\n\n    return false;\n  }, [call, hasPermission, isAwaitingPermission, permission]);\n\n  return {\n    requestPermission,\n    hasPermission,\n    canRequestPermission: !!call?.permissionsContext.canRequest(permission),\n    isAwaitingPermission,\n  };\n};\n", "import { useI18n } from '@stream-io/video-react-bindings';\nimport { useMemo } from 'react';\n\nexport interface DeviceListItem {\n  deviceId: string;\n  label: string;\n  isSelected: boolean;\n}\n\n/**\n * Utility hook that helps render a list of devices or implement a device selector.\n * Compared to someting like `useCameraState().devices`, it has some handy features:\n * 1. Adds the \"Default\" device to the list if applicable (either the user did not\n * select a device, or a previously selected device is no longer available).\n * 2. Maps the device list to a format more suitable for rendering.\n */\nexport function useDeviceList(\n  devices: MediaDeviceInfo[],\n  selectedDeviceId: string | undefined,\n): {\n  deviceList: DeviceListItem[];\n  selectedDeviceInfo: DeviceListItem;\n  selectedIndex: number;\n} {\n  const { t } = useI18n();\n\n  return useMemo(() => {\n    let selectedDeviceInfo: DeviceListItem | null = null;\n    let selectedIndex: number | null = null;\n\n    const deviceList: DeviceListItem[] = devices.map((d, i) => {\n      const isSelected = d.deviceId === selectedDeviceId;\n      const device = { deviceId: d.deviceId, label: d.label, isSelected };\n\n      if (isSelected) {\n        selectedDeviceInfo = device;\n        selectedIndex = i;\n      }\n\n      return device;\n    });\n\n    if (selectedDeviceInfo === null || selectedIndex === null) {\n      const defaultDevice = {\n        deviceId: 'default',\n        label: t('Default'),\n        isSelected: true,\n      };\n\n      selectedDeviceInfo = defaultDevice;\n      selectedIndex = 0;\n      deviceList.unshift(defaultDevice);\n    }\n\n    return { deviceList, selectedDeviceInfo, selectedIndex };\n  }, [devices, selectedDeviceId, t]);\n}\n", "import { useCallback, useEffect, useRef } from 'react';\nimport { useCall } from '@stream-io/video-react-bindings';\n\ntype FullScreenBlurType =\n  typeof import('@stream-io/video-filters-web').FullScreenBlur;\n\nconst isFullScreenBlurPlatformSupported = (): boolean => {\n  if (\n    typeof window === 'undefined' ||\n    typeof OffscreenCanvas === 'undefined' ||\n    typeof VideoFrame === 'undefined' ||\n    !window.WebGL2RenderingContext\n  ) {\n    return false;\n  }\n\n  try {\n    const canvas = new OffscreenCanvas(1, 1);\n    return !!canvas.getContext('webgl2', {\n      alpha: false,\n      antialias: false,\n      desynchronized: true,\n    });\n  } catch {\n    return false;\n  }\n};\n\nexport interface ModerationOptions {\n  /**\n   * How long the moderation effect should stay active before being disabled.\n   * Set to `0` to keep it active indefinitely. Defaults to 5000 ms.\n   */\n  duration?: number;\n}\n\nexport const useModeration = (options?: ModerationOptions) => {\n  const { duration = 5000 } = options || {};\n\n  const call = useCall();\n\n  const timeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null);\n  const processorRef = useRef<InstanceType<FullScreenBlurType> | null>(null);\n  const unregisterRef = useRef<(() => Promise<void>) | null>(null);\n\n  const blurModulePromise = useRef<Promise<FullScreenBlurType> | null>(null);\n\n  /**\n   * Lazily loads and caches the video-filters-web module.\n   */\n  const loadVideoFiltersWebModule = useCallback(() => {\n    if (!blurModulePromise.current) {\n      blurModulePromise.current = import('@stream-io/video-filters-web')\n        .then((module) => module.FullScreenBlur)\n        .catch((error) => {\n          console.error('[moderation] Failed to import blur module:', error);\n          throw error;\n        });\n    }\n\n    return blurModulePromise.current;\n  }, []);\n\n  const disableBlur = useCallback(() => {\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n      timeoutRef.current = null;\n    }\n\n    unregisterRef\n      .current?.()\n      .catch((err) => console.error('[moderation] unregister error:', err));\n\n    unregisterRef.current = null;\n  }, []);\n\n  const handleFallback = useCallback(async () => {\n    try {\n      await call?.camera.disable();\n    } catch (error) {\n      console.error('[moderation] Failed to disable camera:', error);\n    }\n  }, [call]);\n\n  useEffect(() => {\n    if (!call) return;\n\n    return call.on('call.moderation_warning', async () => {\n      try {\n        await loadVideoFiltersWebModule();\n      } catch (importErr) {\n        console.error('[moderation] Failed to import blur module:', importErr);\n      }\n    });\n  }, [call, loadVideoFiltersWebModule]);\n\n  useEffect(() => {\n    if (!call) return;\n\n    return call.on('call.moderation_blur', async () => {\n      if (unregisterRef.current) return;\n\n      let FullScreenBlurClass: FullScreenBlurType;\n\n      try {\n        FullScreenBlurClass = await loadVideoFiltersWebModule();\n      } catch (importErr) {\n        console.error('[moderation] Failed to import blur module:', importErr);\n        await handleFallback();\n        return;\n      }\n\n      if (!isFullScreenBlurPlatformSupported()) {\n        console.warn('[moderation] Blur not supported on this platform');\n        await handleFallback();\n        return;\n      }\n\n      const { unregister } = call.camera.registerFilter((inputStream) => {\n        unregisterRef.current = unregister;\n\n        const outputPromise = new Promise<MediaStream>(\n          async (resolve, reject) => {\n            const [track] = inputStream.getVideoTracks();\n\n            let processor: InstanceType<FullScreenBlurType>;\n\n            try {\n              processor = new FullScreenBlurClass(track);\n              processorRef.current = processor;\n\n              const result = await processor.start();\n              const output = new MediaStream([result]);\n              resolve(output);\n\n              if (duration > 0) {\n                timeoutRef.current = setTimeout(disableBlur, duration);\n              }\n            } catch (error) {\n              reject(error);\n              console.error('[moderation] Processor init failed:', error);\n\n              await unregisterRef.current?.();\n              unregisterRef.current = null;\n              processorRef.current = null;\n\n              await handleFallback();\n              return;\n            }\n          },\n        );\n\n        return {\n          output: outputPromise,\n          stop: () => {\n            if (processorRef.current) {\n              processorRef.current.stop();\n              processorRef.current = null;\n            }\n          },\n        };\n      });\n    });\n  }, [call, loadVideoFiltersWebModule, disableBlur, handleFallback, duration]);\n\n  useEffect(() => disableBlur, [disableBlur]);\n};\n", "import { useEffect, useRef } from 'react';\n\ninterface DragScrollState {\n  isDragging: boolean;\n  isPointerActive: boolean;\n  prevX: number;\n  prevY: number;\n  velocityX: number;\n  velocityY: number;\n  rafId: number;\n  startX: number;\n  startY: number;\n}\n\ninterface DragToScrollOptions {\n  decay?: number;\n  minVelocity?: number;\n  dragThreshold?: number;\n  enabled?: boolean;\n}\n\n/**\n * Enables drag-to-scroll functionality with momentum scrolling on a scrollable element.\n *\n * This hook allows users to click and drag to scroll an element, with momentum scrolling\n * that continues after the drag ends. The drag only activates after moving beyond a threshold\n *  distance, which prevents accidental drags from clicks.\n *\n * @param element - The HTML element to enable drag to scroll on.\n * @param options - Options for customizing the drag-to-scroll behavior.\n */\nexport function useDragToScroll(\n  element: HTMLElement | null,\n  options: DragToScrollOptions = {},\n) {\n  const stateRef = useRef<DragScrollState>({\n    isDragging: false,\n    isPointerActive: false,\n    prevX: 0,\n    prevY: 0,\n    velocityX: 0,\n    velocityY: 0,\n    rafId: 0,\n    startX: 0,\n    startY: 0,\n  });\n\n  useEffect(() => {\n    if (!element || !options.enabled) return;\n\n    const { decay = 0.95, minVelocity = 0.5, dragThreshold = 5 } = options;\n\n    const state = stateRef.current;\n\n    const stopMomentum = () => {\n      if (state.rafId) {\n        cancelAnimationFrame(state.rafId);\n        state.rafId = 0;\n      }\n      state.velocityX = 0;\n      state.velocityY = 0;\n    };\n\n    const momentumStep = () => {\n      state.velocityX *= decay;\n      state.velocityY *= decay;\n\n      element.scrollLeft -= state.velocityX;\n      element.scrollTop -= state.velocityY;\n\n      if (\n        Math.abs(state.velocityX) < minVelocity &&\n        Math.abs(state.velocityY) < minVelocity\n      ) {\n        state.rafId = 0;\n        return;\n      }\n\n      state.rafId = requestAnimationFrame(momentumStep);\n    };\n\n    const onPointerDown = (e: PointerEvent) => {\n      if (e.pointerType !== 'mouse') return;\n\n      stopMomentum();\n\n      state.isDragging = false;\n      state.isPointerActive = true;\n\n      state.prevX = e.clientX;\n      state.prevY = e.clientY;\n      state.startX = e.clientX;\n      state.startY = e.clientY;\n    };\n\n    const onPointerMove = (e: PointerEvent) => {\n      if (e.pointerType !== 'mouse') return;\n\n      if (!state.isPointerActive) return;\n\n      const dx = e.clientX - state.startX;\n      const dy = e.clientY - state.startY;\n\n      if (!state.isDragging && Math.hypot(dx, dy) > dragThreshold) {\n        state.isDragging = true;\n        e.preventDefault();\n      }\n\n      if (!state.isDragging) return;\n\n      const moveDx = e.clientX - state.prevX;\n      const moveDy = e.clientY - state.prevY;\n\n      element.scrollLeft -= moveDx;\n      element.scrollTop -= moveDy;\n\n      state.velocityX = moveDx;\n      state.velocityY = moveDy;\n\n      state.prevX = e.clientX;\n      state.prevY = e.clientY;\n    };\n\n    const onPointerUpOrCancel = () => {\n      const wasDragging = state.isDragging;\n\n      state.isDragging = false;\n      state.isPointerActive = false;\n\n      state.prevX = 0;\n      state.prevY = 0;\n      state.startX = 0;\n      state.startY = 0;\n\n      if (!wasDragging) {\n        stopMomentum();\n        return;\n      }\n\n      if (Math.hypot(state.velocityX, state.velocityY) < minVelocity) {\n        stopMomentum();\n        return;\n      }\n\n      state.rafId = requestAnimationFrame(momentumStep);\n    };\n\n    element.addEventListener('pointerdown', onPointerDown);\n    element.addEventListener('pointermove', onPointerMove);\n    window.addEventListener('pointerup', onPointerUpOrCancel);\n    window.addEventListener('pointercancel', onPointerUpOrCancel);\n\n    return () => {\n      element.removeEventListener('pointerdown', onPointerDown);\n      element.removeEventListener('pointermove', onPointerMove);\n      window.removeEventListener('pointerup', onPointerUpOrCancel);\n      window.removeEventListener('pointercancel', onPointerUpOrCancel);\n\n      stopMomentum();\n    };\n  }, [element, options]);\n}\n", "import {\n  ComponentType,\n  createContext,\n  PropsWithChildren,\n  RefAttributes,\n  useContext,\n  useEffect,\n  useRef,\n  useState,\n} from 'react';\nimport {\n  FloatingOverlay,\n  FloatingPortal,\n  Placement,\n  Strategy,\n  UseFloatingReturn,\n} from '@floating-ui/react';\n\nimport { useFloatingUIPreset } from '../../hooks';\n\nexport type ToggleMenuButtonProps<E extends HTMLElement = HTMLButtonElement> = {\n  menuShown: boolean;\n} & RefAttributes<E>;\n\nexport enum MenuVisualType {\n  PORTAL = 'portal',\n  MENU = 'menu',\n}\n\nexport type MenuToggleProps<E extends HTMLElement> = PropsWithChildren<{\n  ToggleButton: ComponentType<ToggleMenuButtonProps<E>>;\n  placement?: Placement;\n  strategy?: Strategy;\n  offset?: number;\n  visualType?: MenuVisualType;\n  onToggle?: (menuShown: boolean) => void;\n}>;\n\nexport type MenuContextValue = {\n  close?: () => void;\n};\n\n/**\n * Used to provide utility APIs to the components rendered inside the portal.\n */\nconst MenuContext = createContext<MenuContextValue>({});\n\n/**\n * Access to the closes MenuContext.\n */\nexport const useMenuContext = (): MenuContextValue => {\n  return useContext(MenuContext);\n};\n\nconst MenuPortal = ({\n  children,\n  refs,\n}: PropsWithChildren<{\n  refs: UseFloatingReturn['refs'];\n}>) => {\n  const [portalRoot, setPortalRoot] = useState<HTMLDivElement | null>(null);\n\n  return (\n    <>\n      <div ref={setPortalRoot} className=\"str-video__portal\" />\n      <FloatingOverlay>\n        <FloatingPortal root={portalRoot}>\n          <div className=\"str-video__portal-content\" ref={refs.setFloating}>\n            {children}\n          </div>\n        </FloatingPortal>\n      </FloatingOverlay>\n    </>\n  );\n};\n\nexport const MenuToggle = <E extends HTMLElement>({\n  ToggleButton,\n  placement = 'top-start',\n  strategy = 'absolute',\n  offset,\n  visualType = MenuVisualType.MENU,\n  children,\n  onToggle,\n}: MenuToggleProps<E>) => {\n  const [menuShown, setMenuShown] = useState(false);\n  const toggleHandler = useRef(onToggle);\n  toggleHandler.current = onToggle;\n\n  const { floating, domReference, refs, x, y } = useFloatingUIPreset({\n    placement,\n    strategy,\n    offset,\n  });\n\n  useEffect(() => {\n    const parentDocument = domReference?.ownerDocument;\n\n    const handleClick = (event: MouseEvent) => {\n      if (!floating && domReference?.contains(event.target as Node)) {\n        setMenuShown(true);\n        toggleHandler.current?.(true);\n      } else if (floating && !floating?.contains(event.target as Node)) {\n        setMenuShown(false);\n        toggleHandler.current?.(false);\n      }\n    };\n\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key && // key can be undefined in some browsers\n        event.key.toLowerCase() === 'escape' &&\n        !event.altKey &&\n        !event.ctrlKey\n      ) {\n        setMenuShown(false);\n        toggleHandler.current?.(false);\n      }\n    };\n    parentDocument?.addEventListener('click', handleClick, { capture: true });\n    parentDocument?.addEventListener('keydown', handleKeyDown);\n    return () => {\n      parentDocument?.removeEventListener('click', handleClick, {\n        capture: true,\n      });\n      parentDocument?.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [floating, domReference]);\n\n  return (\n    <>\n      {menuShown && (\n        <MenuContext.Provider value={{ close: () => setMenuShown(false) }}>\n          {visualType === MenuVisualType.PORTAL ? (\n            <MenuPortal refs={refs} children={children} />\n          ) : visualType === MenuVisualType.MENU ? (\n            <div\n              className=\"str-video__menu-container\"\n              ref={refs.setFloating}\n              style={{\n                position: strategy,\n                top: y ?? 0,\n                left: x ?? 0,\n                overflowY: 'auto',\n              }}\n              role=\"menu\"\n              children={children}\n            />\n          ) : null}\n        </MenuContext.Provider>\n      )}\n      <ToggleButton menuShown={menuShown} ref={refs.setReference} />\n    </>\n  );\n};\n", "import { ComponentProps, MouseEvent, PropsWithChildren, useRef } from 'react';\n\nexport const GenericMenu = ({\n  children,\n  onItemClick,\n}: PropsWithChildren<{\n  onItemClick?: (e: MouseEvent) => void;\n}>) => {\n  const ref = useRef<HTMLUListElement>(null);\n  return (\n    <ul\n      className=\"str-video__generic-menu\"\n      ref={ref}\n      onClick={(e) => {\n        if (\n          onItemClick &&\n          e.target !== ref.current &&\n          ref.current?.contains(e.target as Node)\n        ) {\n          onItemClick(e);\n        }\n      }}\n    >\n      {children}\n    </ul>\n  );\n};\n\nexport const GenericMenuButtonItem = ({\n  children,\n  ...rest\n}: Omit<ComponentProps<'button'>, 'ref'>) => {\n  return (\n    <li className=\"str-video__generic-menu--item\">\n      <button {...rest}>{children}</button>\n    </li>\n  );\n};\n", "import clsx from 'clsx';\n\nexport type IconProps = {\n  icon: string;\n  className?: string;\n};\n\nexport const Icon = ({ className, icon }: IconProps) => (\n  <span\n    className={clsx(\n      'str-video__icon',\n      icon && `str-video__icon--${icon}`,\n      className,\n    )}\n  />\n);\n", "import { useEffect, useState } from 'react';\n\nexport function usePictureInPictureState(videoElement?: HTMLVideoElement) {\n  const [isPiP, setIsPiP] = useState(\n    document.pictureInPictureElement === videoElement,\n  );\n\n  if (!videoElement && isPiP) setIsPiP(false);\n\n  useEffect(() => {\n    if (!videoElement) return;\n\n    const handlePiP = () => {\n      setIsPiP(document.pictureInPictureElement === videoElement);\n    };\n\n    videoElement.addEventListener('enterpictureinpicture', handlePiP);\n    videoElement.addEventListener('leavepictureinpicture', handlePiP);\n\n    return () => {\n      videoElement.removeEventListener('enterpictureinpicture', handlePiP);\n      videoElement.removeEventListener('leavepictureinpicture', handlePiP);\n    };\n  }, [videoElement]);\n\n  return isPiP;\n}\n", "import { useEffect, useState } from 'react';\nimport { Restricted, useCall, useI18n } from '@stream-io/video-react-bindings';\nimport {\n  hasAudio,\n  hasScreenShare,\n  hasScreenShareAudio,\n  hasVideo,\n  OwnCapability,\n} from '@stream-io/video-client';\nimport { useParticipantViewContext } from './ParticipantViewContext';\nimport {\n  GenericMenu,\n  GenericMenuButtonItem,\n  useMenuContext,\n} from '../../../components/Menu';\nimport { Icon } from '../../../components/Icon';\nimport { usePictureInPictureState } from '../../hooks/usePictureInPictureState';\n\nexport const ParticipantActionsContextMenu = () => {\n  const { participant, participantViewElement, videoElement } =\n    useParticipantViewContext();\n  const [fullscreenModeOn, setFullscreenModeOn] = useState(\n    !!document.fullscreenElement,\n  );\n  const call = useCall();\n  const isPiP = usePictureInPictureState(videoElement ?? undefined);\n  const { t } = useI18n();\n\n  const { pin, sessionId, userId } = participant;\n\n  const hasAudioTrack = hasAudio(participant);\n  const hasVideoTrack = hasVideo(participant);\n  const hasScreenShareTrack = hasScreenShare(participant);\n  const hasScreenShareAudioTrack = hasScreenShareAudio(participant);\n\n  const blockUser = () => call?.blockUser(userId);\n  const kickUser = () => call?.kickUser({ user_id: userId });\n  const muteAudio = () => call?.muteUser(userId, 'audio');\n  const muteVideo = () => call?.muteUser(userId, 'video');\n  const muteScreenShare = () => call?.muteUser(userId, 'screenshare');\n  const muteScreenShareAudio = () =>\n    call?.muteUser(userId, 'screenshare_audio');\n\n  const grantPermission = (permission: string) => () => {\n    call?.updateUserPermissions({\n      user_id: userId,\n      grant_permissions: [permission],\n    });\n  };\n\n  const revokePermission = (permission: string) => () => {\n    call?.updateUserPermissions({\n      user_id: userId,\n      revoke_permissions: [permission],\n    });\n  };\n\n  const toggleParticipantPin = () => {\n    if (pin) {\n      call?.unpin(sessionId);\n    } else {\n      call?.pin(sessionId);\n    }\n  };\n\n  const pinForEveryone = () => {\n    call\n      ?.pinForEveryone({ user_id: userId, session_id: sessionId })\n      .catch((err) => {\n        console.error(`Failed to pin participant ${userId}`, err);\n      });\n  };\n\n  const unpinForEveryone = () => {\n    call\n      ?.unpinForEveryone({ user_id: userId, session_id: sessionId })\n      .catch((err) => {\n        console.error(`Failed to unpin participant ${userId}`, err);\n      });\n  };\n\n  const toggleFullscreenMode = () => {\n    if (!fullscreenModeOn) {\n      return participantViewElement?.requestFullscreen().catch(console.error);\n    }\n    return document.exitFullscreen().catch(console.error);\n  };\n\n  useEffect(() => {\n    // handles the case when fullscreen mode is toggled externally,\n    // e.g., by pressing ESC key or some other keyboard shortcut\n    const handleFullscreenChange = () => {\n      setFullscreenModeOn(!!document.fullscreenElement);\n    };\n    document.addEventListener('fullscreenchange', handleFullscreenChange);\n    return () => {\n      document.removeEventListener('fullscreenchange', handleFullscreenChange);\n    };\n  }, []);\n\n  const togglePictureInPicture = () => {\n    if (videoElement && !isPiP) {\n      return videoElement\n        .requestPictureInPicture()\n        .catch(console.error) as Promise<void>;\n    }\n\n    return document.exitPictureInPicture().catch(console.error);\n  };\n\n  const { close } = useMenuContext() || {};\n  return (\n    <GenericMenu onItemClick={close}>\n      <GenericMenuButtonItem\n        onClick={toggleParticipantPin}\n        disabled={pin && !pin.isLocalPin}\n      >\n        <Icon icon=\"pin\" />\n        {pin ? t('Unpin') : t('Pin')}\n      </GenericMenuButtonItem>\n      <Restricted requiredGrants={[OwnCapability.PIN_FOR_EVERYONE]}>\n        <GenericMenuButtonItem\n          onClick={pinForEveryone}\n          disabled={pin && !pin.isLocalPin}\n        >\n          <Icon icon=\"pin\" />\n          {t('Pin for everyone')}\n        </GenericMenuButtonItem>\n        <GenericMenuButtonItem\n          onClick={unpinForEveryone}\n          disabled={!pin || pin.isLocalPin}\n        >\n          <Icon icon=\"pin\" />\n          {t('Unpin for everyone')}\n        </GenericMenuButtonItem>\n      </Restricted>\n      <Restricted requiredGrants={[OwnCapability.BLOCK_USERS]}>\n        <GenericMenuButtonItem onClick={blockUser}>\n          <Icon icon=\"not-allowed\" />\n          {t('Block')}\n        </GenericMenuButtonItem>\n      </Restricted>\n      <Restricted requiredGrants={[OwnCapability.KICK_USER]}>\n        <GenericMenuButtonItem onClick={kickUser}>\n          <Icon icon=\"kick-user\" />\n          {t('Kick')}\n        </GenericMenuButtonItem>\n      </Restricted>\n      <Restricted requiredGrants={[OwnCapability.MUTE_USERS]}>\n        {hasVideoTrack && (\n          <GenericMenuButtonItem onClick={muteVideo}>\n            <Icon icon=\"camera-off-outline\" />\n            {t('Turn off video')}\n          </GenericMenuButtonItem>\n        )}\n        {hasScreenShareTrack && (\n          <GenericMenuButtonItem onClick={muteScreenShare}>\n            <Icon icon=\"screen-share-off\" />\n            {t('Turn off screen share')}\n          </GenericMenuButtonItem>\n        )}\n        {hasAudioTrack && (\n          <GenericMenuButtonItem onClick={muteAudio}>\n            <Icon icon=\"no-audio\" />\n            {t('Mute audio')}\n          </GenericMenuButtonItem>\n        )}\n        {hasScreenShareAudioTrack && (\n          <GenericMenuButtonItem onClick={muteScreenShareAudio}>\n            <Icon icon=\"no-audio\" />\n            {t('Mute screen share audio')}\n          </GenericMenuButtonItem>\n        )}\n      </Restricted>\n      {participantViewElement &&\n        typeof participantViewElement.requestFullscreen !== 'undefined' && (\n          <GenericMenuButtonItem onClick={toggleFullscreenMode}>\n            {t('{{ direction }} fullscreen', {\n              direction: fullscreenModeOn ? t('Leave') : t('Enter'),\n            })}\n          </GenericMenuButtonItem>\n        )}\n      {videoElement && document.pictureInPictureEnabled && (\n        <GenericMenuButtonItem onClick={togglePictureInPicture}>\n          {t('{{ direction }} picture-in-picture', {\n            direction: isPiP ? t('Leave') : t('Enter'),\n          })}\n        </GenericMenuButtonItem>\n      )}\n      <Restricted requiredGrants={[OwnCapability.UPDATE_CALL_PERMISSIONS]}>\n        <GenericMenuButtonItem\n          onClick={grantPermission(OwnCapability.SEND_AUDIO)}\n        >\n          {t('Allow audio')}\n        </GenericMenuButtonItem>\n        <GenericMenuButtonItem\n          onClick={grantPermission(OwnCapability.SEND_VIDEO)}\n        >\n          {t('Allow video')}\n        </GenericMenuButtonItem>\n        <GenericMenuButtonItem\n          onClick={grantPermission(OwnCapability.SCREENSHARE)}\n        >\n          {t('Allow screen sharing')}\n        </GenericMenuButtonItem>\n\n        <GenericMenuButtonItem\n          onClick={revokePermission(OwnCapability.SEND_AUDIO)}\n        >\n          {t('Disable audio')}\n        </GenericMenuButtonItem>\n        <GenericMenuButtonItem\n          onClick={revokePermission(OwnCapability.SEND_VIDEO)}\n        >\n          {t('Disable video')}\n        </GenericMenuButtonItem>\n        <GenericMenuButtonItem\n          onClick={revokePermission(OwnCapability.SCREENSHARE)}\n        >\n          {t('Disable screen sharing')}\n        </GenericMenuButtonItem>\n      </Restricted>\n    </GenericMenu>\n  );\n};\n", "import { ComponentType, isValidElement, ReactElement } from 'react';\n\nexport const isComponentType = <T extends {}>(\n  elementOrComponent?: ComponentType<T> | ReactElement | null,\n): elementOrComponent is ComponentType<T> => {\n  return elementOrComponent === null\n    ? false\n    : !isValidElement(elementOrComponent);\n};\n", "export const chunk = <T extends unknown[]>(array: T, size: number) => {\n  const chunkCount = Math.ceil(array.length / size);\n\n  return Array.from(\n    { length: chunkCount },\n    (_, index) => array.slice(size * index, size * index + size) as T,\n  );\n};\n", "import type { ForwardedRef } from 'react';\n\nexport const applyElementToRef = <T extends HTMLElement | null>(\n  ref: ForwardedRef<T>,\n  element: T,\n) => {\n  if (!ref) return;\n\n  if (typeof ref === 'function') return ref(element);\n\n  ref.current = element;\n};\n", "import { ComponentPropsWithRef, forwardRef, useEffect, useState } from 'react';\nimport { Browsers } from '@stream-io/video-client';\n\nimport { applyElementToRef } from '../../../utilities';\n\nexport type BaseVideoProps = ComponentPropsWithRef<'video'> & {\n  stream?: MediaStream;\n};\n\n/**\n * @description Extends video element with `stream` property\n * (`srcObject`) to reactively handle stream changes\n */\nexport const BaseVideo = forwardRef<HTMLVideoElement, BaseVideoProps>(\n  function BaseVideo({ stream, ...rest }, ref) {\n    const [videoElement, setVideoElement] = useState<HTMLVideoElement | null>(\n      null,\n    );\n\n    useEffect(() => {\n      if (!videoElement || !stream) return;\n      if (stream === videoElement.srcObject) return;\n\n      videoElement.srcObject = stream;\n      if (Browsers.isSafari() || Browsers.isFirefox()) {\n        // Firefox and Safari have some timing issue\n        setTimeout(() => {\n          videoElement.srcObject = stream;\n          videoElement.play().catch((e) => {\n            console.error(`Failed to play stream`, e);\n          });\n        }, 0);\n      }\n\n      return () => {\n        videoElement.pause();\n        videoElement.srcObject = null;\n      };\n    }, [stream, videoElement]);\n\n    return (\n      <video\n        autoPlay\n        playsInline\n        {...rest}\n        ref={(element) => {\n          applyElementToRef(ref, element);\n          setVideoElement(element);\n        }}\n      />\n    );\n  },\n);\n", "import { ComponentProps, RefAttributes, forwardRef, useState } from 'react';\nimport type { StreamVideoParticipant } from '@stream-io/video-client';\n\nexport type BaseVideoPlaceholderProps = {\n  participant: StreamVideoParticipant;\n} & RefAttributes<HTMLDivElement> &\n  ComponentProps<'div'>;\n\nexport const BaseVideoPlaceholder = forwardRef<\n  HTMLDivElement,\n  BaseVideoPlaceholderProps\n>(function DefaultVideoPlaceholder({ participant, style, children }, ref) {\n  const [error, setError] = useState(false);\n  const name = participant.name || participant.userId;\n  return (\n    <div className=\"str-video__video-placeholder\" style={style} ref={ref}>\n      {(!participant.image || error) &&\n        (name ? (\n          <InitialsFallback name={name} />\n        ) : (\n          <div className=\"str-video__video-placeholder__no-video-label\">\n            {children}\n          </div>\n        ))}\n      {participant.image && !error && (\n        <img\n          onError={() => setError(true)}\n          alt={name}\n          className=\"str-video__video-placeholder__avatar\"\n          src={participant.image}\n        />\n      )}\n    </div>\n  );\n});\n\nconst InitialsFallback = (props: { name: string }) => {\n  const { name } = props;\n  const initials = name\n    .split(' ')\n    .slice(0, 2)\n    .map((n) => n[0])\n    .join('');\n  return (\n    <div className=\"str-video__video-placeholder__initials-fallback\">\n      {initials}\n    </div>\n  );\n};\n", "import { forwardRef } from 'react';\nimport { useI18n } from '@stream-io/video-react-bindings';\nimport {\n  BaseVideoPlaceholder,\n  type BaseVideoPlaceholderProps,\n} from './BaseVideoPlaceholder';\n\nexport type VideoPlaceholderProps = BaseVideoPlaceholderProps;\n\nexport const DefaultVideoPlaceholder = forwardRef<\n  HTMLDivElement,\n  VideoPlaceholderProps\n>(function DefaultVideoPlaceholder(props, ref) {\n  const { t } = useI18n();\n  return (\n    <BaseVideoPlaceholder ref={ref} {...props}>\n      {t('Video is disabled')}\n    </BaseVideoPlaceholder>\n  );\n});\n", "import { forwardRef } from 'react';\nimport { useI18n } from '@stream-io/video-react-bindings';\nimport {\n  BaseVideoPlaceholder,\n  type BaseVideoPlaceholderProps,\n} from './BaseVideoPlaceholder';\n\nexport type PictureInPicturePlaceholderProps = BaseVideoPlaceholderProps;\n\nexport const DefaultPictureInPicturePlaceholder = forwardRef<\n  HTMLDivElement,\n  PictureInPicturePlaceholderProps\n>(function DefaultPictureInPicturePlaceholder(props, ref) {\n  const { t } = useI18n();\n  return (\n    <BaseVideoPlaceholder ref={ref} {...props}>\n      {t('Video is playing in a popup')}\n    </BaseVideoPlaceholder>\n  );\n});\n", "import {\n  ComponentPropsWithoutRef,\n  ComponentType,\n  useEffect,\n  useLayoutEffect,\n  useState,\n} from 'react';\nimport {\n  hasPausedTrack,\n  hasScreenShare,\n  hasVideo,\n  StreamVideoParticipant,\n  VideoTrackType,\n  VisibilityState,\n} from '@stream-io/video-client';\nimport clsx from 'clsx';\nimport {\n  DefaultVideoPlaceholder,\n  VideoPlaceholderProps,\n} from './DefaultVideoPlaceholder';\nimport { useCall } from '@stream-io/video-react-bindings';\nimport { usePictureInPictureState } from '../../hooks/usePictureInPictureState';\nimport {\n  DefaultPictureInPicturePlaceholder,\n  PictureInPicturePlaceholderProps,\n} from './DefaultPictureInPicturePlaceholder';\n\nexport type VideoProps = ComponentPropsWithoutRef<'video'> & {\n  /**\n   * Pass false to disable rendering video and render fallback\n   * even if the participant has published video.\n   * @default true\n   */\n  enabled?: boolean;\n  /**\n   * Forces the video to be mirrored or unmirrored. By default, video track\n   * from the local participant is mirrored, and all other videos are not mirrored.\n   */\n  mirror?: boolean;\n  /**\n   * The track type to display.\n   */\n  trackType: VideoTrackType | 'none';\n  /**\n   * The participant represented by this video element.\n   */\n  participant: StreamVideoParticipant;\n  /**\n   * Override the default UI that's visible when a participant turned off their video.\n   * Set it to `null` if you wish to disable the video placeholder.\n   *\n   * @default DefaultVideoPlaceholder\n   */\n  VideoPlaceholder?: ComponentType<VideoPlaceholderProps> | null;\n  /**\n   * Override the default UI that's dispayed in place of the video when it's playing\n   * in picture-in-picture. Set it to `null` if you wish to display the browser's default\n   * placeholder.\n   *\n   * @default DefaultPictureInPicturePlaceholder\n   */\n  PictureInPicturePlaceholder?: ComponentType<PictureInPicturePlaceholderProps> | null;\n  /**\n  /**\n   * An object with setRef functions\n   * meant for exposing some of the internal elements of this component.\n   */\n  refs?: {\n    /**\n     * The video element that's used to play the video stream.\n     * @param element the video element.\n     */\n    setVideoElement?: (element: HTMLVideoElement | null) => void;\n    /**\n     * The video placeholder element that's used when the video stream is not playing.\n     * @param element the video placeholder element.\n     */\n    setVideoPlaceholderElement?: (element: HTMLDivElement | null) => void;\n    setPictureInPicturePlaceholderElement?: (\n      element: HTMLDivElement | null,\n    ) => void;\n  };\n};\n\nexport const Video = ({\n  enabled = true,\n  mirror,\n  trackType,\n  participant,\n  className,\n  VideoPlaceholder = DefaultVideoPlaceholder,\n  PictureInPicturePlaceholder = DefaultPictureInPicturePlaceholder,\n  refs,\n  ...rest\n}: VideoProps) => {\n  const {\n    sessionId,\n    videoStream,\n    screenShareStream,\n    viewportVisibilityState,\n    isLocalParticipant,\n    userId,\n  } = participant;\n\n  const call = useCall();\n  const [videoElement, setVideoElement] = useState<HTMLVideoElement | null>(\n    null,\n  );\n  // start with true, will flip once the video starts playing\n  const [isVideoPaused, setIsVideoPaused] = useState(true);\n  const [isWideMode, setIsWideMode] = useState(true);\n  const isPiP = usePictureInPictureState(videoElement ?? undefined);\n\n  const stream =\n    trackType === 'videoTrack'\n      ? videoStream\n      : trackType === 'screenShareTrack'\n        ? screenShareStream\n        : undefined;\n\n  useLayoutEffect(() => {\n    if (!call || !videoElement || trackType === 'none') return;\n\n    const cleanup = call.bindVideoElement(videoElement, sessionId, trackType);\n\n    return () => {\n      cleanup?.();\n    };\n  }, [call, trackType, sessionId, videoElement]);\n\n  useEffect(() => {\n    if (!stream || !videoElement) return;\n\n    const [track] = stream.getVideoTracks();\n    if (!track) return;\n\n    const handlePlayPause = () => {\n      setIsVideoPaused(videoElement.paused);\n\n      const { width = 0, height = 0 } = track.getSettings();\n      setIsWideMode(width >= height);\n    };\n\n    // playback may have started before we had a chance to\n    // attach the 'play/pause' event listener, so we set the state\n    // here to make sure it's in sync\n    setIsVideoPaused(videoElement.paused);\n\n    videoElement.addEventListener('play', handlePlayPause);\n    videoElement.addEventListener('pause', handlePlayPause);\n    track.addEventListener('unmute', handlePlayPause);\n    return () => {\n      videoElement.removeEventListener('play', handlePlayPause);\n      videoElement.removeEventListener('pause', handlePlayPause);\n      track.removeEventListener('unmute', handlePlayPause);\n\n      // reset the 'pause' state once we unmount the video element\n      setIsVideoPaused(true);\n    };\n  }, [stream, videoElement]);\n\n  if (!call) return null;\n\n  const isPublishingTrack =\n    trackType === 'videoTrack'\n      ? hasVideo(participant)\n      : trackType === 'screenShareTrack'\n        ? hasScreenShare(participant)\n        : false;\n\n  const isInvisible =\n    trackType === 'none' ||\n    viewportVisibilityState?.[trackType] === VisibilityState.INVISIBLE;\n\n  const hasNoVideoOrInvisible =\n    !enabled ||\n    !isPublishingTrack ||\n    isInvisible ||\n    hasPausedTrack(participant, trackType);\n  const mirrorVideo =\n    mirror === undefined\n      ? isLocalParticipant && trackType === 'videoTrack'\n      : mirror;\n  const isScreenShareTrack = trackType === 'screenShareTrack';\n  return (\n    <>\n      {!hasNoVideoOrInvisible && (\n        <video\n          {...rest}\n          className={clsx('str-video__video', className, {\n            'str-video__video--not-playing': isVideoPaused,\n            'str-video__video--tall': !isWideMode,\n            'str-video__video--mirror': mirrorVideo,\n            'str-video__video--screen-share': isScreenShareTrack,\n          })}\n          data-user-id={userId}\n          data-session-id={sessionId}\n          ref={(element) => {\n            setVideoElement(element);\n            refs?.setVideoElement?.(element);\n          }}\n        />\n      )}\n      {isPiP && PictureInPicturePlaceholder && (\n        <PictureInPicturePlaceholder\n          style={{ position: 'absolute' }}\n          participant={participant}\n        />\n      )}\n      {/* TODO: add condition to \"hold\" the placeholder until track unmutes as well */}\n      {(hasNoVideoOrInvisible || isVideoPaused) && VideoPlaceholder && (\n        <VideoPlaceholder\n          style={{ position: 'absolute' }}\n          participant={participant}\n          ref={refs?.setVideoPlaceholderElement}\n        />\n      )}\n    </>\n  );\n};\n\nVideo.displayName = 'Video';\n", "import { useEffect } from 'react';\nimport { DynascaleManager, VideoTrackType } from '@stream-io/video-client';\nimport { useCall } from '@stream-io/video-react-bindings';\n\nexport const useTrackElementVisibility = <T extends HTMLElement>({\n  trackedElement,\n  dynascaleManager: propsDynascaleManager,\n  sessionId,\n  trackType,\n}: {\n  trackedElement: T | null;\n  sessionId: string;\n  dynascaleManager?: DynascaleManager;\n  trackType: VideoTrackType | 'none';\n}) => {\n  const call = useCall();\n  const manager = propsDynascaleManager ?? call?.dynascaleManager;\n  useEffect(() => {\n    if (!trackedElement || !manager || !call || trackType === 'none') return;\n    const unobserve = manager.trackElementVisibility(\n      trackedElement,\n      sessionId,\n      trackType,\n    );\n    return () => {\n      unobserve();\n    };\n  }, [trackedElement, manager, call, sessionId, trackType]);\n};\n", "import { ComponentProps, CSSProperties, useState } from 'react';\nimport clsx from 'clsx';\n\nexport type AvatarData = {\n  imageSrc?: string;\n  name?: string;\n  style?: CSSProperties & Record<string, string | number>;\n};\n\nexport type AvatarProps = AvatarData & ComponentProps<'img'>;\n\nexport const Avatar = ({\n  imageSrc,\n  name,\n  style,\n  className,\n  ...rest\n}: AvatarProps) => {\n  const [error, setError] = useState(false);\n\n  return (\n    <>\n      {(!imageSrc || error) && name && (\n        <AvatarFallback className={className} style={style} names={[name]} />\n      )}\n      {imageSrc && !error && (\n        <img\n          onError={() => setError(true)}\n          alt=\"avatar\"\n          className={clsx('str-video__avatar', className)}\n          src={imageSrc}\n          style={style}\n          {...rest}\n        />\n      )}\n    </>\n  );\n};\n\ntype AvatarFallbackProps = {\n  names: string[];\n  className?: string;\n  style?: CSSProperties & Record<string, string | number>;\n};\nexport const AvatarFallback = ({\n  className,\n  names,\n  style,\n}: AvatarFallbackProps) => {\n  return (\n    <div\n      className={clsx('str-video__avatar--initials-fallback', className)}\n      style={style}\n    >\n      <div>\n        {names[0][0]}\n        {names[1]?.[0]}\n      </div>\n    </div>\n  );\n};\n", "import {\n  createContext,\n  lazy,\n  PropsWithChildren,\n  ReactNode,\n  Suspense,\n  useContext,\n} from 'react';\nimport type {\n  BackgroundFiltersProps,\n  BackgroundFiltersContextValue,\n} from './types';\n\nconst BackgroundFiltersProviderImpl = lazy(() =>\n  import('./BackgroundFilters').then((m) => ({\n    default: m.BackgroundFiltersProvider,\n  })),\n);\n\n/**\n * The context for the background filters.\n */\nconst BackgroundFiltersContext = createContext<\n  BackgroundFiltersContextValue | undefined\n>(undefined);\n\n/**\n * A hook to access the background filters context API.\n */\nexport const useBackgroundFilters = () => {\n  const context = useContext(BackgroundFiltersContext);\n  if (!context) {\n    throw new Error(\n      'useBackgroundFilters must be used within a BackgroundFiltersProvider',\n    );\n  }\n  return context;\n};\n\n/**\n * A provider component that enables the use of background filters in your app.\n *\n * Please make sure you have the `@stream-io/video-filters-web` package installed\n * in your project before using this component.\n */\nexport const BackgroundFiltersProvider = (\n  props: PropsWithChildren<BackgroundFiltersProps> & {\n    SuspenseFallback?: ReactNode;\n  },\n) => {\n  const { SuspenseFallback = null, ...filterProps } = props;\n  return (\n    <Suspense fallback={SuspenseFallback}>\n      <BackgroundFiltersProviderImpl\n        {...filterProps}\n        ContextProvider={BackgroundFiltersContext}\n      />\n    </Suspense>\n  );\n};\n", "import { ComponentProps, ForwardedRef, forwardRef } from 'react';\nimport clsx from 'clsx';\n\nimport { Icon, IconProps } from '../Icon';\n\nexport type ButtonWithIconProps = {\n  enabled?: boolean;\n  variant?: string;\n} & ComponentProps<'button'> &\n  IconProps;\n\nexport const IconButton = forwardRef(function IconButton(\n  props: ButtonWithIconProps,\n  ref: ForwardedRef<HTMLButtonElement>,\n) {\n  const { icon, enabled, variant, onClick, className, ...rest } = props;\n  return (\n    <button\n      className={clsx('str-video__call-controls__button', className, {\n        [`str-video__call-controls__button--variant-${variant}`]: variant,\n        'str-video__call-controls__button--enabled': enabled,\n      })}\n      onClick={(e) => {\n        e.preventDefault();\n        onClick?.(e);\n      }}\n      ref={ref}\n      {...rest}\n    >\n      <Icon icon={icon} />\n    </button>\n  );\n});\n", "import clsx from 'clsx';\nimport { MenuToggle, ToggleMenuButtonProps } from '../Menu';\nimport {\n  ComponentProps,\n  ComponentType,\n  forwardRef,\n  PropsWithChildren,\n  ReactElement,\n} from 'react';\nimport { Placement } from '@floating-ui/react';\n\nimport { IconButton } from './IconButton';\nimport { isComponentType } from '../../utilities';\n\nexport type IconButtonWithMenuProps<E extends HTMLElement = HTMLButtonElement> =\n  PropsWithChildren<{\n    active?: boolean;\n    Menu?: ComponentType | ReactElement | null;\n    caption?: string;\n    className?: string;\n    menuPlacement?: Placement;\n    menuOffset?: number;\n    ToggleMenuButton?: ComponentType<ToggleMenuButtonProps<E>>;\n    variant?: 'primary' | 'secondary';\n    onMenuToggle?: (menuShown: boolean) => void;\n  }> &\n    ComponentProps<'button'>;\n\nexport const CompositeButton = forwardRef<\n  HTMLDivElement,\n  IconButtonWithMenuProps\n>(function CompositeButton(\n  {\n    disabled,\n    caption,\n    children,\n    className,\n    active,\n    Menu,\n    menuPlacement,\n    menuOffset,\n    title,\n    ToggleMenuButton = DefaultToggleMenuButton,\n    variant,\n    onClick,\n    onMenuToggle,\n    ...restButtonProps\n  },\n  ref,\n) {\n  return (\n    <div\n      className={clsx('str-video__composite-button', className, {\n        'str-video__composite-button--caption': caption,\n        'str-video__composite-button--menu': Menu,\n      })}\n      title={title}\n      ref={ref}\n    >\n      <div\n        className={clsx('str-video__composite-button__button-group', {\n          'str-video__composite-button__button-group--active': active,\n          'str-video__composite-button__button-group--active-primary':\n            active && variant === 'primary',\n          'str-video__composite-button__button-group--active-secondary':\n            active && variant === 'secondary',\n          'str-video__composite-button__button-group--disabled': disabled,\n        })}\n      >\n        <button\n          type=\"button\"\n          className=\"str-video__composite-button__button\"\n          onClick={(e) => {\n            e.preventDefault();\n            onClick?.(e);\n          }}\n          disabled={disabled}\n          {...restButtonProps}\n        >\n          {children}\n        </button>\n        {Menu && (\n          <MenuToggle\n            offset={menuOffset}\n            placement={menuPlacement}\n            ToggleButton={ToggleMenuButton}\n            onToggle={onMenuToggle}\n          >\n            {isComponentType(Menu) ? <Menu /> : Menu}\n          </MenuToggle>\n        )}\n      </div>\n      {caption && (\n        <div className=\"str-video__composite-button__caption\">{caption}</div>\n      )}\n    </div>\n  );\n});\n\nconst DefaultToggleMenuButton = forwardRef<\n  HTMLButtonElement,\n  ToggleMenuButtonProps\n>(function DefaultToggleMenuButton({ menuShown }, ref) {\n  return (\n    <IconButton\n      className={clsx('str-video__menu-toggle-button', {\n        'str-video__menu-toggle-button--active': menuShown,\n      })}\n      icon={menuShown ? 'caret-down' : 'caret-up'}\n      ref={ref}\n    />\n  );\n});\n", "import { ComponentProps } from 'react';\n\nexport const TextButton = ({\n  children,\n  ...rest\n}: Omit<ComponentProps<'button'>, 'ref' | 'className'>) => {\n  return (\n    <button {...rest} className=\"str-video__text-button\">\n      {children}\n    </button>\n  );\n};\n", "import { MouseEventHandler, useCallback } from 'react';\nimport { IconButton } from '../Button';\nimport { useCall } from '@stream-io/video-react-bindings';\n\nexport type AcceptCallButtonProps = {\n  disabled?: boolean;\n  onClick?: MouseEventHandler<HTMLButtonElement>;\n  onAccept?: () => void;\n};\n\nexport const AcceptCallButton = ({\n  disabled,\n  onAccept,\n  onClick,\n}: AcceptCallButtonProps) => {\n  const call = useCall();\n  const handleClick: MouseEventHandler<HTMLButtonElement> = useCallback(\n    async (e) => {\n      if (onClick) {\n        onClick(e);\n      } else if (call) {\n        await call.join();\n        onAccept?.();\n      }\n    },\n    [onClick, onAccept, call],\n  );\n  return (\n    <IconButton\n      disabled={disabled}\n      icon=\"call-accept\"\n      variant=\"success\"\n      data-testid=\"accept-call-button\"\n      onClick={handleClick}\n    />\n  );\n};\n", "import { PropsWithChildren, ReactNode, useEffect } from 'react';\nimport clsx from 'clsx';\nimport { Placement } from '@floating-ui/react';\nimport { useFloatingUIPreset } from '../../hooks';\n\nexport type NotificationProps = {\n  message?: ReactNode;\n  isVisible?: boolean;\n  visibilityTimeout?: number;\n  resetIsVisible?: () => void;\n  placement?: Placement;\n  className?: string;\n  iconClassName?: string | null;\n  close?: () => void;\n};\n\nexport const Notification = (props: PropsWithChildren<NotificationProps>) => {\n  const {\n    isVisible,\n    message,\n    children,\n    visibilityTimeout,\n    resetIsVisible,\n    placement = 'top',\n    className,\n    iconClassName = 'str-video__notification__icon',\n    close,\n  } = props;\n\n  const { refs, x, y, strategy } = useFloatingUIPreset({\n    placement,\n    strategy: 'absolute',\n  });\n\n  useEffect(() => {\n    if (!isVisible || !visibilityTimeout || !resetIsVisible) return;\n\n    const timeout = setTimeout(() => {\n      resetIsVisible();\n    }, visibilityTimeout);\n\n    return () => clearTimeout(timeout);\n  }, [isVisible, resetIsVisible, visibilityTimeout]);\n\n  return (\n    <div ref={refs.setReference}>\n      {isVisible && (\n        <div\n          className={clsx('str-video__notification', className)}\n          ref={refs.setFloating}\n          style={{\n            position: strategy,\n            top: y ?? 0,\n            left: x ?? 0,\n            overflowY: 'auto',\n          }}\n        >\n          {iconClassName && <i className={iconClassName} />}\n          <span className=\"str-video__notification__message\">{message}</span>\n          {close ? (\n            <i\n              className=\"str-video__icon str-video__icon--close str-video__notification__close\"\n              onClick={close}\n            />\n          ) : null}\n        </div>\n      )}\n      {children}\n    </div>\n  );\n};\n", "import { Notification } from './Notification';\nimport { OwnCapability } from '@stream-io/video-client';\nimport {\n  PropsWithChildren,\n  useCallback,\n  useEffect,\n  useRef,\n  useState,\n} from 'react';\nimport { useCallStateHooks } from '@stream-io/video-react-bindings';\n\nexport type PermissionNotificationProps = PropsWithChildren<{\n  /**\n   * Set this to true if there is ongoing request for the permission.\n   */\n  isAwaitingApproval: boolean;\n\n  /**\n   * The message to display in the notification once\n   * the requested permission is granted.\n   */\n  messageApproved: string;\n\n  /**\n   * The message to display in the notification once a permission\n   * is revoked.\n   */\n  messageRevoked: string;\n\n  /**\n   * The message to display in the notification while\n   * the requested permission is awaiting approval.\n   */\n  messageAwaitingApproval: string;\n\n  /**\n   * The permission to check for.\n   */\n  permission: OwnCapability;\n\n  /**\n   * The time in milliseconds to display the notification.\n   * Defaults to 3500ms.\n   */\n  visibilityTimeout?: number;\n}>;\n\nexport const PermissionNotification = (props: PermissionNotificationProps) => {\n  const {\n    permission,\n    isAwaitingApproval,\n    messageApproved,\n    messageAwaitingApproval,\n    messageRevoked,\n    visibilityTimeout = 3500,\n    children,\n  } = props;\n  const { useHasPermissions } = useCallStateHooks();\n  const hasPermission = useHasPermissions(permission);\n  const prevHasPermission = useRef(hasPermission);\n  const [showNotification, setShowNotification] = useState<\n    'granted' | 'revoked'\n  >();\n  useEffect(() => {\n    if (prevHasPermission.current === hasPermission) return;\n\n    if (hasPermission) {\n      setShowNotification('granted');\n      prevHasPermission.current = true;\n    } else {\n      setShowNotification('revoked');\n      prevHasPermission.current = false;\n    }\n  }, [hasPermission]);\n\n  const resetIsVisible = useCallback(() => setShowNotification(undefined), []);\n  if (isAwaitingApproval) {\n    return (\n      <Notification\n        isVisible={isAwaitingApproval && !hasPermission}\n        message={messageAwaitingApproval}\n      >\n        {children}\n      </Notification>\n    );\n  }\n\n  return (\n    <Notification\n      isVisible={!!showNotification}\n      visibilityTimeout={visibilityTimeout}\n      resetIsVisible={resetIsVisible}\n      message={\n        showNotification === 'granted' ? messageApproved : messageRevoked\n      }\n    >\n      {children}\n    </Notification>\n  );\n};\n", "import { PropsWithChildren } from 'react';\nimport { Placement } from '@floating-ui/react';\n\nimport { useCallStateHooks, useI18n } from '@stream-io/video-react-bindings';\nimport { Notification } from './Notification';\n\nexport type SpeakingWhileMutedNotificationProps = {\n  /**\n   * Text message displayed by the notification.\n   */\n  text?: string;\n  placement?: Placement;\n};\n\nexport const SpeakingWhileMutedNotification = ({\n  children,\n  text,\n  placement,\n}: PropsWithChildren<SpeakingWhileMutedNotificationProps>) => {\n  const { useMicrophoneState } = useCallStateHooks();\n  const { isSpeakingWhileMuted } = useMicrophoneState();\n  const { t } = useI18n();\n\n  const message = text ?? t('You are muted. Unmute to speak.');\n  return (\n    <Notification\n      message={message}\n      isVisible={isSpeakingWhileMuted}\n      placement={placement || 'top-start'}\n    >\n      {children}\n    </Notification>\n  );\n};\n", "import { PropsWithChildren, useEffect, useState } from 'react';\nimport {\n  useI18n,\n  useToggleCallRecording,\n} from '@stream-io/video-react-bindings';\nimport { Notification } from './Notification';\n\nexport type RecordingInProgressNotificationProps = {\n  text?: string;\n};\n\nexport const RecordingInProgressNotification = ({\n  children,\n  text,\n}: PropsWithChildren<RecordingInProgressNotificationProps>) => {\n  const { t } = useI18n();\n  const { isCallRecordingInProgress } = useToggleCallRecording();\n\n  const [isVisible, setVisible] = useState(false);\n\n  const message = text ?? t('Recording in progress...');\n\n  useEffect(() => {\n    if (isCallRecordingInProgress) {\n      setVisible(true);\n    } else {\n      setVisible(false);\n    }\n  }, [isCallRecordingInProgress]);\n\n  return (\n    <Notification\n      message={message}\n      iconClassName=\"str-video__icon str-video__icon--recording-on\"\n      isVisible={isVisible}\n      placement=\"top-start\"\n      close={() => setVisible(false)}\n    >\n      {children}\n    </Notification>\n  );\n};\n", "import clsx from 'clsx';\n\nexport type LoadingIndicatorProps = {\n  className?: string;\n  /** String will be injected into class and later used to apply as a CSS mask-image to an element as data URL */\n  type?: string;\n  /** Text to be displayed under the loading indicator icon */\n  text?: string;\n  /** Tooltip to be displayed on hover */\n  tooltip?: string;\n};\n\nexport const LoadingIndicator = ({\n  className,\n  type = 'spinner',\n  text,\n  tooltip,\n}: LoadingIndicatorProps) => {\n  return (\n    <div\n      className={clsx('str-video__loading-indicator', className)}\n      title={tooltip}\n    >\n      <div className={clsx('str-video__loading-indicator__icon', type)}></div>\n      {text && <p className=\"str-video__loading-indicator-text\">{text}</p>}\n    </div>\n  );\n};\n", "import { PropsWithChildren, useEffect, useRef } from 'react';\nimport clsx from 'clsx';\nimport { useFloatingUIPreset } from '../../hooks';\nimport { FloatingArrow, Placement, arrow } from '@floating-ui/react';\n\nexport type TooltipProps<T extends HTMLElement> = PropsWithChildren<{\n  /** Reference element to which the tooltip should attach to */\n  referenceElement: T | null;\n  /** Additional class applied to the tooltip root element */\n  tooltipClassName?: string;\n  /** Popper's modifier (offset) property - [xAxis offset, yAxis offset], default [0, 10] */\n  offset?: [number, number];\n  /** Popper's placement property defining default position of the tooltip, default 'top' */\n  tooltipPlacement?: Placement;\n  /** Tells component whether to render its contents */\n  visible?: boolean;\n}>;\n\nexport const Tooltip = <T extends HTMLElement>({\n  children,\n  referenceElement,\n  tooltipClassName,\n  tooltipPlacement = 'top',\n  visible = false,\n}: TooltipProps<T>) => {\n  const arrowRef = useRef<SVGSVGElement>(null);\n  const { refs, x, y, strategy, context } = useFloatingUIPreset({\n    placement: tooltipPlacement,\n    strategy: 'absolute',\n    middleware: [arrow({ element: arrowRef })],\n  });\n\n  useEffect(() => {\n    refs.setReference(referenceElement);\n  }, [referenceElement, refs]);\n\n  if (!visible) return null;\n\n  return (\n    <div\n      className={clsx('str-video__tooltip', tooltipClassName)}\n      ref={refs.setFloating}\n      style={{\n        position: strategy,\n        top: y ?? 0,\n        left: x ?? 0,\n      }}\n    >\n      <FloatingArrow\n        ref={arrowRef}\n        context={context}\n        fill=\"var(--str-video__tooltip--background-color)\"\n      />\n      {children}\n    </div>\n  );\n};\n", "import { MouseEventHandler, useCallback, useState } from 'react';\n\nexport const useEnterLeaveHandlers = <T extends HTMLElement>({\n  onMouseEnter,\n  onMouseLeave,\n}: Partial<\n  Record<'onMouseEnter' | 'onMouseLeave', MouseEventHandler<T>>\n> = {}) => {\n  const [tooltipVisible, setTooltipVisible] = useState(false);\n\n  const handleMouseEnter: MouseEventHandler<T> = useCallback(\n    (e) => {\n      setTooltipVisible(true);\n      onMouseEnter?.(e);\n    },\n    [onMouseEnter],\n  );\n\n  const handleMouseLeave: MouseEventHandler<T> = useCallback(\n    (e) => {\n      setTooltipVisible(false);\n      onMouseLeave?.(e);\n    },\n    [onMouseLeave],\n  );\n\n  return { handleMouseEnter, handleMouseLeave, tooltipVisible };\n};\n", "import { ComponentProps, useState } from 'react';\nimport { Tooltip, TooltipProps } from './Tooltip';\nimport { useEnterLeaveHandlers } from './hooks';\n\ntype WithPopupProps = ComponentProps<'div'> &\n  Omit<TooltipProps<HTMLDivElement>, 'referenceElement' | 'children'> & {\n    tooltipDisabled?: boolean;\n  };\n\n// todo: duplicate of CallParticipantList.tsx#MediaIndicator - refactor to a single component\nexport const WithTooltip = ({\n  title,\n  tooltipClassName,\n  tooltipPlacement,\n  tooltipDisabled,\n  ...props\n}: WithPopupProps) => {\n  const { handleMouseEnter, handleMouseLeave, tooltipVisible } =\n    useEnterLeaveHandlers<HTMLDivElement>();\n  const [tooltipAnchor, setTooltipAnchor] = useState<HTMLDivElement | null>(\n    null,\n  );\n  const tooltipActuallyVisible =\n    !tooltipDisabled && Boolean(title) && tooltipVisible;\n\n  return (\n    <>\n      <Tooltip\n        referenceElement={tooltipAnchor}\n        visible={tooltipActuallyVisible}\n        tooltipClassName={tooltipClassName}\n        tooltipPlacement={tooltipPlacement}\n      >\n        {title || ''}\n      </Tooltip>\n      <div\n        ref={setTooltipAnchor}\n        onMouseEnter={handleMouseEnter}\n        onMouseLeave={handleMouseLeave}\n        {...props}\n      />\n    </>\n  );\n};\n", "import { forwardRef } from 'react';\n\nimport { OwnCapability } from '@stream-io/video-client';\nimport {\n  Restricted,\n  useI18n,\n  useToggleCallRecording,\n} from '@stream-io/video-react-bindings';\nimport { CompositeButton } from '../Button/';\nimport { Icon } from '../Icon';\nimport {\n  MenuToggle,\n  MenuVisualType,\n  ToggleMenuButtonProps,\n  useMenuContext,\n} from '../Menu';\nimport { LoadingIndicator } from '../LoadingIndicator';\nimport { WithTooltip } from '../Tooltip';\n\nexport type RecordCallButtonProps = {\n  caption?: string;\n};\n\nconst RecordEndConfirmation = () => {\n  const { t } = useI18n();\n  const { toggleCallRecording, isAwaitingResponse } = useToggleCallRecording();\n\n  const { close } = useMenuContext();\n\n  return (\n    <div className=\"str-video__end-recording__confirmation\">\n      <div className=\"str-video__end-recording__header\">\n        <Icon icon=\"recording-on\" />\n        <h2 className=\"str-video__end-recording__heading\">\n          {t('End recording')}\n        </h2>\n      </div>\n      <p className=\"str-video__end-recording__description\">\n        {t('Are you sure you want end the recording?')}\n      </p>\n      <div className=\"str-video__end-recording__actions\">\n        <CompositeButton variant=\"secondary\" onClick={close}>\n          {t('Cancel')}\n        </CompositeButton>\n        <CompositeButton variant=\"primary\" onClick={toggleCallRecording}>\n          {isAwaitingResponse ? <LoadingIndicator /> : t('End recording')}\n        </CompositeButton>\n      </div>\n    </div>\n  );\n};\n\nconst ToggleEndRecordingMenuButton = forwardRef<\n  HTMLDivElement,\n  ToggleMenuButtonProps\n>(function ToggleEndRecordingMenuButton(props, ref) {\n  return (\n    <CompositeButton\n      ref={ref}\n      active={true}\n      variant=\"secondary\"\n      data-testid=\"recording-stop-button\"\n    >\n      <Icon icon=\"recording-off\" />\n    </CompositeButton>\n  );\n});\n\nexport const RecordCallConfirmationButton = ({\n  caption,\n}: {\n  caption?: string;\n}) => {\n  const { t } = useI18n();\n  const { toggleCallRecording, isAwaitingResponse, isCallRecordingInProgress } =\n    useToggleCallRecording();\n\n  if (isCallRecordingInProgress) {\n    return (\n      <Restricted\n        requiredGrants={[\n          OwnCapability.START_RECORD_CALL,\n          OwnCapability.STOP_RECORD_CALL,\n        ]}\n      >\n        <MenuToggle\n          ToggleButton={ToggleEndRecordingMenuButton}\n          visualType={MenuVisualType.PORTAL}\n        >\n          <RecordEndConfirmation />\n        </MenuToggle>\n      </Restricted>\n    );\n  }\n\n  const title = isAwaitingResponse\n    ? t('Waiting for recording to start...')\n    : (caption ?? t('Record call'));\n\n  return (\n    <Restricted\n      requiredGrants={[\n        OwnCapability.START_RECORD_CALL,\n        OwnCapability.STOP_RECORD_CALL,\n      ]}\n    >\n      <WithTooltip title={title}>\n        <CompositeButton\n          active={isCallRecordingInProgress}\n          caption={caption}\n          variant=\"secondary\"\n          data-testid=\"recording-start-button\"\n          onClick={isAwaitingResponse ? undefined : toggleCallRecording}\n        >\n          {isAwaitingResponse ? (\n            <LoadingIndicator />\n          ) : (\n            <Icon icon=\"recording-off\" />\n          )}\n        </CompositeButton>\n      </WithTooltip>\n    </Restricted>\n  );\n};\n\nexport const RecordCallButton = ({ caption }: RecordCallButtonProps) => {\n  const { t } = useI18n();\n  const { toggleCallRecording, isAwaitingResponse, isCallRecordingInProgress } =\n    useToggleCallRecording();\n\n  let title = caption ?? t('Record call');\n\n  if (isAwaitingResponse) {\n    title = isCallRecordingInProgress\n      ? t('Waiting for recording to stop...')\n      : t('Waiting for recording to start...');\n  }\n\n  return (\n    <Restricted\n      requiredGrants={[\n        OwnCapability.START_RECORD_CALL,\n        OwnCapability.STOP_RECORD_CALL,\n      ]}\n    >\n      <CompositeButton\n        active={isCallRecordingInProgress}\n        caption={caption}\n        variant=\"secondary\"\n        data-testid={\n          isCallRecordingInProgress\n            ? 'recording-stop-button'\n            : 'recording-start-button'\n        }\n        title={title}\n        onClick={isAwaitingResponse ? undefined : toggleCallRecording}\n      >\n        {isAwaitingResponse ? (\n          <LoadingIndicator />\n        ) : (\n          <Icon\n            icon={isCallRecordingInProgress ? 'recording-on' : 'recording-off'}\n          />\n        )}\n      </CompositeButton>\n    </Restricted>\n  );\n};\n", "import { useEffect } from 'react';\nimport { StreamVideoParticipant } from '@stream-io/video-client';\nimport { useCall } from '@stream-io/video-react-bindings';\n\nexport type ReactionProps = {\n  participant: StreamVideoParticipant;\n  hideAfterTimeoutInMs?: number;\n  emojiReactionMap?: Record<string, string>;\n};\n\nexport const defaultEmojiReactionMap: Record<string, string> = {\n  ':like:': '',\n  ':raise-hand:': '',\n  ':fireworks:': '',\n  ':dislike:': '',\n  ':heart:': '',\n  ':smile:': '',\n};\n\nexport const Reaction = ({\n  participant: { reaction, sessionId },\n  hideAfterTimeoutInMs = 5500,\n  emojiReactionMap = defaultEmojiReactionMap,\n}: ReactionProps) => {\n  const call = useCall();\n\n  useEffect(() => {\n    if (!call || !reaction) return;\n\n    const timeoutId = setTimeout(() => {\n      call.resetReaction(sessionId);\n    }, hideAfterTimeoutInMs);\n\n    return () => {\n      clearTimeout(timeoutId);\n    };\n  }, [call, hideAfterTimeoutInMs, reaction, sessionId]);\n\n  if (!reaction) return null;\n\n  const { emoji_code: emojiCode } = reaction;\n\n  return (\n    <div className=\"str-video__reaction\">\n      <span className=\"str-video__reaction__emoji\">\n        {emojiCode && emojiReactionMap[emojiCode]}\n      </span>\n    </div>\n  );\n};\n", "import { forwardRef } from 'react';\nimport clsx from 'clsx';\n\nimport { OwnCapability, StreamReaction } from '@stream-io/video-client';\nimport { Restricted, useCall, useI18n } from '@stream-io/video-react-bindings';\n\nimport {\n  MenuToggle,\n  MenuVisualType,\n  ToggleMenuButtonProps,\n  useMenuContext,\n} from '../Menu';\nimport { CompositeButton } from '../Button';\nimport { defaultEmojiReactionMap } from '../Reaction';\nimport { Icon } from '../Icon';\nimport { WithTooltip } from '../Tooltip';\n\nexport const defaultReactions: StreamReaction[] = [\n  {\n    type: 'reaction',\n    emoji_code: ':like:',\n  },\n  {\n    // TODO OL: use `prompt` type?\n    type: 'raised-hand',\n    emoji_code: ':raise-hand:',\n  },\n  {\n    type: 'reaction',\n    emoji_code: ':fireworks:',\n  },\n  {\n    type: 'reaction',\n    emoji_code: ':dislike:',\n  },\n  {\n    type: 'reaction',\n    emoji_code: ':heart:',\n  },\n  {\n    type: 'reaction',\n    emoji_code: ':smile:',\n  },\n];\n\nexport interface ReactionsButtonProps {\n  reactions?: StreamReaction[];\n}\n\nexport const ReactionsButton = ({\n  reactions = defaultReactions,\n}: ReactionsButtonProps) => {\n  return (\n    <Restricted requiredGrants={[OwnCapability.CREATE_REACTION]}>\n      <MenuToggle\n        placement=\"top\"\n        ToggleButton={ToggleReactionsMenuButton}\n        visualType={MenuVisualType.MENU}\n      >\n        <DefaultReactionsMenu reactions={reactions} />\n      </MenuToggle>\n    </Restricted>\n  );\n};\n\nconst ToggleReactionsMenuButton = forwardRef<\n  HTMLDivElement,\n  ToggleMenuButtonProps\n>(function ToggleReactionsMenuButton({ menuShown }, ref) {\n  const { t } = useI18n();\n  return (\n    <WithTooltip title={t('Reactions')} tooltipDisabled={menuShown}>\n      <CompositeButton ref={ref} active={menuShown} variant=\"primary\">\n        <Icon icon=\"reactions\" />\n      </CompositeButton>\n    </WithTooltip>\n  );\n});\n\nexport interface DefaultReactionsMenuProps {\n  reactions: StreamReaction[];\n  layout?: 'horizontal' | 'vertical';\n}\n\nexport const DefaultReactionsMenu = ({\n  reactions,\n  layout = 'horizontal',\n}: DefaultReactionsMenuProps) => {\n  const call = useCall();\n  const { close } = useMenuContext();\n  return (\n    <div\n      className={clsx('str-video__reactions-menu', {\n        'str-video__reactions-menu--horizontal': layout === 'horizontal',\n        'str-video__reactions-menu--vertical': layout === 'vertical',\n      })}\n    >\n      {reactions.map((reaction) => (\n        <button\n          key={reaction.emoji_code}\n          type=\"button\"\n          className=\"str-video__reactions-menu__button\"\n          onClick={() => {\n            call?.sendReaction(reaction);\n            close?.();\n          }}\n        >\n          {reaction.emoji_code && defaultEmojiReactionMap[reaction.emoji_code]}\n        </button>\n      ))}\n    </div>\n  );\n};\n", "export type PropsWithErrorHandler<T = unknown> = T & {\n  /**\n   * Will be called if the call control action failed with an error (e.g. user didn't grant a\n   * browser permission to enable a media device). If no callback is provided, just logs the error.\n   * @param error Exception which caused call control action to fail\n   */\n  onError?: (error: unknown) => void;\n};\n\n/**\n * Wraps an event handler, silencing and logging exceptions (excluding the NotAllowedError\n * DOMException, which is a normal situation handled by the SDK)\n *\n * @param props component props, including the onError callback\n * @param handler event handler to wrap\n */\nexport const createCallControlHandler = (\n  props: PropsWithErrorHandler,\n  handler: () => Promise<void>,\n): (() => Promise<void>) => {\n  return async () => {\n    try {\n      await handler();\n    } catch (error) {\n      if (props.onError) {\n        props.onError(error);\n        return;\n      }\n\n      if (!isNotAllowedError(error)) {\n        console.error('Call control handler failed', error);\n      }\n    }\n  };\n};\n\nfunction isNotAllowedError(error: unknown): error is DOMException {\n  return error instanceof DOMException && error.name === 'NotAllowedError';\n}\n", "import { OwnCapability } from '@stream-io/video-client';\nimport {\n  Restricted,\n  useCallStateHooks,\n  useI18n,\n  UseInputMediaDeviceOptions,\n} from '@stream-io/video-react-bindings';\nimport { CompositeButton } from '../Button/';\nimport { PermissionNotification } from '../Notification';\nimport { useRequestPermission } from '../../hooks';\nimport { Icon } from '../Icon';\nimport { WithTooltip } from '../Tooltip';\nimport {\n  PropsWithErrorHandler,\n  createCallControlHandler,\n} from '../../utilities/callControlHandler';\n\nexport type ScreenShareButtonProps = PropsWithErrorHandler<\n  {\n    caption?: string;\n  } & UseInputMediaDeviceOptions\n>;\n\nexport const ScreenShareButton = (props: ScreenShareButtonProps) => {\n  const { t } = useI18n();\n  const { caption, optimisticUpdates } = props;\n\n  const { useHasOngoingScreenShare, useScreenShareState, useCallSettings } =\n    useCallStateHooks();\n  const isSomeoneScreenSharing = useHasOngoingScreenShare();\n  const { hasPermission, requestPermission, isAwaitingPermission } =\n    useRequestPermission(OwnCapability.SCREENSHARE);\n\n  const callSettings = useCallSettings();\n  const isScreenSharingAllowed = callSettings?.screensharing.enabled;\n\n  const { screenShare, optionsAwareIsMute, isTogglePending } =\n    useScreenShareState({\n      optimisticUpdates,\n    });\n  const amIScreenSharing = !optionsAwareIsMute;\n  const disableScreenShareButton =\n    (!amIScreenSharing &&\n      (isSomeoneScreenSharing || isScreenSharingAllowed === false)) ||\n    (!optimisticUpdates && isTogglePending);\n  const handleClick = createCallControlHandler(props, async () => {\n    if (!hasPermission) {\n      await requestPermission();\n    } else {\n      await screenShare.toggle();\n    }\n  });\n\n  return (\n    <Restricted requiredGrants={[OwnCapability.SCREENSHARE]}>\n      <PermissionNotification\n        permission={OwnCapability.SCREENSHARE}\n        isAwaitingApproval={isAwaitingPermission}\n        messageApproved={t('You can now share your screen.')}\n        messageAwaitingApproval={t('Awaiting for an approval to share screen.')}\n        messageRevoked={t('You can no longer share your screen.')}\n      >\n        <WithTooltip title={caption ?? t('Share screen')}>\n          <CompositeButton\n            active={isSomeoneScreenSharing || amIScreenSharing}\n            caption={caption}\n            variant=\"primary\"\n            data-testid={\n              isSomeoneScreenSharing\n                ? 'screen-share-stop-button'\n                : 'screen-share-start-button'\n            }\n            disabled={disableScreenShareButton}\n            onClick={handleClick}\n          >\n            <Icon\n              icon={\n                isSomeoneScreenSharing ? 'screen-share-on' : 'screen-share-off'\n              }\n            />\n          </CompositeButton>\n        </WithTooltip>\n      </PermissionNotification>\n    </Restricted>\n  );\n};\n", "import { useEffect, useState } from 'react';\nimport { createSoundDetector } from '@stream-io/video-client';\nimport { useCallStateHooks } from '@stream-io/video-react-bindings';\nimport { Icon } from '../Icon';\n\nexport const AudioVolumeIndicator = () => {\n  const { useMicrophoneState } = useCallStateHooks();\n  const { isEnabled, mediaStream } = useMicrophoneState();\n  const [audioLevel, setAudioLevel] = useState(0);\n\n  useEffect(() => {\n    if (!isEnabled || !mediaStream) return;\n    const disposeSoundDetector = createSoundDetector(\n      mediaStream,\n      ({ audioLevel: al }) => setAudioLevel(al),\n      { detectionFrequencyInMs: 80, destroyStreamOnStop: false },\n    );\n    return () => {\n      disposeSoundDetector().catch(console.error);\n    };\n  }, [isEnabled, mediaStream]);\n\n  return (\n    <div className=\"str-video__audio-volume-indicator\">\n      <Icon icon={isEnabled ? 'mic' : 'mic-off'} />\n      <div className=\"str-video__audio-volume-indicator__bar\">\n        <div\n          className=\"str-video__audio-volume-indicator__bar-value\"\n          style={{ transform: `scaleX(${audioLevel / 100})` }}\n        />\n      </div>\n    </div>\n  );\n};\n", "import {\n  createContext,\n  ReactElement,\n  ReactNode,\n  useCallback,\n  useContext,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport clsx from 'clsx';\nimport {\n  autoUpdate,\n  flip,\n  FloatingFocusManager,\n  FloatingList,\n  useClick,\n  useDismiss,\n  useFloating,\n  useInteractions,\n  useListItem,\n  useListNavigation,\n  useRole,\n  useTypeahead,\n} from '@floating-ui/react';\n\nimport { Icon } from '../Icon';\n\ninterface SelectContextValue {\n  activeIndex: number | null;\n  selectedIndex: number | null;\n  getItemProps: ReturnType<typeof useInteractions>['getItemProps'];\n  handleSelect: (index: number | null) => void;\n}\n\nconst SelectContext = createContext<SelectContextValue>(\n  {} as SelectContextValue,\n);\n\nconst Select = (props: {\n  children: ReactNode;\n  icon?: string;\n  defaultSelectedLabel: string;\n  defaultSelectedIndex: number;\n  handleSelect: (index: number) => void;\n}) => {\n  const {\n    children,\n    icon,\n    defaultSelectedLabel,\n    defaultSelectedIndex,\n    handleSelect: handleSelectProp,\n  } = props;\n  const [isOpen, setIsOpen] = useState(false);\n  const [activeIndex, setActiveIndex] = useState<number | null>(null);\n  const [selectedIndex, setSelectedIndex] = useState<number | null>(\n    defaultSelectedIndex,\n  );\n  const [selectedLabel, setSelectedLabel] = useState<string | null>(\n    defaultSelectedLabel,\n  );\n\n  const { refs, context } = useFloating({\n    placement: 'bottom-start',\n    open: isOpen,\n    onOpenChange: setIsOpen,\n    whileElementsMounted: autoUpdate,\n    middleware: [flip()],\n  });\n\n  const elementsRef = useRef<Array<HTMLElement | null>>([]);\n  const labelsRef = useRef<Array<string | null>>([]);\n\n  const handleSelect = useCallback(\n    (index: number | null) => {\n      setSelectedIndex(index);\n      handleSelectProp(index || 0);\n      setIsOpen(false);\n      if (index !== null) {\n        setSelectedLabel(labelsRef.current[index]);\n      }\n    },\n    [handleSelectProp],\n  );\n\n  const handleTypeaheadMatch = (index: number | null) => {\n    if (isOpen) {\n      setActiveIndex(index);\n    } else {\n      handleSelect(index);\n    }\n  };\n\n  const listNav = useListNavigation(context, {\n    listRef: elementsRef,\n    activeIndex,\n    selectedIndex,\n    onNavigate: setActiveIndex,\n  });\n  const typeahead = useTypeahead(context, {\n    listRef: labelsRef,\n    activeIndex,\n    selectedIndex,\n    onMatch: handleTypeaheadMatch,\n  });\n  const click = useClick(context);\n  const dismiss = useDismiss(context);\n  const role = useRole(context, { role: 'listbox' });\n\n  const { getReferenceProps, getFloatingProps, getItemProps } = useInteractions(\n    [listNav, typeahead, click, dismiss, role],\n  );\n\n  const selectContext = useMemo(\n    () => ({\n      activeIndex,\n      selectedIndex,\n      getItemProps,\n      handleSelect,\n    }),\n    [activeIndex, selectedIndex, getItemProps, handleSelect],\n  );\n\n  return (\n    <div className=\"str-video__dropdown\">\n      <div\n        className=\"str-video__dropdown-selected\"\n        ref={refs.setReference}\n        tabIndex={0}\n        {...getReferenceProps()}\n      >\n        <label className=\"str-video__dropdown-selected__label\">\n          {icon && (\n            <Icon className=\"str-video__dropdown-selected__icon\" icon={icon} />\n          )}\n          {selectedLabel}\n        </label>\n        <Icon\n          className=\"str-video__dropdown-selected__chevron\"\n          icon={isOpen ? 'chevron-up' : 'chevron-down'}\n        />\n      </div>\n      <SelectContext.Provider value={selectContext}>\n        {isOpen && (\n          <FloatingFocusManager context={context} modal={false}>\n            <div\n              className=\"str-video__dropdown-list\"\n              ref={refs.setFloating}\n              {...getFloatingProps()}\n            >\n              <FloatingList elementsRef={elementsRef} labelsRef={labelsRef}>\n                {children}\n              </FloatingList>\n            </div>\n          </FloatingFocusManager>\n        )}\n      </SelectContext.Provider>\n    </div>\n  );\n};\n\nexport type DropDownSelectOptionProps = {\n  label: string;\n  selected?: boolean;\n  icon?: string;\n};\n\nexport const DropDownSelectOption = (props: DropDownSelectOptionProps) => {\n  const { selected, label, icon } = props;\n  const { getItemProps, handleSelect } = useContext(SelectContext);\n  const { ref, index } = useListItem();\n  return (\n    <div\n      className={clsx('str-video__dropdown-option', {\n        'str-video__dropdown-option--selected': selected,\n      })}\n      ref={ref}\n      {...getItemProps({\n        onClick: () => handleSelect(index),\n      })}\n    >\n      {icon && <Icon className=\"str-video__dropdown-icon\" icon={icon} />}\n      <span className=\"str-video__dropdown-label\">{label}</span>\n    </div>\n  );\n};\n\nexport const DropDownSelect = (props: {\n  icon?: string;\n  defaultSelectedLabel: string;\n  defaultSelectedIndex: number;\n  handleSelect: (index: number) => void;\n  children:\n    | ReactElement<DropDownSelectOptionProps>\n    | ReactElement<DropDownSelectOptionProps>[];\n}) => {\n  const {\n    children,\n    icon,\n    handleSelect,\n    defaultSelectedLabel,\n    defaultSelectedIndex,\n  } = props;\n  return (\n    <Select\n      icon={icon}\n      handleSelect={handleSelect}\n      defaultSelectedIndex={defaultSelectedIndex}\n      defaultSelectedLabel={defaultSelectedLabel}\n    >\n      {children}\n    </Select>\n  );\n};\n", "import clsx from 'clsx';\nimport { ChangeEventHandler, PropsWithChildren, useCallback } from 'react';\n\nimport { useDeviceList } from '../../hooks';\nimport { DropDownSelect, DropDownSelectOption } from '../DropdownSelect';\nimport { useMenuContext } from '../Menu';\n\ntype DeviceSelectorOptionProps = {\n  id: string;\n  label: string;\n  name?: string;\n  selected?: boolean;\n  value: string;\n  disabled?: boolean;\n  defaultChecked?: boolean;\n  onChange?: ChangeEventHandler<HTMLInputElement>;\n};\n\nconst DeviceSelectorOption = ({\n  disabled,\n  id,\n  label,\n  onChange,\n  name,\n  selected,\n  defaultChecked,\n  value,\n}: DeviceSelectorOptionProps) => {\n  return (\n    <label\n      className={clsx('str-video__device-settings__option', {\n        'str-video__device-settings__option--selected': selected,\n        'str-video__device-settings__option--disabled': disabled,\n      })}\n      htmlFor={id}\n    >\n      <input\n        type=\"radio\"\n        name={name}\n        onChange={onChange}\n        value={value}\n        id={id}\n        checked={selected}\n        defaultChecked={defaultChecked}\n        disabled={disabled}\n      />\n      {label}\n    </label>\n  );\n};\n\nexport type DeviceSelectorType = 'audioinput' | 'audiooutput' | 'videoinput';\n\nconst DeviceSelectorList = (\n  props: PropsWithChildren<{\n    devices: MediaDeviceInfo[];\n    type: DeviceSelectorType;\n    selectedDeviceId?: string;\n    title?: string;\n    onChange?: (deviceId: string) => void;\n  }>,\n) => {\n  const {\n    devices = [],\n    selectedDeviceId,\n    title,\n    type,\n    onChange,\n    children,\n  } = props;\n  const { close } = useMenuContext();\n  const { deviceList } = useDeviceList(devices, selectedDeviceId);\n\n  return (\n    <div className=\"str-video__device-settings__device-kind\">\n      {title && (\n        <div className=\"str-video__device-settings__device-selector-title\">\n          {title}\n        </div>\n      )}\n      {deviceList.map((device) => {\n        return (\n          <DeviceSelectorOption\n            id={`${type}--${device.deviceId}`}\n            value={device.deviceId}\n            label={device.label}\n            key={device.deviceId}\n            onChange={(e) => {\n              const deviceId = e.target.value;\n              if (deviceId !== 'default') {\n                onChange?.(deviceId);\n              }\n              close?.();\n            }}\n            name={type}\n            selected={device.isSelected}\n          />\n        );\n      })}\n      {children}\n    </div>\n  );\n};\n\nconst DeviceSelectorDropdown = (props: {\n  devices: MediaDeviceInfo[];\n  selectedDeviceId?: string;\n  title?: string;\n  onChange?: (deviceId: string) => void;\n  icon: string;\n}) => {\n  const { devices = [], selectedDeviceId, title, onChange, icon } = props;\n  const { deviceList, selectedDeviceInfo, selectedIndex } = useDeviceList(\n    devices,\n    selectedDeviceId,\n  );\n\n  const handleSelect = useCallback(\n    (index: number) => {\n      const deviceId = deviceList[index].deviceId;\n      if (deviceId !== 'default') {\n        onChange?.(deviceId);\n      }\n    },\n    [deviceList, onChange],\n  );\n\n  return (\n    <div className=\"str-video__device-settings__device-kind\">\n      <div className=\"str-video__device-settings__device-selector-title\">\n        {title}\n      </div>\n      <DropDownSelect\n        icon={icon}\n        defaultSelectedIndex={selectedIndex}\n        defaultSelectedLabel={selectedDeviceInfo.label}\n        handleSelect={handleSelect}\n      >\n        {deviceList.map((device) => (\n          <DropDownSelectOption\n            key={device.deviceId}\n            icon={icon}\n            label={device.label}\n            selected={device.isSelected}\n          />\n        ))}\n      </DropDownSelect>\n    </div>\n  );\n};\n\nexport const DeviceSelector = (\n  props: PropsWithChildren<{\n    devices: MediaDeviceInfo[];\n    icon: string;\n    type: DeviceSelectorType;\n    selectedDeviceId?: string;\n    title?: string;\n    onChange?: (deviceId: string) => void;\n    visualType?: 'list' | 'dropdown';\n  }>,\n) => {\n  const { visualType = 'list', icon, ...rest } = props;\n\n  if (visualType === 'list') {\n    return <DeviceSelectorList {...rest} />;\n  }\n  return <DeviceSelectorDropdown {...rest} icon={icon} />;\n};\n", "import { useCallback, useEffect, useRef, useState } from 'react';\nimport { useCallStateHooks, useI18n } from '@stream-io/video-react-bindings';\nimport { CompositeButton } from '../Button';\nimport { Icon } from '../Icon';\n\n/**\n * SpeakerTest component that plays a test audio through the selected speaker.\n * This allows users to verify their audio output device is working correctly.\n */\nexport const SpeakerTest = (props: { audioUrl?: string }) => {\n  const { useSpeakerState } = useCallStateHooks();\n  const { selectedDevice } = useSpeakerState();\n  const audioElementRef = useRef<HTMLAudioElement | null>(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const { t } = useI18n();\n\n  const {\n    audioUrl = `https://unpkg.com/${process.env.PKG_NAME}@${process.env.PKG_VERSION}/assets/piano.mp3`,\n  } = props;\n\n  // Update audio output device when selection changes\n  useEffect(() => {\n    const audio = audioElementRef.current;\n    if (!audio || !selectedDevice) return;\n\n    // Set the sinkId to route audio to the selected speaker\n    if ('setSinkId' in audio) {\n      audio.setSinkId(selectedDevice).catch((err) => {\n        console.error('Failed to set audio output device:', err);\n      });\n    }\n  }, [selectedDevice]);\n\n  const handleStartTest = useCallback(async () => {\n    const audio = audioElementRef.current;\n    if (!audio) return;\n\n    audio.src = audioUrl;\n\n    try {\n      if (isPlaying) {\n        audio.pause();\n        audio.currentTime = 0;\n        setIsPlaying(false);\n      } else {\n        await audio.play();\n        setIsPlaying(true);\n      }\n    } catch (err) {\n      console.error('Failed to play test audio:', err);\n      setIsPlaying(false);\n    }\n  }, [isPlaying, audioUrl]);\n\n  const handleAudioEnded = useCallback(() => setIsPlaying(false), []);\n  return (\n    <div className=\"str-video__speaker-test\">\n      <audio\n        ref={audioElementRef}\n        onEnded={handleAudioEnded}\n        onPause={handleAudioEnded}\n      />\n      <CompositeButton\n        className=\"str-video__speaker-test__button\"\n        onClick={handleStartTest}\n        type=\"button\"\n      >\n        <div className=\"str-video__speaker-test__button-content\">\n          <Icon icon=\"speaker\" />\n          {isPlaying ? t('Stop test') : t('Test speaker')}\n        </div>\n      </CompositeButton>\n    </div>\n  );\n};\n", "import { useCallStateHooks } from '@stream-io/video-react-bindings';\nimport { DeviceSelector } from './DeviceSelector';\nimport { AudioVolumeIndicator } from './AudioVolumeIndicator';\nimport { SpeakerTest } from './SpeakerTest';\n\nexport type DeviceSelectorAudioInputProps = {\n  title?: string;\n  visualType?: 'list' | 'dropdown';\n  volumeIndicatorVisible?: boolean;\n};\n\nexport const DeviceSelectorAudioInput = ({\n  title,\n  visualType,\n  volumeIndicatorVisible = true,\n}: DeviceSelectorAudioInputProps) => {\n  const { useMicrophoneState } = useCallStateHooks();\n  const { microphone, selectedDevice, devices } = useMicrophoneState();\n\n  return (\n    <DeviceSelector\n      devices={devices || []}\n      selectedDeviceId={selectedDevice}\n      type=\"audioinput\"\n      onChange={async (deviceId) => {\n        await microphone.select(deviceId);\n      }}\n      title={title}\n      visualType={visualType}\n      icon=\"mic\"\n    >\n      {volumeIndicatorVisible && (\n        <>\n          <hr className=\"str-video__device-settings__separator\" />\n          <AudioVolumeIndicator />\n        </>\n      )}\n    </DeviceSelector>\n  );\n};\n\nexport type DeviceSelectorAudioOutputProps = {\n  title?: string;\n  visualType?: 'list' | 'dropdown';\n  speakerTestVisible?: boolean;\n  speakerTestAudioUrl?: string;\n};\n\nexport const DeviceSelectorAudioOutput = ({\n  title,\n  visualType,\n  speakerTestVisible = true,\n  speakerTestAudioUrl,\n}: DeviceSelectorAudioOutputProps) => {\n  const { useSpeakerState } = useCallStateHooks();\n  const { speaker, selectedDevice, devices, isDeviceSelectionSupported } =\n    useSpeakerState();\n\n  if (!isDeviceSelectionSupported) return null;\n\n  return (\n    <DeviceSelector\n      devices={devices}\n      type=\"audiooutput\"\n      selectedDeviceId={selectedDevice}\n      onChange={(deviceId) => {\n        speaker.select(deviceId);\n      }}\n      title={title}\n      visualType={visualType}\n      icon=\"speaker\"\n    >\n      {speakerTestVisible && (\n        <>\n          <hr className=\"str-video__device-settings__separator\" />\n          <SpeakerTest audioUrl={speakerTestAudioUrl} />\n        </>\n      )}\n    </DeviceSelector>\n  );\n};\n", "import { DeviceSelector } from './DeviceSelector';\nimport { useCallStateHooks } from '@stream-io/video-react-bindings';\n\nexport type DeviceSelectorVideoProps = {\n  title?: string;\n  visualType?: 'list' | 'dropdown';\n};\n\nexport const DeviceSelectorVideo = ({\n  title,\n  visualType,\n}: DeviceSelectorVideoProps) => {\n  const { useCameraState } = useCallStateHooks();\n  const { camera, devices, selectedDevice } = useCameraState();\n\n  return (\n    <DeviceSelector\n      devices={devices || []}\n      type=\"videoinput\"\n      selectedDeviceId={selectedDevice}\n      onChange={async (deviceId) => {\n        await camera.select(deviceId);\n      }}\n      title={title}\n      visualType={visualType}\n      icon=\"camera\"\n    />\n  );\n};\n", "import { forwardRef } from 'react';\nimport { useI18n } from '@stream-io/video-react-bindings';\nimport clsx from 'clsx';\nimport { MenuToggle, MenuVisualType, ToggleMenuButtonProps } from '../Menu';\nimport {\n  DeviceSelectorAudioInput,\n  DeviceSelectorAudioOutput,\n} from './DeviceSelectorAudio';\nimport { DeviceSelectorVideo } from './DeviceSelectorVideo';\nimport { IconButton } from '../Button';\n\nexport type DeviceSettingsProps = {\n  visualType?: MenuVisualType;\n};\n\nexport const DeviceSettings = ({\n  visualType = MenuVisualType.MENU,\n}: DeviceSettingsProps) => {\n  return (\n    <MenuToggle\n      placement=\"bottom-end\"\n      ToggleButton={ToggleDeviceSettingsMenuButton}\n      visualType={visualType}\n    >\n      <Menu />\n    </MenuToggle>\n  );\n};\n\nconst Menu = () => {\n  const { t } = useI18n();\n  return (\n    <div className=\"str-video__device-settings\">\n      <DeviceSelectorVideo title={t('Select a Camera')} />\n      <DeviceSelectorAudioInput title={t('Select a Mic')} />\n      <DeviceSelectorAudioOutput title={t('Select Speakers')} />\n    </div>\n  );\n};\n\nconst ToggleDeviceSettingsMenuButton = forwardRef<\n  HTMLButtonElement,\n  ToggleMenuButtonProps\n>(function ToggleDeviceSettingsMenuButton({ menuShown }, ref) {\n  const { t } = useI18n();\n  return (\n    <IconButton\n      className={clsx('str-video__device-settings__button', {\n        'str-video__device-settings__button--active': menuShown,\n      })}\n      title={t('Toggle device menu')}\n      icon=\"device-settings\"\n      ref={ref}\n    />\n  );\n});\n", "import { OwnCapability } from '@stream-io/video-client';\nimport {\n  Restricted,\n  useCallStateHooks,\n  useI18n,\n  type UseInputMediaDeviceOptions,\n} from '@stream-io/video-react-bindings';\nimport clsx from 'clsx';\nimport { CompositeButton, IconButtonWithMenuProps } from '../Button';\nimport { DeviceSelectorAudioInput } from '../DeviceSettings';\nimport { PermissionNotification } from '../Notification';\nimport { useRequestPermission } from '../../hooks';\nimport { Icon } from '../Icon';\nimport { WithTooltip } from '../Tooltip';\nimport { useState } from 'react';\nimport {\n  createCallControlHandler,\n  PropsWithErrorHandler,\n} from '../../utilities/callControlHandler';\n\nexport type ToggleAudioPreviewButtonProps = PropsWithErrorHandler<\n  Pick<\n    IconButtonWithMenuProps,\n    'caption' | 'Menu' | 'menuPlacement' | 'onMenuToggle'\n  > &\n    UseInputMediaDeviceOptions\n>;\n\nexport const ToggleAudioPreviewButton = (\n  props: ToggleAudioPreviewButtonProps,\n) => {\n  const {\n    caption,\n    Menu = DeviceSelectorAudioInput,\n    menuPlacement = 'top',\n    onMenuToggle,\n    optimisticUpdates,\n    ...restCompositeButtonProps\n  } = props;\n  const { t } = useI18n();\n  const { useMicrophoneState } = useCallStateHooks();\n  const {\n    microphone,\n    hasBrowserPermission,\n    isPromptingPermission,\n    optionsAwareIsMute,\n    isTogglePending,\n  } = useMicrophoneState({ optimisticUpdates });\n  const [tooltipDisabled, setTooltipDisabled] = useState(false);\n  const handleClick = createCallControlHandler(props, () =>\n    microphone.toggle(),\n  );\n\n  return (\n    <WithTooltip\n      title={\n        !hasBrowserPermission\n          ? t('Check your browser audio permissions')\n          : (caption ?? t('Mic'))\n      }\n      tooltipDisabled={tooltipDisabled}\n    >\n      <CompositeButton\n        active={optionsAwareIsMute}\n        caption={caption}\n        className={clsx(\n          !hasBrowserPermission && 'str-video__device-unavailable',\n        )}\n        variant=\"secondary\"\n        disabled={\n          !hasBrowserPermission || (!optimisticUpdates && isTogglePending)\n        }\n        data-testid={\n          optionsAwareIsMute\n            ? 'preview-audio-unmute-button'\n            : 'preview-audio-mute-button'\n        }\n        onClick={handleClick}\n        Menu={Menu}\n        menuPlacement={menuPlacement}\n        {...restCompositeButtonProps}\n        onMenuToggle={(shown) => {\n          setTooltipDisabled(shown);\n          onMenuToggle?.(shown);\n        }}\n      >\n        <Icon icon={!optionsAwareIsMute ? 'mic' : 'mic-off'} />\n        {!hasBrowserPermission && (\n          <span\n            className=\"str-video__no-media-permission\"\n            title={t('Check your browser audio permissions')}\n            children=\"!\"\n          />\n        )}\n        {isPromptingPermission && (\n          <span\n            className=\"str-video__pending-permission\"\n            title={t('Waiting for permission')}\n            children=\"?\"\n          />\n        )}\n      </CompositeButton>\n    </WithTooltip>\n  );\n};\n\nexport type ToggleAudioPublishingButtonProps = PropsWithErrorHandler<\n  Pick<\n    IconButtonWithMenuProps,\n    'caption' | 'Menu' | 'menuPlacement' | 'onMenuToggle'\n  > &\n    UseInputMediaDeviceOptions\n>;\n\nexport const ToggleAudioPublishingButton = (\n  props: ToggleAudioPublishingButtonProps,\n) => {\n  const { t } = useI18n();\n  const {\n    caption,\n    Menu = <DeviceSelectorAudioInput visualType=\"list\" />,\n    menuPlacement = 'top',\n    onMenuToggle,\n    optimisticUpdates,\n    ...restCompositeButtonProps\n  } = props;\n\n  const { hasPermission, requestPermission, isAwaitingPermission } =\n    useRequestPermission(OwnCapability.SEND_AUDIO);\n\n  const { useMicrophoneState } = useCallStateHooks();\n  const {\n    microphone,\n    hasBrowserPermission,\n    isPromptingPermission,\n    isTogglePending,\n    optionsAwareIsMute,\n  } = useMicrophoneState({ optimisticUpdates });\n\n  const [tooltipDisabled, setTooltipDisabled] = useState(false);\n  const handleClick = createCallControlHandler(props, async () => {\n    if (!hasPermission) {\n      await requestPermission();\n    } else {\n      await microphone.toggle();\n    }\n  });\n\n  return (\n    <Restricted requiredGrants={[OwnCapability.SEND_AUDIO]}>\n      <PermissionNotification\n        permission={OwnCapability.SEND_AUDIO}\n        isAwaitingApproval={isAwaitingPermission}\n        messageApproved={t('You can now speak.')}\n        messageAwaitingApproval={t('Awaiting for an approval to speak.')}\n        messageRevoked={t('You can no longer speak.')}\n      >\n        <WithTooltip\n          title={\n            !hasPermission\n              ? t('You have no permission to share your audio')\n              : !hasBrowserPermission\n                ? t('Check your browser mic permissions')\n                : (caption ?? t('Mic'))\n          }\n          tooltipDisabled={tooltipDisabled}\n        >\n          <CompositeButton\n            active={optionsAwareIsMute}\n            caption={caption}\n            variant=\"secondary\"\n            disabled={\n              !hasBrowserPermission ||\n              !hasPermission ||\n              // disable button while the toggle action is pending when not using optimistic updates\n              (!optimisticUpdates && isTogglePending)\n            }\n            data-testid={\n              optionsAwareIsMute ? 'audio-unmute-button' : 'audio-mute-button'\n            }\n            onClick={handleClick}\n            Menu={Menu}\n            menuPlacement={menuPlacement}\n            menuOffset={16}\n            {...restCompositeButtonProps}\n            onMenuToggle={(shown) => {\n              setTooltipDisabled(shown);\n              onMenuToggle?.(shown);\n            }}\n          >\n            <Icon icon={optionsAwareIsMute ? 'mic-off' : 'mic'} />\n            {(!hasBrowserPermission || !hasPermission) && (\n              <span className=\"str-video__no-media-permission\">!</span>\n            )}\n            {isPromptingPermission && (\n              <span\n                className=\"str-video__pending-permission\"\n                title={t('Waiting for permission')}\n              >\n                ?\n              </span>\n            )}\n          </CompositeButton>\n        </WithTooltip>\n      </PermissionNotification>\n    </Restricted>\n  );\n};\n", "import {\n  Restricted,\n  useCallStateHooks,\n  useI18n,\n  UseInputMediaDeviceOptions,\n} from '@stream-io/video-react-bindings';\nimport clsx from 'clsx';\nimport { OwnCapability } from '@stream-io/video-client';\nimport { CompositeButton, IconButtonWithMenuProps } from '../Button/';\nimport { DeviceSelectorVideo } from '../DeviceSettings';\nimport { PermissionNotification } from '../Notification';\nimport { useRequestPermission } from '../../hooks';\nimport { Icon } from '../Icon';\nimport { WithTooltip } from '../Tooltip';\nimport { useState } from 'react';\nimport {\n  createCallControlHandler,\n  PropsWithErrorHandler,\n} from '../../utilities/callControlHandler';\n\nexport type ToggleVideoPreviewButtonProps = PropsWithErrorHandler<\n  Pick<\n    IconButtonWithMenuProps,\n    'caption' | 'Menu' | 'menuPlacement' | 'onMenuToggle'\n  > &\n    UseInputMediaDeviceOptions\n>;\n\nexport const ToggleVideoPreviewButton = (\n  props: ToggleVideoPreviewButtonProps,\n) => {\n  const {\n    caption,\n    Menu = DeviceSelectorVideo,\n    menuPlacement = 'top',\n    onMenuToggle,\n    optimisticUpdates,\n    ...restCompositeButtonProps\n  } = props;\n  const { t } = useI18n();\n  const { useCameraState } = useCallStateHooks();\n  const {\n    camera,\n    hasBrowserPermission,\n    isPromptingPermission,\n    isTogglePending,\n    optionsAwareIsMute,\n  } = useCameraState({ optimisticUpdates });\n  const [tooltipDisabled, setTooltipDisabled] = useState(false);\n  const handleClick = createCallControlHandler(props, () => camera.toggle());\n\n  return (\n    <WithTooltip\n      title={\n        !hasBrowserPermission\n          ? t('Check your browser video permissions')\n          : (caption ?? t('Video'))\n      }\n      tooltipDisabled={tooltipDisabled}\n    >\n      <CompositeButton\n        active={optionsAwareIsMute}\n        caption={caption}\n        className={clsx(\n          !hasBrowserPermission && 'str-video__device-unavailable',\n        )}\n        variant=\"secondary\"\n        data-testid={\n          optionsAwareIsMute\n            ? 'preview-video-unmute-button'\n            : 'preview-video-mute-button'\n        }\n        onClick={handleClick}\n        disabled={\n          !hasBrowserPermission || (!optimisticUpdates && isTogglePending)\n        }\n        Menu={Menu}\n        menuPlacement={menuPlacement}\n        {...restCompositeButtonProps}\n        onMenuToggle={(shown) => {\n          setTooltipDisabled(shown);\n          onMenuToggle?.(shown);\n        }}\n      >\n        <Icon icon={!optionsAwareIsMute ? 'camera' : 'camera-off'} />\n        {!hasBrowserPermission && (\n          <span\n            className=\"str-video__no-media-permission\"\n            title={t('Check your browser video permissions')}\n            children=\"!\"\n          />\n        )}\n        {isPromptingPermission && (\n          <span\n            className=\"str-video__pending-permission\"\n            title={t('Waiting for permission')}\n            children=\"?\"\n          />\n        )}\n      </CompositeButton>\n    </WithTooltip>\n  );\n};\n\ntype ToggleVideoPublishingButtonProps = PropsWithErrorHandler<\n  Pick<\n    IconButtonWithMenuProps,\n    'caption' | 'Menu' | 'menuPlacement' | 'onMenuToggle'\n  > &\n    UseInputMediaDeviceOptions\n>;\n\nexport const ToggleVideoPublishingButton = (\n  props: ToggleVideoPublishingButtonProps,\n) => {\n  const { t } = useI18n();\n  const {\n    caption,\n    Menu = <DeviceSelectorVideo visualType=\"list\" />,\n    menuPlacement = 'top',\n    onMenuToggle,\n    optimisticUpdates,\n    ...restCompositeButtonProps\n  } = props;\n\n  const { hasPermission, requestPermission, isAwaitingPermission } =\n    useRequestPermission(OwnCapability.SEND_VIDEO);\n\n  const { useCameraState, useCallSettings } = useCallStateHooks();\n  const {\n    camera,\n    optionsAwareIsMute,\n    hasBrowserPermission,\n    isPromptingPermission,\n    isTogglePending,\n  } = useCameraState({ optimisticUpdates });\n  const callSettings = useCallSettings();\n  const isPublishingVideoAllowed = callSettings?.video.enabled;\n  const [tooltipDisabled, setTooltipDisabled] = useState(false);\n  const handleClick = createCallControlHandler(props, async () => {\n    if (!hasPermission) {\n      await requestPermission();\n    } else {\n      await camera.toggle();\n    }\n  });\n\n  return (\n    <Restricted requiredGrants={[OwnCapability.SEND_VIDEO]}>\n      <PermissionNotification\n        permission={OwnCapability.SEND_VIDEO}\n        isAwaitingApproval={isAwaitingPermission}\n        messageApproved={t('You can now share your video.')}\n        messageAwaitingApproval={t(\n          'Awaiting for an approval to share your video.',\n        )}\n        messageRevoked={t('You can no longer share your video.')}\n      >\n        <WithTooltip\n          title={\n            !hasPermission\n              ? t('You have no permission to share your video')\n              : !hasBrowserPermission\n                ? t('Check your browser video permissions')\n                : !isPublishingVideoAllowed\n                  ? t('Video publishing is disabled by the system')\n                  : caption || t('Video')\n          }\n          tooltipDisabled={tooltipDisabled}\n        >\n          <CompositeButton\n            active={optionsAwareIsMute}\n            caption={caption}\n            variant=\"secondary\"\n            disabled={\n              !hasBrowserPermission ||\n              !hasPermission ||\n              !isPublishingVideoAllowed ||\n              (!optimisticUpdates && isTogglePending)\n            }\n            data-testid={\n              optionsAwareIsMute ? 'video-unmute-button' : 'video-mute-button'\n            }\n            onClick={handleClick}\n            Menu={Menu}\n            menuPlacement={menuPlacement}\n            menuOffset={16}\n            {...restCompositeButtonProps}\n            onMenuToggle={(shown) => {\n              setTooltipDisabled(shown);\n              onMenuToggle?.(shown);\n            }}\n          >\n            <Icon icon={optionsAwareIsMute ? 'camera-off' : 'camera'} />\n            {(!hasBrowserPermission ||\n              !hasPermission ||\n              !isPublishingVideoAllowed) && (\n              <span className=\"str-video__no-media-permission\">!</span>\n            )}\n            {isPromptingPermission && (\n              <span\n                className=\"str-video__pending-permission\"\n                title={t('Waiting for permission')}\n              >\n                ?\n              </span>\n            )}\n          </CompositeButton>\n        </WithTooltip>\n      </PermissionNotification>\n    </Restricted>\n  );\n};\n", "import { forwardRef, MouseEventHandler, useCallback } from 'react';\nimport { OwnCapability } from '@stream-io/video-client';\nimport { Restricted, useCall, useI18n } from '@stream-io/video-react-bindings';\n\nimport { MenuToggle, ToggleMenuButtonProps } from '../Menu';\n\nimport { IconButton } from '../Button';\nimport { Icon } from '../Icon';\nimport { WithTooltip } from '../Tooltip';\n\nconst EndCallMenu = (props: {\n  onLeave: MouseEventHandler<HTMLButtonElement>;\n  onEnd: MouseEventHandler<HTMLButtonElement>;\n}) => {\n  const { onLeave, onEnd } = props;\n  const { t } = useI18n();\n  return (\n    <div className=\"str-video__end-call__confirmation\">\n      <button\n        className=\"str-video__button str-video__end-call__leave\"\n        type=\"button\"\n        data-testid=\"leave-call-button\"\n        onClick={onLeave}\n      >\n        <Icon\n          className=\"str-video__button__icon str-video__end-call__leave-icon\"\n          icon=\"logout\"\n        />\n        {t('Leave call')}\n      </button>\n      <Restricted requiredGrants={[OwnCapability.END_CALL]}>\n        <button\n          className=\"str-video__button str-video__end-call__end\"\n          type=\"button\"\n          data-testid=\"end-call-for-all-button\"\n          onClick={onEnd}\n        >\n          <Icon\n            className=\"str-video__button__icon str-video__end-call__end-icon\"\n            icon=\"call-end\"\n          />\n          {t('End call for all')}\n        </button>\n      </Restricted>\n    </div>\n  );\n};\n\nconst CancelCallToggleMenuButton = forwardRef<\n  HTMLButtonElement,\n  ToggleMenuButtonProps\n>(function CancelCallToggleMenuButton({ menuShown }, ref) {\n  const { t } = useI18n();\n  return (\n    <WithTooltip title={t('Leave call')} tooltipDisabled={menuShown}>\n      <IconButton\n        icon={menuShown ? 'close' : 'call-end'}\n        variant={menuShown ? 'active' : 'danger'}\n        data-testid=\"leave-call-button\"\n        ref={ref}\n      />\n    </WithTooltip>\n  );\n});\n\nexport type CancelCallButtonProps = {\n  disabled?: boolean;\n  caption?: string;\n  onClick?: MouseEventHandler<HTMLButtonElement>;\n  onLeave?: () => void;\n};\n\nexport const CancelCallConfirmButton = ({\n  onClick,\n  onLeave,\n}: CancelCallButtonProps) => {\n  const call = useCall();\n\n  const handleLeave: MouseEventHandler<HTMLButtonElement> = useCallback(\n    async (e) => {\n      if (onClick) {\n        onClick(e);\n      } else if (call) {\n        await call.leave();\n        onLeave?.();\n      }\n    },\n    [onClick, onLeave, call],\n  );\n\n  const handleEndCall: MouseEventHandler<HTMLButtonElement> = useCallback(\n    async (e) => {\n      if (onClick) {\n        onClick(e);\n      } else if (call) {\n        await call.endCall();\n        onLeave?.();\n      }\n    },\n    [onClick, onLeave, call],\n  );\n\n  return (\n    <MenuToggle placement=\"top-start\" ToggleButton={CancelCallToggleMenuButton}>\n      <EndCallMenu onEnd={handleEndCall} onLeave={handleLeave} />\n    </MenuToggle>\n  );\n};\n\nexport const CancelCallButton = ({\n  disabled,\n  caption,\n  onClick,\n  onLeave,\n}: CancelCallButtonProps) => {\n  const call = useCall();\n  const { t } = useI18n();\n  const handleClick: MouseEventHandler<HTMLButtonElement> = useCallback(\n    async (e) => {\n      if (onClick) {\n        onClick(e);\n      } else if (call) {\n        await call.leave();\n        onLeave?.();\n      }\n    },\n    [onClick, onLeave, call],\n  );\n  return (\n    <IconButton\n      disabled={disabled}\n      icon=\"call-end\"\n      variant=\"danger\"\n      title={caption ?? t('Leave call')}\n      data-testid=\"cancel-call-button\"\n      onClick={handleClick}\n    />\n  );\n};\n", "import { OwnCapability } from '@stream-io/video-client';\nimport { Restricted } from '@stream-io/video-react-bindings';\nimport { SpeakingWhileMutedNotification } from '../Notification';\nimport { RecordCallButton } from './RecordCallButton';\nimport { ReactionsButton } from './ReactionsButton';\nimport { ScreenShareButton } from './ScreenShareButton';\nimport { ToggleAudioPublishingButton } from './ToggleAudioButton';\nimport { ToggleVideoPublishingButton } from './ToggleVideoButton';\nimport { CancelCallButton } from './CancelCallButton';\n\nexport type CallControlsProps = {\n  onLeave?: () => void;\n};\n\nexport const CallControls = ({ onLeave }: CallControlsProps) => (\n  <div className=\"str-video__call-controls\">\n    <Restricted requiredGrants={[OwnCapability.SEND_AUDIO]}>\n      <SpeakingWhileMutedNotification>\n        <ToggleAudioPublishingButton />\n      </SpeakingWhileMutedNotification>\n    </Restricted>\n    <Restricted requiredGrants={[OwnCapability.SEND_VIDEO]}>\n      <ToggleVideoPublishingButton />\n    </Restricted>\n    <Restricted requiredGrants={[OwnCapability.CREATE_REACTION]}>\n      <ReactionsButton />\n    </Restricted>\n    <Restricted requiredGrants={[OwnCapability.SCREENSHARE]}>\n      <ScreenShareButton />\n    </Restricted>\n    <Restricted\n      requiredGrants={[\n        OwnCapability.START_RECORD_CALL,\n        OwnCapability.STOP_RECORD_CALL,\n      ]}\n    >\n      <RecordCallButton />\n    </Restricted>\n    <CancelCallButton onLeave={onLeave} />\n  </div>\n);\n", "import { lazy, ReactNode, Suspense, useEffect, useRef, useState } from 'react';\nimport clsx from 'clsx';\nimport {\n  AggregatedStatsReport,\n  CallStatsReport,\n  SfuModels,\n} from '@stream-io/video-client';\nimport { useCallStateHooks, useI18n } from '@stream-io/video-react-bindings';\nimport { useFloating, useHover, useInteractions } from '@floating-ui/react';\nimport { Icon } from '../Icon';\n\nconst CallStatsLatencyChart = lazy(() => import('./CallStatsLatencyChart'));\n\nenum Status {\n  GOOD = 'Good',\n  OK = 'Ok',\n  BAD = 'Bad',\n}\n\nexport type CallStatsProps = {\n  latencyLowBound?: number;\n  latencyHighBound?: number;\n  audioJitterLowBound?: number;\n  audioJitterHighBound?: number;\n  videoJitterLowBound?: number;\n  videoJitterHighBound?: number;\n  showCodecInfo?: boolean;\n  LatencyChartSuspenseFallback?: ReactNode;\n};\n\nexport const CallStats = (props: CallStatsProps) => {\n  const {\n    latencyLowBound = 75,\n    latencyHighBound = 400,\n    audioJitterLowBound = 10,\n    audioJitterHighBound = 30,\n    videoJitterLowBound = 20,\n    videoJitterHighBound = 50,\n    showCodecInfo = false,\n    LatencyChartSuspenseFallback = null,\n  } = props;\n  const [latencyBuffer, setLatencyBuffer] = useState<\n    Array<{ x: number; y: number }>\n  >(() => {\n    const now = Date.now();\n    return Array.from({ length: 20 }, (_, i) => ({ x: now + i, y: 0 }));\n  });\n\n  const { t } = useI18n();\n  const [publishBitrate, setPublishBitrate] = useState('-');\n  const [subscribeBitrate, setSubscribeBitrate] = useState('-');\n  const [publishAudioBitrate, setPublishAudioBitrate] = useState('-');\n  const [subscribeAudioBitrate, setSubscribeAudioBitrate] = useState('-');\n  const previousStats = useRef<CallStatsReport>(undefined);\n  const { useCallStatsReport } = useCallStateHooks();\n  const callStatsReport = useCallStatsReport();\n\n  useEffect(() => {\n    if (!callStatsReport) return;\n    if (!previousStats.current) {\n      previousStats.current = callStatsReport;\n      return;\n    }\n    const previousCallStatsReport = previousStats.current;\n    setPublishBitrate(() => {\n      return calculatePublishBitrate(previousCallStatsReport, callStatsReport);\n    });\n    setSubscribeBitrate(() => {\n      return calculateSubscribeBitrate(\n        previousCallStatsReport,\n        callStatsReport,\n      );\n    });\n    setPublishAudioBitrate(() => {\n      return calculatePublishAudioBitrate(\n        previousCallStatsReport,\n        callStatsReport,\n      );\n    });\n    setSubscribeAudioBitrate(() => {\n      return calculateSubscribeAudioBitrate(\n        previousCallStatsReport,\n        callStatsReport,\n      );\n    });\n\n    setLatencyBuffer((latencyBuf) => {\n      const newLatencyBuffer = latencyBuf.slice(-19);\n      newLatencyBuffer.push({\n        x: callStatsReport.timestamp,\n        y:\n          callStatsReport.publisherStats.averageRoundTripTimeInMs ||\n          callStatsReport.publisherAudioStats.averageRoundTripTimeInMs,\n      });\n      return newLatencyBuffer;\n    });\n\n    previousStats.current = callStatsReport;\n  }, [callStatsReport]);\n\n  const latencyComparison = {\n    lowBound: latencyLowBound,\n    highBound: latencyHighBound,\n    value: callStatsReport?.publisherStats.averageRoundTripTimeInMs || 0,\n  };\n\n  const audioJitterComparison = {\n    lowBound: audioJitterLowBound,\n    highBound: audioJitterHighBound,\n  };\n\n  const videoJitterComparison = {\n    lowBound: videoJitterLowBound,\n    highBound: videoJitterHighBound,\n  };\n\n  return (\n    <div className=\"str-video__call-stats\">\n      {callStatsReport && (\n        <>\n          <div className=\"str-video__call-stats__header\">\n            <h3 className=\"str-video__call-stats__heading\">\n              <Icon\n                className=\"str-video__call-stats__icon\"\n                icon=\"call-latency\"\n              />\n              {t('Call Latency')}\n            </h3>\n            <p className=\"str-video__call-stats__description\">\n              {t(\n                'Very high latency values may reduce call quality, cause lag, and make the call less enjoyable.',\n              )}\n            </p>\n          </div>\n\n          <div className=\"str-video__call-stats__latencychart\">\n            <Suspense fallback={LatencyChartSuspenseFallback}>\n              <CallStatsLatencyChart values={latencyBuffer} />\n            </Suspense>\n          </div>\n\n          <div className=\"str-video__call-stats__header\">\n            <h3 className=\"str-video__call-stats__heading\">\n              <Icon\n                className=\"str-video__call-stats__icon\"\n                icon=\"network-quality\"\n              />\n              {t('Video performance')}\n            </h3>\n            <p className=\"str-video__call-stats__description\">\n              {t('Review the key data points below to assess call performance')}\n            </p>\n          </div>\n\n          <div className=\"str-video__call-stats__card-container\">\n            <StatCard label={t('Region')} value={callStatsReport.datacenter} />\n            <StatCard\n              label={t('Latency')}\n              value={`${callStatsReport.publisherStats.averageRoundTripTimeInMs} ms.`}\n              comparison={latencyComparison}\n            />\n            <StatCard\n              label={t('Receive jitter')}\n              value={`${callStatsReport.subscriberStats.averageJitterInMs} ms.`}\n              comparison={{\n                ...videoJitterComparison,\n                value: callStatsReport.subscriberStats.averageJitterInMs,\n              }}\n            />\n            <StatCard\n              label={t('Publish jitter')}\n              value={`${callStatsReport.publisherStats.averageJitterInMs} ms.`}\n              comparison={{\n                ...videoJitterComparison,\n                value: callStatsReport.publisherStats.averageJitterInMs,\n              }}\n            />\n            <StatCard\n              label={`${t('Publish resolution')}${showCodecInfo ? formatCodec(callStatsReport) : ''}`}\n              value={toFrameSize(callStatsReport.publisherStats)}\n            />\n            <StatCard\n              label={t('Publish quality drop reason')}\n              value={callStatsReport.publisherStats.qualityLimitationReasons}\n            />\n            <StatCard\n              label={t('Receiving resolution')}\n              value={toFrameSize(callStatsReport.subscriberStats)}\n            />\n            <StatCard\n              label={t('Receive quality drop reason')}\n              value={callStatsReport.subscriberStats.qualityLimitationReasons}\n            />\n            <StatCard label={t('Publish bitrate')} value={publishBitrate} />\n            <StatCard label={t('Receiving bitrate')} value={subscribeBitrate} />\n          </div>\n\n          <div className=\"str-video__call-stats__header\">\n            <h3 className=\"str-video__call-stats__heading\">\n              <Icon className=\"str-video__call-stats__icon\" icon=\"mic\" />\n              {t('Audio Performance')}\n            </h3>\n            <p className=\"str-video__call-stats__description\">\n              {t(\n                'Review the key audio data points below to assess audio performance',\n              )}\n            </p>\n          </div>\n\n          <div className=\"str-video__call-stats__card-container\">\n            <StatCard\n              label={t('Latency')}\n              value={`${callStatsReport.publisherAudioStats.averageRoundTripTimeInMs} ms.`}\n              comparison={latencyComparison}\n            />\n            <StatCard\n              label={t('Audio codec')}\n              value={formatAudioCodec(callStatsReport)}\n            />\n            <StatCard\n              label={t('Audio bitrate (publish)')}\n              value={publishAudioBitrate}\n            />\n            <StatCard\n              label={t('Audio bitrate (receive)')}\n              value={subscribeAudioBitrate}\n            />\n            <StatCard\n              label={t('Audio jitter (publish)')}\n              value={`${callStatsReport.publisherAudioStats.averageJitterInMs} ms.`}\n              comparison={{\n                ...audioJitterComparison,\n                value: callStatsReport.publisherAudioStats.averageJitterInMs,\n              }}\n            />\n            <StatCard\n              label={t('Audio jitter (receive)')}\n              value={`${callStatsReport.subscriberAudioStats.averageJitterInMs} ms.`}\n              comparison={{\n                ...audioJitterComparison,\n                value: callStatsReport.subscriberAudioStats.averageJitterInMs,\n              }}\n            />\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nconst StatCardExplanation = (props: { description: string }) => {\n  const { description } = props;\n  const [isOpen, setIsOpen] = useState(false);\n\n  const { refs, floatingStyles, context } = useFloating({\n    open: isOpen,\n    onOpenChange: setIsOpen,\n  });\n\n  const hover = useHover(context);\n\n  const { getReferenceProps, getFloatingProps } = useInteractions([hover]);\n\n  return (\n    <>\n      <div\n        className=\"str-video__call-explanation\"\n        ref={refs.setReference}\n        {...getReferenceProps()}\n      >\n        <Icon className=\"str-video__call-explanation__icon\" icon=\"info\" />\n      </div>\n      {isOpen && (\n        <div\n          className=\"str-video__call-explanation__description\"\n          ref={refs.setFloating}\n          style={floatingStyles}\n          {...getFloatingProps()}\n        >\n          {description}\n        </div>\n      )}\n    </>\n  );\n};\n\nconst StatsTag = (props: { children: ReactNode; status: Status }) => {\n  const { children, status } = props;\n  return (\n    <div\n      className={clsx('str-video__call-stats__tag', {\n        'str-video__call-stats__tag--good': status === Status.GOOD,\n        'str-video__call-stats__tag--ok': status === Status.OK,\n        'str-video__call-stats__tag--bad': status === Status.BAD,\n      })}\n    >\n      <div className=\"str-video__call-stats__tag__text\">{children}</div>\n    </div>\n  );\n};\n\nexport const StatCard = (props: {\n  label: string;\n  value: string | ReactNode;\n  description?: string;\n  comparison?: { value: number; highBound: number; lowBound: number };\n}) => {\n  const { label, value, description, comparison } = props;\n\n  const { t } = useI18n();\n  const status = comparison ? toStatus(comparison) : undefined;\n\n  return (\n    <div className=\"str-video__call-stats__card\">\n      <div className=\"str-video__call-stats__card-content\">\n        <div className=\"str-video__call-stats__card-label\">\n          {label}\n          {description && <StatCardExplanation description={description} />}\n        </div>\n        <div className=\"str-video__call-stats__card-value\">{value}</div>\n      </div>\n      {status && <StatsTag status={status}>{t(status)}</StatsTag>}\n    </div>\n  );\n};\n\nconst toStatus = (config: {\n  value: number;\n  lowBound: number;\n  highBound: number;\n}): Status => {\n  const { value, lowBound, highBound } = config;\n  if (value <= lowBound) return Status.GOOD;\n  if (value >= lowBound && value <= highBound) return Status.OK;\n  if (value >= highBound) return Status.BAD;\n  return Status.GOOD;\n};\n\nconst toFrameSize = (stats: AggregatedStatsReport) => {\n  const {\n    highestFrameWidth: w,\n    highestFrameHeight: h,\n    highestFramesPerSecond: fps,\n  } = stats;\n  let size = `-`;\n  if (w && h) {\n    size = `${w}x${h}`;\n    if (fps) {\n      size += `@${fps}fps.`;\n    }\n  }\n  return size;\n};\n\nconst formatCodec = (callStatsReport: CallStatsReport): string => {\n  const { codecPerTrackType } = callStatsReport.publisherStats;\n  if (!codecPerTrackType || !codecPerTrackType[SfuModels.TrackType.VIDEO]) {\n    return '';\n  }\n  const [, name] = codecPerTrackType[SfuModels.TrackType.VIDEO].split('/');\n  return name ? ` (${name})` : '';\n};\n\nconst formatAudioCodec = (callStatsReport: CallStatsReport): string => {\n  const { codecPerTrackType } = callStatsReport.publisherAudioStats;\n  if (!codecPerTrackType || !codecPerTrackType[SfuModels.TrackType.AUDIO]) {\n    return '';\n  }\n  const [, name] = codecPerTrackType[SfuModels.TrackType.AUDIO].split('/');\n  return name ?? '';\n};\n\nconst calculatePublishBitrate = (\n  previousCallStatsReport: CallStatsReport,\n  callStatsReport: CallStatsReport,\n) => {\n  const {\n    publisherStats: {\n      totalBytesSent: previousTotalBytesSent,\n      timestamp: previousTimestamp,\n    },\n  } = previousCallStatsReport;\n\n  const {\n    publisherStats: { totalBytesSent, timestamp },\n  } = callStatsReport;\n\n  const bytesSent = totalBytesSent - previousTotalBytesSent;\n  const timeElapsed = timestamp - previousTimestamp;\n  return `${((bytesSent * 8) / timeElapsed).toFixed(2)} kbps`;\n};\n\nconst calculateSubscribeBitrate = (\n  previousCallStatsReport: CallStatsReport,\n  callStatsReport: CallStatsReport,\n) => {\n  const {\n    subscriberStats: {\n      totalBytesReceived: previousTotalBytesReceived,\n      timestamp: previousTimestamp,\n    },\n  } = previousCallStatsReport;\n\n  const {\n    subscriberStats: { totalBytesReceived, timestamp },\n  } = callStatsReport;\n\n  const bytesReceived = totalBytesReceived - previousTotalBytesReceived;\n  const timeElapsed = timestamp - previousTimestamp;\n  return `${((bytesReceived * 8) / timeElapsed).toFixed(2)} kbps`;\n};\n\nconst calculatePublishAudioBitrate = (\n  previousCallStatsReport: CallStatsReport,\n  callStatsReport: CallStatsReport,\n) => {\n  const previousAudioStats = previousCallStatsReport.publisherAudioStats;\n  const audioStats = callStatsReport.publisherAudioStats;\n\n  const bytesSent =\n    audioStats.totalBytesSent - previousAudioStats.totalBytesSent;\n  const timeElapsed = audioStats.timestamp - previousAudioStats.timestamp;\n\n  return `${((bytesSent * 8) / timeElapsed).toFixed(2)} kbps`;\n};\n\nconst calculateSubscribeAudioBitrate = (\n  previousCallStatsReport: CallStatsReport,\n  callStatsReport: CallStatsReport,\n) => {\n  const previousAudioStats = previousCallStatsReport.subscriberAudioStats;\n  const audioStats = callStatsReport.subscriberAudioStats;\n\n  const bytesReceived =\n    audioStats.totalBytesReceived - previousAudioStats.totalBytesReceived;\n  const timeElapsed = audioStats.timestamp - previousAudioStats.timestamp;\n\n  return `${((bytesReceived * 8) / timeElapsed).toFixed(2)} kbps`;\n};\n", "import { forwardRef } from 'react';\nimport { useI18n } from '@stream-io/video-react-bindings';\n\nimport { CallStats } from '../CallStats';\nimport { CompositeButton } from '../Button/';\nimport { MenuToggle, ToggleMenuButtonProps } from '../Menu';\nimport { Icon } from '../Icon';\n\nexport type CallStatsButtonProps = {\n  caption?: string;\n};\n\nexport const CallStatsButton = () => (\n  <MenuToggle placement=\"top-end\" ToggleButton={ToggleMenuButton}>\n    <CallStats />\n  </MenuToggle>\n);\n\nconst ToggleMenuButton = forwardRef<\n  HTMLDivElement,\n  ToggleMenuButtonProps<HTMLDivElement> & CallStatsButtonProps\n>(function ToggleMenuButton(props, ref) {\n  const { t } = useI18n();\n  const { caption, menuShown } = props;\n\n  return (\n    <CompositeButton\n      ref={ref}\n      active={menuShown}\n      caption={caption}\n      title={caption || t('Statistics')}\n      data-testid=\"stats-button\"\n    >\n      <Icon icon=\"stats\" />\n    </CompositeButton>\n  );\n});\n", "import { CompositeButton, IconButtonWithMenuProps } from '../Button';\nimport { useI18n } from '@stream-io/video-react-bindings';\nimport { Icon } from '../Icon';\nimport { DeviceSelectorAudioOutput } from '../DeviceSettings';\nimport { WithTooltip } from '../Tooltip';\nimport { useState } from 'react';\n\nexport type ToggleAudioOutputButtonProps = Pick<\n  IconButtonWithMenuProps,\n  'caption' | 'Menu' | 'menuPlacement' | 'onMenuToggle'\n>;\n\nexport const ToggleAudioOutputButton = (\n  props: ToggleAudioOutputButtonProps,\n) => {\n  const { t } = useI18n();\n  const {\n    caption,\n    Menu = DeviceSelectorAudioOutput,\n    menuPlacement = 'top',\n    onMenuToggle,\n  } = props;\n  const [tooltipDisabled, setTooltipDisabled] = useState(false);\n\n  return (\n    <WithTooltip\n      title={caption || t('Speakers')}\n      tooltipDisabled={tooltipDisabled}\n    >\n      <CompositeButton\n        Menu={Menu}\n        menuPlacement={menuPlacement}\n        caption={caption}\n        data-testid=\"audio-output-button\"\n        onMenuToggle={(shown) => {\n          setTooltipDisabled(shown);\n          onMenuToggle?.(shown);\n        }}\n      >\n        <Icon icon=\"speaker\" />\n      </CompositeButton>\n    </WithTooltip>\n  );\n};\n", "import { Restricted, useCall } from '@stream-io/video-react-bindings';\nimport { OwnCapability } from '@stream-io/video-client';\n\nimport { TextButton } from '../Button';\n\nexport const BlockedUserListing = ({ data }: { data: string[] }) => {\n  if (!data.length) return null;\n\n  return (\n    <>\n      <div className=\"str-video__participant-listing\">\n        {data.map((userId) => (\n          <BlockedUserListingItem key={userId} userId={userId} />\n        ))}\n      </div>\n    </>\n  );\n};\n\nconst BlockedUserListingItem = ({ userId }: { userId: string }) => {\n  const call = useCall();\n\n  const unblockUserClickHandler = () => {\n    if (userId) call?.unblockUser(userId);\n  };\n\n  return (\n    <div className=\"str-video__participant-listing-item\">\n      <div className=\"str-video__participant-listing-item__display-name\">\n        {userId}\n      </div>\n      <Restricted requiredGrants={[OwnCapability.BLOCK_USERS]}>\n        <TextButton onClick={unblockUserClickHandler}>Unblock</TextButton>\n      </Restricted>\n    </div>\n  );\n};\n", "import { useCallStateHooks, useI18n } from '@stream-io/video-react-bindings';\n\nimport { IconButton } from '../Button';\n\nexport type CallParticipantListHeaderProps = {\n  /**\n   * Click event listener function to be invoked to dismiss / hide the CallParticipantsList from the UI.\n   */\n  onClose: () => void;\n};\n\nexport const CallParticipantListHeader = ({\n  onClose,\n}: CallParticipantListHeaderProps) => {\n  const { useParticipants, useAnonymousParticipantCount } = useCallStateHooks();\n  const participants = useParticipants();\n  const anonymousParticipantCount = useAnonymousParticipantCount();\n  const { t } = useI18n();\n\n  return (\n    <div className=\"str-video__participant-list-header\">\n      <div className=\"str-video__participant-list-header__title\">\n        {t('Participants')}{' '}\n        <span className=\"str-video__participant-list-header__title-count\">\n          [{participants.length}]\n        </span>\n        {anonymousParticipantCount > 0 && (\n          <span className=\"str-video__participant-list-header__title-anonymous\">\n            {t('Anonymous', { count: anonymousParticipantCount })}\n          </span>\n        )}\n      </div>\n      <IconButton\n        onClick={onClose}\n        className=\"str-video__participant-list-header__close-button\"\n        icon=\"close\"\n      />\n    </div>\n  );\n};\n", "import clsx from 'clsx';\nimport { ComponentProps, ComponentType, forwardRef } from 'react';\nimport { useConnectedUser, useI18n } from '@stream-io/video-react-bindings';\nimport {\n  hasAudio,\n  hasVideo,\n  isPinned,\n  StreamVideoParticipant,\n} from '@stream-io/video-client';\nimport { IconButton } from '../Button';\nimport { MenuToggle, ToggleMenuButtonProps } from '../Menu';\nimport { WithTooltip } from '../Tooltip';\nimport { Avatar } from '../Avatar';\nimport { ParticipantActionsContextMenu } from '../../core/components/ParticipantView/ParticipantActionsContextMenu';\nimport { ParticipantViewContext } from '../../core/components/ParticipantView/ParticipantViewContext';\n\ntype CallParticipantListingItemProps = {\n  /** Participant object be rendered */\n  participant: StreamVideoParticipant;\n  /** Custom component used to display participant's name */\n  DisplayName?: ComponentType<{ participant: StreamVideoParticipant }>;\n};\nexport const CallParticipantListingItem = ({\n  participant,\n  DisplayName = DefaultDisplayName,\n}: CallParticipantListingItemProps) => {\n  const isAudioOn = hasAudio(participant);\n  const isVideoOn = hasVideo(participant);\n  const isPinnedOn = isPinned(participant);\n\n  const { t } = useI18n();\n\n  return (\n    <div className=\"str-video__participant-listing-item\">\n      <Avatar name={participant.name} imageSrc={participant.image} />\n      <DisplayName participant={participant} />\n      <div className=\"str-video__participant-listing-item__media-indicator-group\">\n        <MediaIndicator\n          title={isAudioOn ? t('Microphone on') : t('Microphone off')}\n          className={clsx(\n            'str-video__participant-listing-item__icon',\n            `str-video__participant-listing-item__icon-${\n              isAudioOn ? 'mic' : 'mic-off'\n            }`,\n          )}\n        />\n        <MediaIndicator\n          title={isVideoOn ? t('Camera on') : t('Camera off')}\n          className={clsx(\n            'str-video__participant-listing-item__icon',\n            `str-video__participant-listing-item__icon-${\n              isVideoOn ? 'camera' : 'camera-off'\n            }`,\n          )}\n        />\n        {isPinnedOn && (\n          <MediaIndicator\n            title={t('Pinned')}\n            className={clsx(\n              'str-video__participant-listing-item__icon',\n              'str-video__participant-listing-item__icon-pinned',\n            )}\n          />\n        )}\n\n        <MenuToggle placement=\"bottom-end\" ToggleButton={ToggleButton}>\n          <ParticipantViewContext.Provider\n            value={{ participant, trackType: 'none' }}\n          >\n            <ParticipantActionsContextMenu />\n          </ParticipantViewContext.Provider>\n        </MenuToggle>\n      </div>\n    </div>\n  );\n};\n\nconst MediaIndicator = (props: ComponentProps<'div'>) => (\n  <WithTooltip {...props} />\n);\n\ntype DisplayNameProps = {\n  /** Participant object that provides the data from which display name can be generated */\n  participant: StreamVideoParticipant;\n};\n\nconst DefaultDisplayName = ({ participant }: DisplayNameProps) => {\n  const connectedUser = useConnectedUser();\n  const { t } = useI18n();\n\n  const meFlag = participant.userId === connectedUser?.id ? t('Me') : '';\n  const nameOrId = participant.name || participant.userId || t('Unknown');\n  let displayName;\n  if (!participant.name) {\n    displayName = meFlag || nameOrId || t('Unknown');\n  } else if (meFlag) {\n    displayName = `${nameOrId} (${meFlag})`;\n  } else {\n    displayName = nameOrId;\n  }\n\n  return (\n    <WithTooltip\n      className=\"str-video__participant-listing-item__display-name\"\n      title={displayName}\n    >\n      {displayName}\n    </WithTooltip>\n  );\n};\n\nconst ToggleButton = forwardRef<HTMLButtonElement, ToggleMenuButtonProps>(\n  function ToggleButton(props, ref) {\n    return <IconButton enabled={props.menuShown} icon=\"ellipsis\" ref={ref} />;\n  },\n);\n", "import { ComponentType } from 'react';\nimport { StreamVideoParticipant } from '@stream-io/video-client';\nimport { CallParticipantListingItem } from './CallParticipantListingItem';\n\nexport type CallParticipantListingProps = {\n  /** Array of participant objects to be rendered */\n  data: StreamVideoParticipant[];\n  Header?: ComponentType;\n};\n\nexport const CallParticipantListing = ({\n  data,\n}: CallParticipantListingProps) => (\n  <div className=\"str-video__participant-listing\">\n    {data.map((participant) => (\n      <CallParticipantListingItem\n        key={participant.sessionId}\n        participant={participant}\n      />\n    ))}\n  </div>\n);\n", "import { useI18n } from '@stream-io/video-react-bindings';\n\nexport const EmptyParticipantSearchList = () => {\n  const { t } = useI18n();\n  return (\n    <div className=\"str-video__participant-list--empty\">\n      {t('No participants found')}\n    </div>\n  );\n};\n", "import { ComponentProps, useEffect, useState } from 'react';\nimport clsx from 'clsx';\n\ntype SearchInputProps = ComponentProps<'input'> & {\n  /**\n   * Resets the search to its initial state.\n   * The function is called when Esc key or inputs clear button are pressed\n   */\n  exitSearch: () => void;\n  /**\n   * Flag to signal, whether search input elements should be rendered as active\n   */\n  isActive: boolean;\n};\nexport const SearchInput = ({\n  exitSearch,\n  isActive,\n  ...rest\n}: SearchInputProps) => {\n  const [inputElement, setInputElement] = useState<HTMLInputElement | null>(\n    null,\n  );\n  useEffect(() => {\n    if (!inputElement) return;\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key.toLowerCase() === 'escape') exitSearch();\n    };\n\n    inputElement.addEventListener('keydown', handleKeyDown);\n\n    return () => {\n      inputElement.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [exitSearch, inputElement]);\n\n  return (\n    <div\n      className={clsx('str-video__search-input__container', {\n        'str-video__search-input__container--active': isActive,\n      })}\n    >\n      <input placeholder=\"Search\" {...rest} ref={setInputElement} />\n      {isActive ? (\n        <button\n          className=\"str-video__search-input__clear-btn\"\n          onClick={exitSearch}\n        >\n          <span className=\"str-video__search-input__icon--active\" />\n        </button>\n      ) : (\n        <span className=\"str-video__search-input__icon\" />\n      )}\n    </div>\n  );\n};\n", "import { ComponentType } from 'react';\nimport { LoadingIndicator as DefaultLoadingIndicator } from '../LoadingIndicator';\nimport { SearchController } from './hooks';\n\nexport type SearchResultListProps<T> = {\n  data: T[];\n};\n\nexport type SearchResultsProps<T> = Pick<\n  SearchController<T>,\n  'searchResults' | 'searchQueryInProgress'\n> & {\n  /** Component to be displayed, when empty array of search results is provided */\n  EmptySearchResultComponent: ComponentType;\n  /** Component will be used to render non-empty array of search results  */\n  SearchResultList: ComponentType<SearchResultListProps<T>>;\n  /** Component to be displayed while the search query request is in progress */\n  LoadingIndicator?: ComponentType;\n};\n\nexport function SearchResults<T>({\n  EmptySearchResultComponent,\n  LoadingIndicator = DefaultLoadingIndicator,\n  searchQueryInProgress,\n  searchResults,\n  SearchResultList,\n}: SearchResultsProps<T>) {\n  if (searchQueryInProgress) {\n    return (\n      <div className=\"str-video__search-results--loading\">\n        <LoadingIndicator />\n      </div>\n    );\n  }\n  if (!searchResults.length) {\n    return <EmptySearchResultComponent />;\n  }\n\n  return <SearchResultList data={searchResults} />;\n}\n", "import { useEffect, useRef, useState } from 'react';\n\nexport type SearchController<T> = {\n  /** Flag signals that the search request is flight await the response */\n  searchQueryInProgress: boolean;\n  /** Array of items returned by the search query */\n  searchResults: T[];\n};\n\nexport type UseSearchParams<T> = {\n  /** Search function performing the search request */\n  searchFn: (searchQuery: string) => Promise<T[]>;\n  /** Debounce interval applied to the search function */\n  debounceInterval?: number;\n  /** Search query string */\n  searchQuery?: string;\n};\n\nexport const useSearch = <T>({\n  debounceInterval = 200,\n  searchFn,\n  searchQuery = '',\n}: UseSearchParams<T>): SearchController<T> => {\n  const [searchResults, setSearchResults] = useState<T[]>([]);\n  const [searchQueryInProgress, setSearchQueryInProgress] = useState(false);\n\n  const searchFnRef = useRef(searchFn);\n  searchFnRef.current = searchFn;\n\n  useEffect(() => {\n    if (!searchQuery.length) {\n      setSearchQueryInProgress(false);\n      setSearchResults([]);\n      return;\n    }\n\n    setSearchQueryInProgress(true);\n\n    const timeout = setTimeout(async () => {\n      try {\n        const results = await searchFnRef.current(searchQuery);\n        setSearchResults(results);\n      } catch (error) {\n        console.error(error);\n      } finally {\n        setSearchQueryInProgress(false);\n      }\n    }, debounceInterval);\n\n    return () => {\n      clearTimeout(timeout);\n    };\n  }, [debounceInterval, searchQuery]);\n\n  return {\n    searchQueryInProgress,\n    searchResults,\n  };\n};\n", "import {\n  Dispatch,\n  forwardRef,\n  SetStateAction,\n  useCallback,\n  useState,\n} from 'react';\nimport {\n  Restricted,\n  useCall,\n  useCallStateHooks,\n  useI18n,\n} from '@stream-io/video-react-bindings';\nimport {\n  name,\n  OwnCapability,\n  StreamVideoParticipant,\n} from '@stream-io/video-client';\n\nimport { BlockedUserListing } from './BlockedUserListing';\nimport { IconButton, TextButton } from '../Button';\nimport { CallParticipantListHeader } from './CallParticipantListHeader';\nimport { CallParticipantListing } from './CallParticipantListing';\nimport { EmptyParticipantSearchList } from './EmptyParticipantSearchList';\nimport { LoadingIndicator } from '../LoadingIndicator';\nimport { SearchInput, SearchResults } from '../Search';\nimport { useSearch, UseSearchParams } from '../Search/hooks';\nimport {\n  GenericMenu,\n  GenericMenuButtonItem,\n  MenuToggle,\n  ToggleMenuButtonProps,\n} from '../Menu';\n\ntype CallParticipantListProps = {\n  /** Click event listener function to be invoked in order to dismiss/hide the CallParticipantsList from the UI */\n  onClose: () => void;\n  /** Custom function to override the searching logic of active participants */\n  activeUsersSearchFn?: UseSearchParams<StreamVideoParticipant>['searchFn'];\n  /** Custom function to override the searching logic of blocked users */\n  blockedUsersSearchFn?: UseSearchParams<string>['searchFn'];\n  /** Interval in ms, during which the participant search calls will be debounced. The default value is 200ms. */\n  debounceSearchInterval?: number;\n};\n\nconst UserListTypes = {\n  active: 'Active users',\n  blocked: 'Blocked users',\n} as const;\n\nexport const CallParticipantsList = ({\n  onClose,\n  activeUsersSearchFn,\n  blockedUsersSearchFn,\n  debounceSearchInterval,\n}: CallParticipantListProps) => {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [userListType, setUserListType] =\n    useState<keyof typeof UserListTypes>('active');\n\n  const exitSearch = useCallback(() => setSearchQuery(''), []);\n\n  return (\n    <div className=\"str-video__participant-list\">\n      <CallParticipantListHeader onClose={onClose} />\n      <SearchInput\n        value={searchQuery}\n        onChange={({ currentTarget }) => setSearchQuery(currentTarget.value)}\n        exitSearch={exitSearch}\n        isActive={!!searchQuery}\n      />\n      <CallParticipantListContentHeader\n        userListType={userListType}\n        setUserListType={setUserListType}\n      />\n      <div className=\"str-video__participant-list__content\">\n        {userListType === 'active' && (\n          <ActiveUsersSearchResults\n            searchQuery={searchQuery}\n            activeUsersSearchFn={activeUsersSearchFn}\n            debounceSearchInterval={debounceSearchInterval}\n          />\n        )}\n        {userListType === 'blocked' && (\n          <BlockedUsersSearchResults\n            searchQuery={searchQuery}\n            blockedUsersSearchFn={blockedUsersSearchFn}\n            debounceSearchInterval={debounceSearchInterval}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nconst CallParticipantListContentHeader = ({\n  userListType,\n  setUserListType,\n}: {\n  userListType: keyof typeof UserListTypes;\n  setUserListType: Dispatch<SetStateAction<keyof typeof UserListTypes>>;\n}) => {\n  const call = useCall();\n  const { t } = useI18n();\n\n  const muteAll = useCallback(() => {\n    call?.muteAllUsers('audio');\n  }, [call]);\n\n  return (\n    <div className=\"str-video__participant-list__content-header\">\n      <div className=\"str-video__participant-list__content-header-title\">\n        {userListType === 'active' && (\n          <Restricted\n            requiredGrants={[OwnCapability.MUTE_USERS]}\n            hasPermissionsOnly\n          >\n            <TextButton onClick={muteAll}>{t('Mute all')}</TextButton>\n          </Restricted>\n        )}\n      </div>\n      <MenuToggle placement=\"bottom-end\" ToggleButton={ToggleButton}>\n        <GenericMenu>\n          {(\n            Object.keys(UserListTypes) as Array<keyof typeof UserListTypes>\n          ).map((lt) => (\n            <GenericMenuButtonItem\n              key={lt}\n              aria-selected={lt === userListType}\n              onClick={() => setUserListType(lt)}\n            >\n              {UserListTypes[lt]}\n            </GenericMenuButtonItem>\n          ))}\n        </GenericMenu>\n      </MenuToggle>\n    </div>\n  );\n};\n\nconst ActiveUsersSearchResults = ({\n  searchQuery,\n  activeUsersSearchFn: activeUsersSearchFnFromProps,\n  debounceSearchInterval,\n}: Pick<\n  CallParticipantListProps,\n  'activeUsersSearchFn' | 'debounceSearchInterval'\n> & { searchQuery: string }) => {\n  const { useParticipants } = useCallStateHooks();\n  const participants = useParticipants({ sortBy: name });\n\n  const activeUsersSearchFn = useCallback(\n    async (queryString: string) => {\n      const queryRegExp = new RegExp(queryString, 'i');\n      return participants.filter((p) => p.name.match(queryRegExp));\n    },\n    [participants],\n  );\n\n  const { searchQueryInProgress, searchResults } = useSearch({\n    searchFn: activeUsersSearchFnFromProps ?? activeUsersSearchFn,\n    debounceInterval: debounceSearchInterval,\n    searchQuery,\n  });\n\n  return (\n    <SearchResults<StreamVideoParticipant>\n      EmptySearchResultComponent={EmptyParticipantSearchList}\n      LoadingIndicator={LoadingIndicator}\n      searchQueryInProgress={searchQueryInProgress}\n      searchResults={searchQuery ? searchResults : participants}\n      SearchResultList={CallParticipantListing}\n    />\n  );\n};\n\nconst BlockedUsersSearchResults = ({\n  blockedUsersSearchFn: blockedUsersSearchFnFromProps,\n  debounceSearchInterval,\n  searchQuery,\n}: Pick<\n  CallParticipantListProps,\n  'blockedUsersSearchFn' | 'debounceSearchInterval'\n> & { searchQuery: string }) => {\n  const { useCallBlockedUserIds } = useCallStateHooks();\n  const blockedUsers = useCallBlockedUserIds();\n\n  const blockedUsersSearchFn = useCallback(\n    async (queryString: string) => {\n      const queryRegExp = new RegExp(queryString, 'i');\n      return blockedUsers.filter((userId) => userId.match(queryRegExp));\n    },\n    [blockedUsers],\n  );\n\n  const { searchQueryInProgress, searchResults } = useSearch({\n    searchFn: blockedUsersSearchFnFromProps ?? blockedUsersSearchFn,\n    debounceInterval: debounceSearchInterval,\n    searchQuery,\n  });\n\n  return (\n    <SearchResults<string>\n      EmptySearchResultComponent={EmptyParticipantSearchList}\n      LoadingIndicator={LoadingIndicator}\n      searchQueryInProgress={searchQueryInProgress}\n      searchResults={searchQuery ? searchResults : blockedUsers}\n      SearchResultList={BlockedUserListing}\n    />\n  );\n};\n\nconst ToggleButton = forwardRef<HTMLButtonElement, ToggleMenuButtonProps>(\n  function ToggleButton(props, ref) {\n    return <IconButton enabled={props.menuShown} icon=\"filter\" ref={ref} />;\n  },\n);\n", "import clsx from 'clsx';\nimport { CSSProperties, useEffect, useState } from 'react';\nimport { useCall, useCallStateHooks } from '@stream-io/video-react-bindings';\n\nexport type CallPreviewProps = {\n  /**\n   * Additional CSS class name to apply to the CallPreview element.\n   */\n  className?: string;\n\n  /**\n   * Additional CSS properties to apply to the CallPreview element.\n   */\n  style?: CSSProperties;\n};\n\nexport const CallPreview = (props: CallPreviewProps) => {\n  const { className, style } = props;\n  const call = useCall();\n  const { useCallThumbnail } = useCallStateHooks();\n  const thumbnail = useCallThumbnail();\n\n  const [imageRef, setImageRef] = useState<HTMLImageElement | null>(null);\n  useEffect(() => {\n    if (!imageRef || !call) return;\n    const cleanup = call.bindCallThumbnailElement(imageRef);\n    return () => cleanup();\n  }, [imageRef, call]);\n\n  if (!thumbnail) return null;\n\n  return (\n    <img\n      className={clsx('str-video__call-preview', className)}\n      style={style}\n      alt=\"Call Preview Thumbnail\"\n      ref={setImageRef}\n    />\n  );\n};\n", "import { CallRecording } from '@stream-io/video-client';\nimport { useI18n } from '@stream-io/video-react-bindings';\nimport { IconButton } from '../Button';\n\nexport type CallRecordingListHeaderProps = {\n  /** Array of CallRecording objects */\n  callRecordings: CallRecording[];\n  /** Callback to be invoked when the refresh button is clicked */\n  onRefresh?: () => void;\n};\n\nexport const CallRecordingListHeader = ({\n  callRecordings,\n  onRefresh,\n}: CallRecordingListHeaderProps) => {\n  const { t } = useI18n();\n  return (\n    <div className=\"str-video__call-recording-list__header\">\n      <div className=\"str-video__call-recording-list__title\">\n        <span>{t('Call Recordings')}</span>\n        {callRecordings.length ? <span>({callRecordings.length})</span> : null}\n      </div>\n      {onRefresh && (\n        <IconButton icon=\"refresh\" title={t('Refresh')} onClick={onRefresh} />\n      )}\n    </div>\n  );\n};\n", "import clsx from 'clsx';\nimport { CallRecording } from '@stream-io/video-client';\nimport { Icon } from '../Icon';\n\nexport type CallRecordingListItemProps = {\n  /** CallRecording object to represent */\n  recording: CallRecording;\n};\n\nconst dateFormat = (date: string) => {\n  const format = new Date(date);\n  return format.toTimeString().split(' ')[0];\n};\nexport const CallRecordingListItem = ({\n  recording,\n}: CallRecordingListItemProps) => {\n  return (\n    <li className=\"str-video__call-recording-list__item\">\n      <div className=\"str-video__call-recording-list__table-cell str-video__call-recording-list__filename\">\n        {recording.filename}\n      </div>\n      <div className=\"str-video__call-recording-list__table-cell str-video__call-recording-list__time\">\n        {dateFormat(recording.start_time)}\n      </div>\n      <div className=\"str-video__call-recording-list__table-cell str-video__call-recording-list__time\">\n        {dateFormat(recording.end_time)}\n      </div>\n      <div className=\"str-video__call-recording-list__table-cell str-video__call-recording-list__download\">\n        <a\n          className={clsx(\n            'str-video__call-recording-list-item__action-button',\n            'str-video__call-recording-list-item__action-button--download',\n          )}\n          role=\"button\"\n          href={recording.url}\n          download={recording.filename}\n          title=\"Download the recording\"\n        >\n          <Icon icon=\"download\" />\n        </a>\n      </div>\n    </li>\n  );\n};\n", "export const EmptyCallRecordingListing = () => {\n  return (\n    <div className=\"str-video__call-recording-list__listing str-video__call-recording-list__listing--empty\">\n      <div className=\"str-video__call-recording-list__listing--icon-empty\" />\n      <p className=\"str-video__call-recording-list__listing--text-empty\">\n        {/* todo: introduce i18n to enable text customization */}\n        No recordings available\n      </p>\n    </div>\n  );\n};\n", "import { CallRecording } from '@stream-io/video-client';\nimport { CallRecordingListItem } from './CallRecordingListItem';\nimport { LoadingIndicator } from '../LoadingIndicator';\n\nexport type LoadingCallRecordingListProps = {\n  /** Array of CallRecording objects */\n  callRecordings: CallRecording[];\n};\n\nexport const LoadingCallRecordingListing = ({\n  callRecordings,\n}: LoadingCallRecordingListProps) => {\n  return (\n    <>\n      {callRecordings.map((recording) => (\n        <CallRecordingListItem recording={recording} key={recording.filename} />\n      ))}\n      <LoadingIndicator text=\"Recording getting ready\" />\n    </>\n  );\n};\n", "import { ComponentType } from 'react';\nimport { CallRecording } from '@stream-io/video-client';\n\nimport {\n  CallRecordingListHeader as DefaultCallRecordingListHeader,\n  CallRecordingListHeaderProps,\n} from './CallRecordingListHeader';\nimport {\n  CallRecordingListItem as DefaultCallRecordingListItem,\n  CallRecordingListItemProps,\n} from './CallRecordingListItem';\nimport { EmptyCallRecordingListing as DefaultEmptyCallRecordingList } from './EmptyCallRecordingListing';\nimport {\n  LoadingCallRecordingListing as DefaultLoadingCallRecordingList,\n  LoadingCallRecordingListProps,\n} from './LoadingCallRecordingListing';\n\nexport type CallRecordingListProps = {\n  /** Array of CallRecording objects to be displayed */\n  callRecordings: CallRecording[];\n  /** Custom component to replace the default header implementation */\n  CallRecordingListHeader?: ComponentType<CallRecordingListHeaderProps>;\n  /** Custom component to replace the default list item implementation */\n  CallRecordingListItem?: ComponentType<CallRecordingListItemProps>;\n  /** Custom component to replace the default empty list component implementation */\n  EmptyCallRecordingList?: ComponentType;\n  /** Signals that a request for new list of CallRecording object has been initiated */\n  loading?: boolean;\n  /** Custom component to be rendered when loading is true */\n  LoadingCallRecordingList?: ComponentType<LoadingCallRecordingListProps>;\n  /** Callback to be invoked when the refresh button is clicked */\n  onRefresh?: () => void;\n};\n\nexport const CallRecordingList = ({\n  callRecordings,\n  CallRecordingListHeader = DefaultCallRecordingListHeader,\n  CallRecordingListItem = DefaultCallRecordingListItem,\n  EmptyCallRecordingList = DefaultEmptyCallRecordingList,\n  loading,\n  LoadingCallRecordingList = DefaultLoadingCallRecordingList,\n  onRefresh,\n}: CallRecordingListProps) => {\n  return (\n    <div className=\"str-video__call-recording-list\">\n      <CallRecordingListHeader\n        callRecordings={callRecordings}\n        onRefresh={onRefresh}\n      />\n      <div className=\"str-video__call-recording-list__listing\">\n        {loading ? (\n          <LoadingCallRecordingList callRecordings={callRecordings} />\n        ) : callRecordings.length ? (\n          <>\n            <ul className=\"str-video__call-recording-list__list\">\n              <li className=\"str-video__call-recording-list__item\">\n                <div className=\"str-video__call-recording-list__filename\">\n                  Name\n                </div>\n                <div className=\"str-video__call-recording-list__time\">\n                  Start time\n                </div>\n                <div className=\"str-video__call-recording-list__time\">\n                  End time\n                </div>\n                <div className=\"str-video__call-recording-list__download\"></div>\n              </li>\n            </ul>\n            <ul className=\"str-video__call-recording-list__list\">\n              {callRecordings.map((recording) => (\n                <CallRecordingListItem\n                  recording={recording}\n                  key={recording.filename}\n                />\n              ))}\n            </ul>\n          </>\n        ) : (\n          <EmptyCallRecordingList />\n        )}\n      </div>\n    </div>\n  );\n};\n", "import {\n  createContext,\n  PropsWithChildren,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport {\n  NoiseCancellationSettingsModeEnum,\n  OwnCapability,\n} from '@stream-io/video-client';\nimport { useCall, useCallStateHooks } from '@stream-io/video-react-bindings';\nimport type { INoiseCancellation } from '@stream-io/audio-filters-web';\n\nexport type NoiseCancellationProviderProps = {\n  /**\n   * The noise cancellation instance to use.\n   */\n  noiseCancellation: INoiseCancellation;\n};\n\n/**\n * The Noise Cancellation API.\n */\nexport type NoiseCancellationAPI = {\n  /**\n   * A boolean providing information whether Noise Cancelling functionalities\n   * are supported on this platform and for the current user.\n   */\n  isSupported: boolean | undefined;\n  /**\n   * Provides information whether Noise Cancellation is active or not.\n   */\n  isEnabled: boolean;\n  /**\n   * Allows you to temporarily enable or disable the Noise Cancellation filters.\n   *\n   * @param enabled a boolean or a setter.\n   */\n  setEnabled: (enabled: boolean | ((value: boolean) => boolean)) => void;\n\n  /**\n   * Sets the noise suppression level (0-100).\n   *\n   * @param level 0 for no suppression, 100 for maximum suppression.\n   */\n  setSuppressionLevel: (level: number) => void;\n};\n\nconst NoiseCancellationContext = createContext<NoiseCancellationAPI | null>(\n  null,\n);\n\n/**\n * Exposes the NoiseCancellation API.\n * Throws an error if used outside <NoiseCancellationProvider />.\n */\nexport const useNoiseCancellation = (): NoiseCancellationAPI => {\n  const context = useContext(NoiseCancellationContext);\n  if (!context) {\n    throw new Error(\n      'useNoiseCancellation must be used within a NoiseCancellationProvider',\n    );\n  }\n  return context;\n};\n\nexport const NoiseCancellationProvider = (\n  props: PropsWithChildren<NoiseCancellationProviderProps>,\n) => {\n  const { children, noiseCancellation } = props;\n  const call = useCall();\n  const { useCallSettings, useHasPermissions } = useCallStateHooks();\n  const settings = useCallSettings();\n  const noiseCancellationAllowed = !!(\n    settings &&\n    settings.audio.noise_cancellation &&\n    settings.audio.noise_cancellation.mode !==\n      NoiseCancellationSettingsModeEnum.DISABLED\n  );\n\n  const hasCapability = useHasPermissions(\n    OwnCapability.ENABLE_NOISE_CANCELLATION,\n  );\n  const [isSupportedByBrowser, setIsSupportedByBrowser] = useState<boolean>();\n  useEffect(() => {\n    const result = noiseCancellation.isSupported();\n    if (typeof result === 'boolean') {\n      setIsSupportedByBrowser(result);\n    } else {\n      result\n        .then((s) => setIsSupportedByBrowser(s))\n        .catch((err) =>\n          console.error(\n            `Can't determine if noise cancellation is supported`,\n            err,\n          ),\n        );\n    }\n  }, [noiseCancellation]);\n\n  const isSupported =\n    isSupportedByBrowser && hasCapability && noiseCancellationAllowed;\n\n  const [isEnabled, setIsEnabled] = useState(false);\n  const deinit = useRef<Promise<void>>(undefined);\n  useEffect(() => {\n    if (!call || !isSupported) return;\n    noiseCancellation.isEnabled().then((e) => setIsEnabled(e));\n    const unsubscribe = noiseCancellation.on('change', (v) => setIsEnabled(v));\n    const init = (deinit.current || Promise.resolve())\n      .then(() => noiseCancellation.init({ tracer: call.tracer }))\n      .then(() => call.microphone.enableNoiseCancellation(noiseCancellation))\n      .catch((e) => console.error(`Can't initialize noise cancellation`, e));\n\n    return () => {\n      deinit.current = init\n        .then(() => call.microphone.disableNoiseCancellation())\n        .then(() => noiseCancellation.dispose())\n        .then(() => unsubscribe());\n    };\n  }, [call, isSupported, noiseCancellation]);\n\n  const contextValue = useMemo<NoiseCancellationAPI>(\n    () => ({\n      isSupported,\n      isEnabled,\n      setSuppressionLevel: (level) => {\n        if (!noiseCancellation) return;\n        noiseCancellation.setSuppressionLevel(level);\n      },\n      setEnabled: (enabledOrSetter) => {\n        if (!noiseCancellation) return;\n        const enable =\n          typeof enabledOrSetter === 'function'\n            ? enabledOrSetter(isEnabled)\n            : enabledOrSetter;\n        if (enable) {\n          noiseCancellation.enable().catch((err) => {\n            console.error('Failed to enable noise cancellation', err);\n          });\n        } else {\n          noiseCancellation.disable().catch((err) => {\n            console.error('Failed to disable noise cancellation', err);\n          });\n        }\n      },\n    }),\n    [isEnabled, isSupported, noiseCancellation],\n  );\n  return (\n    <NoiseCancellationContext.Provider value={contextValue}>\n      {children}\n    </NoiseCancellationContext.Provider>\n  );\n};\n", "import { CallingState } from '@stream-io/video-client';\nimport { AcceptCallButton, CancelCallButton } from '../CallControls';\nimport { useCall, useCallStateHooks } from '@stream-io/video-react-bindings';\n\nexport const RingingCallControls = () => {\n  const call = useCall();\n  const { useCallCallingState } = useCallStateHooks();\n  const callCallingState = useCallCallingState();\n\n  if (!call) return null;\n\n  const buttonsDisabled = callCallingState !== CallingState.RINGING;\n  return (\n    <div className=\"str-video__pending-call-controls\">\n      {call.isCreatedByMe ? (\n        <CancelCallButton disabled={buttonsDisabled} />\n      ) : (\n        <>\n          <AcceptCallButton disabled={buttonsDisabled} />\n          <CancelCallButton\n            onClick={() => {\n              const reason = call.isCreatedByMe ? 'cancel' : 'decline';\n              call.leave({ reject: true, reason });\n            }}\n            disabled={buttonsDisabled}\n          />\n        </>\n      )}\n    </div>\n  );\n};\n", "import { CallingState, UserResponse } from '@stream-io/video-client';\nimport {\n  useCall,\n  useCallStateHooks,\n  useConnectedUser,\n  useI18n,\n} from '@stream-io/video-react-bindings';\nimport { Avatar } from '../Avatar';\nimport { RingingCallControls } from './RingingCallControls';\n\nconst CALLING_STATE_TO_LABEL: Record<CallingState, string> = {\n  [CallingState.JOINING]: 'Joining',\n  [CallingState.RINGING]: 'Ringing',\n  [CallingState.MIGRATING]: 'Migrating',\n  [CallingState.RECONNECTING]: 'Re-connecting',\n  [CallingState.RECONNECTING_FAILED]: 'Failed',\n  [CallingState.OFFLINE]: 'No internet connection',\n  [CallingState.IDLE]: '',\n  [CallingState.UNKNOWN]: '',\n  [CallingState.JOINED]: 'Joined',\n  [CallingState.LEFT]: 'Left call',\n};\n\nexport type RingingCallProps = {\n  /**\n   * Whether to include the current user in the list of members to show.\n   * @default false.\n   */\n  includeSelf?: boolean;\n\n  /**\n   * The maximum number of members to show.\n   * @default 3.\n   */\n  totalMembersToShow?: number;\n};\n\nexport const RingingCall = (props: RingingCallProps) => {\n  const { includeSelf = false, totalMembersToShow = 3 } = props;\n  const call = useCall();\n  const { t } = useI18n();\n  const { useCallCallingState, useCallMembers } = useCallStateHooks();\n  const callingState = useCallCallingState();\n  const members = useCallMembers();\n  const connectedUser = useConnectedUser();\n\n  if (!call) return null;\n\n  // take the first N members to show their avatars\n  const membersToShow: UserResponse[] = (members || [])\n    .slice(0, totalMembersToShow)\n    .map(({ user }) => user)\n    .filter((user) => user.id !== connectedUser?.id || includeSelf);\n  if (\n    includeSelf &&\n    !membersToShow.find((user) => user.id === connectedUser?.id)\n  ) {\n    // if the current user is not in the initial batch of members,\n    // replace the first item in membersToShow array with the current user\n    const self = members.find(({ user }) => user.id === connectedUser?.id);\n    if (self) {\n      membersToShow.splice(0, 1, self.user);\n    }\n  }\n\n  const callingStateLabel = CALLING_STATE_TO_LABEL[callingState];\n\n  return (\n    <div className=\"str-video__call-panel str-video__call-panel--ringing\">\n      <div className=\"str-video__call-panel__members-list\">\n        {membersToShow.map((user) => (\n          <div key={user.id} className=\"str-video__call-panel__member-box\">\n            <Avatar name={user.name} imageSrc={user.image} />\n            {user.name && (\n              <div className=\"str-video__member_details\">\n                <span className=\"str-video__member_name\">{user.name}</span>\n              </div>\n            )}\n          </div>\n        ))}\n      </div>\n\n      {callingStateLabel && (\n        <div className=\"str-video__call-panel__calling-state-label\">\n          {t(callingStateLabel)}\n        </div>\n      )}\n\n      {[CallingState.RINGING, CallingState.JOINING].includes(callingState) && (\n        <RingingCallControls />\n      )}\n    </div>\n  );\n};\n", "import {\n  ButtonHTMLAttributes,\n  ComponentProps,\n  forwardRef,\n  Fragment,\n  PropsWithChildren,\n  useEffect,\n  useState,\n} from 'react';\nimport {\n  OwnCapability,\n  PermissionRequestEvent,\n  UserResponse,\n} from '@stream-io/video-client';\nimport {\n  TranslatorFunction,\n  useCall,\n  useCallStateHooks,\n  useI18n,\n} from '@stream-io/video-react-bindings';\nimport clsx from 'clsx';\n\nimport { useFloatingUIPreset } from '../../hooks';\n\nconst byNameOrId = (a: UserResponse, b: UserResponse) => {\n  if (a.name && b.name && a.name < b.name) return -1;\n  if (a.name && b.name && a.name > b.name) return 1;\n  if (a.id < b.id) return -1;\n  if (a.id > b.id) return 1;\n  return 0;\n};\n\ntype HandleUpdatePermission = (\n  request: PermissionRequestEvent,\n  type: 'grant' | 'revoke' | 'dismiss',\n) => () => Promise<void>;\n\nexport const PermissionRequests = () => {\n  const call = useCall();\n  const { useLocalParticipant, useHasPermissions } = useCallStateHooks();\n  const localParticipant = useLocalParticipant();\n  const [expanded, setExpanded] = useState(false);\n  const [permissionRequests, setPermissionRequests] = useState<\n    PermissionRequestEvent[]\n  >([]);\n  const canUpdateCallPermissions = useHasPermissions(\n    OwnCapability.UPDATE_CALL_PERMISSIONS,\n  );\n\n  const localUserId = localParticipant?.userId;\n  useEffect(() => {\n    if (!call || !canUpdateCallPermissions) return;\n    return call.on('call.permission_request', (event) => {\n      if (event.user.id !== localUserId) {\n        setPermissionRequests((requests) =>\n          [...requests, event].sort((a, b) => byNameOrId(a.user, b.user)),\n        );\n      }\n    });\n  }, [call, canUpdateCallPermissions, localUserId]);\n\n  const handleUpdatePermission: HandleUpdatePermission = (request, type) => {\n    return async () => {\n      const { user, permissions } = request;\n      switch (type) {\n        case 'grant':\n          await call?.grantPermissions(user.id, permissions);\n          break;\n        case 'revoke':\n          await call?.revokePermissions(user.id, permissions);\n          break;\n        default:\n          break;\n      }\n      setPermissionRequests((requests) =>\n        requests.filter((r) => r !== request),\n      );\n    };\n  };\n\n  const { refs, x, y, strategy } = useFloatingUIPreset({\n    placement: 'bottom',\n    strategy: 'absolute',\n  });\n\n  // don't render anything if there are no permission requests\n  if (permissionRequests.length === 0) return null;\n\n  return (\n    <div className=\"str-video__permission-requests\" ref={refs.setReference}>\n      <div className=\"str-video__permission-requests__notification\">\n        <span className=\"str-video__permission-requests__notification__message\">\n          {permissionRequests.length} pending permission requests\n        </span>\n        <Button\n          type=\"button\"\n          onClick={() => {\n            setExpanded((e) => !e);\n          }}\n        >\n          {expanded ? 'Hide requests' : 'Show requests'}\n        </Button>\n      </div>\n      {expanded && (\n        <PermissionRequestList\n          ref={refs.setFloating}\n          style={{\n            position: strategy,\n            top: y ?? 0,\n            left: x ?? 0,\n            overflowY: 'auto',\n          }}\n          permissionRequests={permissionRequests}\n          handleUpdatePermission={handleUpdatePermission}\n        />\n      )}\n    </div>\n  );\n};\n\nexport type PermissionRequestListProps = ComponentProps<'div'> & {\n  permissionRequests: PermissionRequestEvent[];\n  handleUpdatePermission: HandleUpdatePermission;\n};\n\nexport const PermissionRequestList = forwardRef<\n  HTMLDivElement,\n  PermissionRequestListProps\n>(function PermissionRequestList(props, ref) {\n  const { permissionRequests, handleUpdatePermission, ...rest } = props;\n\n  const { t } = useI18n();\n\n  return (\n    <div className=\"str-video__permission-requests-list\" ref={ref} {...rest}>\n      {permissionRequests.map((request, reqIndex) => {\n        const { user, permissions } = request;\n        return (\n          <Fragment key={`${user.id}/${reqIndex}`}>\n            {permissions.map((permission) => (\n              <div className=\"str-video__permission-request\" key={permission}>\n                <div className=\"str-video__permission-request__message\">\n                  {messageForPermission(user.name || user.id, permission, t)}\n                </div>\n                <Button\n                  className=\"str-video__permission-request__button--allow\"\n                  type=\"button\"\n                  onClick={handleUpdatePermission(request, 'grant')}\n                >\n                  {t('Allow')}\n                </Button>\n                <Button\n                  className=\"str-video__permission-request__button--reject\"\n                  type=\"button\"\n                  onClick={handleUpdatePermission(request, 'revoke')}\n                >\n                  {t('Revoke')}\n                </Button>\n                <Button\n                  className=\"str-video__permission-request__button--reject\"\n                  type=\"button\"\n                  onClick={handleUpdatePermission(request, 'dismiss')}\n                >\n                  {t('Dismiss')}\n                </Button>\n              </div>\n            ))}\n          </Fragment>\n        );\n      })}\n    </div>\n  );\n});\n\nconst Button = (\n  props: PropsWithChildren<ButtonHTMLAttributes<HTMLButtonElement>>,\n) => {\n  const { className, ...rest } = props;\n  return (\n    <button\n      className={clsx('str-video__permission-request__button', className)}\n      {...rest}\n    />\n  );\n};\n\nconst messageForPermission = (\n  userName: string,\n  permission: string,\n  t: TranslatorFunction,\n) => {\n  switch (permission) {\n    case OwnCapability.SEND_AUDIO:\n      return t('{{ userName }} is requesting to speak', { userName });\n    case OwnCapability.SEND_VIDEO:\n      return t('{{ userName }} is requesting to share their camera', {\n        userName,\n      });\n    case OwnCapability.SCREENSHARE:\n      return t('{{ userName }} is requesting to present their screen', {\n        userName,\n      });\n    default:\n      return t('{{ userName }} is requesting permission: {{ permission }}', {\n        userName,\n        permission,\n      });\n  }\n};\n", "import { ElementType, HTMLProps, PropsWithChildren } from 'react';\nimport clsx from 'clsx';\n\nexport type StreamThemeProps = HTMLProps<HTMLElement> & {\n  as?: ElementType;\n};\n\nexport const StreamTheme = ({\n  as: Component = 'div',\n  className,\n  children,\n  ...props\n}: PropsWithChildren<StreamThemeProps>) => {\n  return (\n    <Component {...props} className={clsx('str-video', className)}>\n      {children}\n    </Component>\n  );\n};\n", "import { ComponentType } from 'react';\nimport clsx from 'clsx';\nimport { useCallStateHooks, useI18n } from '@stream-io/video-react-bindings';\nimport { BaseVideo } from '../../core/components/Video';\nimport { LoadingIndicator } from '../LoadingIndicator';\n\nconst DefaultDisabledVideoPreview = () => {\n  const { t } = useI18n();\n  return (\n    <div className=\"str_video__video-preview__disabled-video-preview\">\n      {t('Video is disabled')}\n    </div>\n  );\n};\n\nconst DefaultNoCameraPreview = () => {\n  const { t } = useI18n();\n  return (\n    <div className=\"str_video__video-preview__no-camera-preview\">\n      {t('No camera found')}\n    </div>\n  );\n};\n\nexport type VideoPreviewProps = {\n  /**\n   * Additional CSS class name to apply to the root element.\n   */\n  className?: string;\n  /**\n   * Enforces mirroring of the video on the X axis. Defaults to true.\n   */\n  mirror?: boolean;\n  /**\n   * Component rendered when user turns off the video.\n   */\n  DisabledVideoPreview?: ComponentType;\n  /**\n   * Component rendered when no camera devices are available.\n   */\n  NoCameraPreview?: ComponentType;\n  /**\n   * Component rendered above the BaseVideo until the video is ready (meaning until the play event is emitted).\n   */\n  StartingCameraPreview?: ComponentType;\n};\n\nexport const VideoPreview = ({\n  className,\n  mirror = true,\n  DisabledVideoPreview = DefaultDisabledVideoPreview,\n  NoCameraPreview = DefaultNoCameraPreview,\n  StartingCameraPreview = LoadingIndicator,\n}: VideoPreviewProps) => {\n  const { useCameraState } = useCallStateHooks();\n  const { devices, status, isMute, mediaStream } = useCameraState();\n\n  let contents;\n  if (isMute && devices?.length === 0) {\n    contents = <NoCameraPreview />;\n  } else if (status === 'enabled') {\n    const loading = !mediaStream;\n    contents = (\n      <>\n        {mediaStream && (\n          <BaseVideo\n            stream={mediaStream}\n            className={clsx('str-video__video-preview', {\n              'str-video__video-preview--mirror': mirror,\n              'str-video__video-preview--loading': loading,\n            })}\n          />\n        )}\n        {loading && <StartingCameraPreview />}\n      </>\n    );\n  } else {\n    contents = <DisabledVideoPreview />;\n  }\n\n  return (\n    <div className={clsx('str-video__video-preview-container', className)}>\n      {contents}\n    </div>\n  );\n};\n", "import { ComponentType, forwardRef } from 'react';\nimport { Placement } from '@floating-ui/react';\nimport {\n  hasAudio,\n  hasPausedTrack,\n  hasScreenShare,\n  hasVideo,\n  SfuModels,\n} from '@stream-io/video-client';\nimport { useCall, useI18n } from '@stream-io/video-react-bindings';\nimport clsx from 'clsx';\n\nimport {\n  Icon,\n  IconButton,\n  MenuToggle,\n  Notification,\n  ToggleMenuButtonProps,\n} from '../../../components';\nimport { ParticipantActionsContextMenu as DefaultParticipantActionsContextMenu } from './ParticipantActionsContextMenu';\nimport { Reaction } from '../../../components/Reaction';\nimport { useParticipantViewContext } from './ParticipantViewContext';\n\nexport type DefaultParticipantViewUIProps = {\n  /**\n   * Turns on/off the status indicator icons (mute, connection quality, etc...).\n   */\n  indicatorsVisible?: boolean;\n  /**\n   * Placement of the context menu component when opened\n   */\n  menuPlacement?: Placement;\n  /**\n   * Option to show/hide menu button component\n   */\n  showMenuButton?: boolean;\n  /**\n   * Custom component to render the context menu\n   */\n  ParticipantActionsContextMenu?: ComponentType;\n};\n\nconst ToggleButton = forwardRef<HTMLButtonElement, ToggleMenuButtonProps>(\n  function ToggleButton(props, ref) {\n    return <IconButton enabled={props.menuShown} icon=\"ellipsis\" ref={ref} />;\n  },\n);\n\nexport const DefaultScreenShareOverlay = () => {\n  const call = useCall();\n  const { t } = useI18n();\n\n  const stopScreenShare = () => {\n    call?.screenShare.disable().catch((err) => {\n      console.error('Failed to stop screen sharing:', err);\n    });\n  };\n\n  return (\n    <div className=\"str-video__screen-share-overlay\">\n      <Icon icon=\"screen-share-off\" />\n      <span className=\"str-video__screen-share-overlay__title\">\n        {t('You are presenting your screen')}\n      </span>\n      <button\n        onClick={stopScreenShare}\n        type=\"button\"\n        className=\"str-video__screen-share-overlay__button\"\n      >\n        <Icon icon=\"close\" /> {t('Stop Screen Sharing')}\n      </button>\n    </div>\n  );\n};\n\nexport const DefaultParticipantViewUI = ({\n  indicatorsVisible = true,\n  menuPlacement = 'bottom-start',\n  showMenuButton = true,\n  ParticipantActionsContextMenu = DefaultParticipantActionsContextMenu,\n}: DefaultParticipantViewUIProps) => {\n  const { participant, trackType } = useParticipantViewContext();\n  const isScreenSharing = hasScreenShare(participant);\n\n  if (\n    participant.isLocalParticipant &&\n    isScreenSharing &&\n    trackType === 'screenShareTrack'\n  ) {\n    return (\n      <>\n        <DefaultScreenShareOverlay />\n        <ParticipantDetails indicatorsVisible={indicatorsVisible} />\n      </>\n    );\n  }\n\n  return (\n    <>\n      {showMenuButton && (\n        <MenuToggle\n          strategy=\"fixed\"\n          placement={menuPlacement}\n          ToggleButton={ToggleButton}\n        >\n          <ParticipantActionsContextMenu />\n        </MenuToggle>\n      )}\n      <Reaction participant={participant} />\n      <ParticipantDetails indicatorsVisible={indicatorsVisible} />\n    </>\n  );\n};\n\nexport const ParticipantDetails = ({\n  indicatorsVisible = true,\n}: Pick<DefaultParticipantViewUIProps, 'indicatorsVisible'>) => {\n  const { participant, trackType } = useParticipantViewContext();\n  const {\n    isLocalParticipant,\n    connectionQuality,\n    pin,\n    sessionId,\n    name,\n    userId,\n  } = participant;\n  const call = useCall();\n\n  const { t } = useI18n();\n  const connectionQualityAsString =\n    !!connectionQuality &&\n    SfuModels.ConnectionQuality[connectionQuality].toLowerCase();\n\n  const hasAudioTrack = hasAudio(participant);\n  const hasVideoTrack = hasVideo(participant);\n  const canUnpin = !!pin && pin.isLocalPin;\n  const isTrackPaused =\n    trackType !== 'none' ? hasPausedTrack(participant, trackType) : false;\n\n  return (\n    <>\n      <div className=\"str-video__participant-details\">\n        <span className=\"str-video__participant-details__name\">\n          {name || userId}\n\n          {indicatorsVisible && !hasAudioTrack && (\n            <span className=\"str-video__participant-details__name--audio-muted\" />\n          )}\n          {indicatorsVisible && !hasVideoTrack && (\n            <span className=\"str-video__participant-details__name--video-muted\" />\n          )}\n          {indicatorsVisible && isTrackPaused && (\n            <span\n              title={t('Video paused due to insufficient bandwidth')}\n              className=\"str-video__participant-details__name--track-paused\"\n            />\n          )}\n          {indicatorsVisible && canUnpin && (\n            // TODO: remove this monstrosity once we have a proper design\n            <span\n              title={t('Unpin')}\n              onClick={() => call?.unpin(sessionId)}\n              className=\"str-video__participant-details__name--pinned\"\n            />\n          )}\n          {indicatorsVisible && <SpeechIndicator />}\n        </span>\n      </div>\n      {indicatorsVisible && (\n        <Notification\n          isVisible={\n            isLocalParticipant &&\n            connectionQuality === SfuModels.ConnectionQuality.POOR\n          }\n          message={t('Poor connection quality')}\n        >\n          {connectionQualityAsString && (\n            <span\n              className={clsx(\n                'str-video__participant-details__connection-quality',\n                `str-video__participant-details__connection-quality--${connectionQualityAsString}`,\n              )}\n              title={connectionQualityAsString}\n            />\n          )}\n        </Notification>\n      )}\n    </>\n  );\n};\n\nexport const SpeechIndicator = () => {\n  const { participant } = useParticipantViewContext();\n  const { isSpeaking, isDominantSpeaker } = participant;\n  return (\n    <span\n      className={clsx(\n        'str-video__speech-indicator',\n        isSpeaking && 'str-video__speech-indicator--speaking',\n        isDominantSpeaker && 'str-video__speech-indicator--dominant',\n      )}\n    >\n      <span className=\"str-video__speech-indicator__bar\" />\n      <span className=\"str-video__speech-indicator__bar\" />\n      <span className=\"str-video__speech-indicator__bar\" />\n    </span>\n  );\n};\n", "import {\n  ComponentType,\n  forwardRef,\n  ReactElement,\n  useMemo,\n  useState,\n} from 'react';\nimport clsx from 'clsx';\nimport {\n  hasAudio,\n  hasScreenShareAudio,\n  hasVideo,\n  StreamVideoParticipant,\n  VideoTrackType,\n} from '@stream-io/video-client';\nimport { useCallStateHooks } from '@stream-io/video-react-bindings';\n\nimport { Audio } from '../Audio';\nimport { Video, VideoProps } from '../Video';\nimport { useTrackElementVisibility } from '../../hooks';\nimport { DefaultParticipantViewUI } from './DefaultParticipantViewUI';\nimport { applyElementToRef, isComponentType } from '../../../utilities';\nimport { ParticipantViewContext } from './ParticipantViewContext';\n\nexport type ParticipantViewProps = {\n  /**\n   * The participant whose video/audio stream we want to play.\n   */\n  participant: StreamVideoParticipant;\n\n  /**\n   * Override the default UI for rendering participant information/actions.\n   * pass `null` if you wish to not render anything\n   * @default DefaultParticipantViewUI\n   */\n  ParticipantViewUI?: ComponentType | ReactElement | null;\n\n  /**\n   * The kind of video stream to play for the given participant.\n   * The default value is `videoTrack`.\n   * You can use `none` if you're building an audio-only call.\n   */\n  trackType?: VideoTrackType | 'none';\n\n  /**\n   * Forces participant's video to be mirrored or unmirrored. By default, video track\n   * from the local participant is mirrored, and all other videos are not mirrored.\n   */\n  mirror?: boolean;\n\n  /**\n   * This prop is only useful for advanced use-cases (for example, building your own layout).\n   * When set to `true` it will mute the give participant's audio stream on the client side.\n   * The local participant is always muted.\n   */\n  muteAudio?: boolean;\n\n  /**\n   * An object with set functions meant for exposing the video\n   * and video placeholder elements to the integrators.\n   * It's useful when you want to attach custom event handlers to these elements.\n   * - `refs.setVideoElement`\n   * - `refs.setVideoPlaceholderElement`\n   */\n  refs?: VideoProps['refs'];\n\n  /**\n   * Custom class applied to the root DOM element.\n   */\n  className?: string;\n} & Pick<VideoProps, 'VideoPlaceholder' | 'PictureInPicturePlaceholder'>;\n\nexport const ParticipantView = forwardRef<HTMLDivElement, ParticipantViewProps>(\n  function ParticipantView(\n    {\n      participant,\n      trackType = 'videoTrack',\n      mirror,\n      muteAudio,\n      refs: { setVideoElement, setVideoPlaceholderElement } = {},\n      className,\n      VideoPlaceholder,\n      PictureInPicturePlaceholder,\n      ParticipantViewUI = DefaultParticipantViewUI as ComponentType,\n    },\n    ref,\n  ) {\n    const { isLocalParticipant, isSpeaking, isDominantSpeaker, sessionId } =\n      participant;\n\n    const hasAudioTrack = hasAudio(participant);\n    const hasVideoTrack = hasVideo(participant);\n    const hasScreenShareAudioTrack = hasScreenShareAudio(participant);\n\n    const [trackedElement, setTrackedElement] = useState<HTMLDivElement | null>(\n      null,\n    );\n\n    const [contextVideoElement, setContextVideoElement] =\n      useState<HTMLVideoElement | null>(null);\n\n    const [contextVideoPlaceholderElement, setContextVideoPlaceholderElement] =\n      useState<HTMLDivElement | null>(null);\n\n    // TODO: allow to pass custom ViewportTracker instance from props\n    useTrackElementVisibility({\n      sessionId,\n      trackedElement,\n      trackType,\n    });\n\n    const { useIncomingVideoSettings } = useCallStateHooks();\n    const { isParticipantVideoEnabled } = useIncomingVideoSettings();\n\n    const participantViewContextValue = useMemo(\n      () => ({\n        participant,\n        participantViewElement: trackedElement,\n        videoElement: contextVideoElement,\n        videoPlaceholderElement: contextVideoPlaceholderElement,\n        trackType,\n      }),\n      [\n        contextVideoElement,\n        contextVideoPlaceholderElement,\n        participant,\n        trackedElement,\n        trackType,\n      ],\n    );\n\n    const videoRefs: VideoProps['refs'] = useMemo(\n      () => ({\n        setVideoElement: (element) => {\n          setVideoElement?.(element);\n          setContextVideoElement(element);\n        },\n        setVideoPlaceholderElement: (element) => {\n          setVideoPlaceholderElement?.(element);\n          setContextVideoPlaceholderElement(element);\n        },\n      }),\n      [setVideoElement, setVideoPlaceholderElement],\n    );\n\n    return (\n      <div\n        data-testid=\"participant-view\"\n        ref={(element) => {\n          applyElementToRef(ref, element);\n          setTrackedElement(element);\n        }}\n        className={clsx(\n          'str-video__participant-view',\n          isDominantSpeaker && 'str-video__participant-view--dominant-speaker',\n          isSpeaking && 'str-video__participant-view--speaking',\n          !hasVideoTrack && 'str-video__participant-view--no-video',\n          !hasAudioTrack && 'str-video__participant-view--no-audio',\n          className,\n        )}\n      >\n        <ParticipantViewContext.Provider value={participantViewContextValue}>\n          {/* mute the local participant, as we don't want to hear ourselves */}\n          {!isLocalParticipant && !muteAudio && (\n            <>\n              {hasAudioTrack && (\n                <Audio participant={participant} trackType=\"audioTrack\" />\n              )}\n              {hasScreenShareAudioTrack && (\n                <Audio\n                  participant={participant}\n                  trackType=\"screenShareAudioTrack\"\n                />\n              )}\n            </>\n          )}\n          <Video\n            VideoPlaceholder={VideoPlaceholder}\n            PictureInPicturePlaceholder={PictureInPicturePlaceholder}\n            participant={participant}\n            trackType={trackType}\n            refs={videoRefs}\n            enabled={\n              isLocalParticipant ||\n              trackType !== 'videoTrack' ||\n              isParticipantVideoEnabled(participant.sessionId)\n            }\n            mirror={mirror}\n            autoPlay\n          />\n          {isComponentType(ParticipantViewUI) ? (\n            <ParticipantViewUI />\n          ) : (\n            ParticipantViewUI\n          )}\n        </ParticipantViewContext.Provider>\n      </div>\n    );\n  },\n);\n\nParticipantView.displayName = 'ParticipantView';\n", "import { ComponentType, PropsWithChildren } from 'react';\nimport {\n  StreamCallProvider,\n  StreamCallProviderProps,\n} from '@stream-io/video-react-bindings';\n\n// re-exporting the StreamCallProvider as StreamCall\nexport const StreamCall: ComponentType<\n  PropsWithChildren<StreamCallProviderProps>\n> = StreamCallProvider;\n\nStreamCall.displayName = 'StreamCall';\n", "import en from './en.json';\n\nexport const translations = { en };\n", "import {\n  StreamVideoProps,\n  StreamVideoProvider,\n} from '@stream-io/video-react-bindings';\nimport { PropsWithChildren } from 'react';\nimport { translations } from '../../../translations';\n\nexport const StreamVideo = (props: PropsWithChildren<StreamVideoProps>) => {\n  return (\n    <StreamVideoProvider translationsOverrides={translations} {...props} />\n  );\n};\n\nStreamVideo.displayName = 'StreamVideo';\n", "export type Filter<T> =\n  | { $and: Array<Filter<T>> }\n  | { $or: Array<Filter<T>> }\n  | { $not: Filter<T> }\n  | Conditions<T>;\n\ntype Conditions<T> = {\n  [K in keyof T]?: T[K] extends Array<infer E>\n    ? ArrayOperator<E>\n    : ScalarOperator<T[K]>;\n};\n\nexport type ScalarOperator<T> =\n  | EqOperator<T>\n  | NeqOperator<T>\n  | InOperator<T>\n  | GtOperator<T>\n  | GteOperator<T>\n  | LtOperator<T>\n  | LteOperator<T>\n  | T;\n\nexport type ArrayOperator<T> = ContainsOperator<T>;\n\nexport type AutocompleteOperator<T> = { $autocomplete: T };\nexport type EqOperator<T> = { $eq: T };\nexport type GtOperator<T> = { $gt: T };\nexport type GteOperator<T> = { $gte: T };\nexport type LtOperator<T> = { $lt: T };\nexport type LteOperator<T> = { $lte: T };\nexport type NeqOperator<T> = { $neq: T };\nexport type InOperator<T> = { $in: Array<T> };\nexport type ContainsOperator<T> = { $contains: T };\n\nexport function applyFilter<T>(obj: T, filter: Filter<T>): boolean {\n  if ('$and' in filter) {\n    return filter.$and.every((f) => applyFilter(obj, f));\n  }\n\n  if ('$or' in filter) {\n    return filter.$or.some((f) => applyFilter(obj, f));\n  }\n\n  if ('$not' in filter) {\n    return !applyFilter(obj, filter.$not);\n  }\n\n  return checkConditions(obj, filter);\n}\n\ntype DateString = string;\nconst isDateString = (value: unknown): value is DateString =>\n  typeof value === 'string' &&\n  /^((?:(\\d{4}-\\d{2}-\\d{2})T(\\d{2}:\\d{2}:\\d{2}(?:\\.\\d+)?))(Z|[+-]\\d{2}:\\d{2})?)$/.test(\n    value,\n  );\n\nfunction checkConditions<T>(obj: T, conditions: Conditions<T>): boolean {\n  let match = true;\n\n  for (const key of Object.keys(conditions) as Array<keyof T>) {\n    const operator = conditions[key];\n    const maybeOperator = operator && typeof operator === 'object';\n    let value: T[keyof T] | number = obj[key];\n\n    if (value instanceof Date) {\n      value = value.getTime();\n    } else if (isDateString(value)) {\n      value = new Date(value).getTime();\n    }\n\n    if (maybeOperator && '$eq' in operator) {\n      const eqOperator = operator as EqOperator<typeof value>;\n      const eqOperatorValue = isDateString(eqOperator.$eq)\n        ? new Date(eqOperator.$eq).getTime()\n        : eqOperator.$eq;\n      match &&= eqOperatorValue === value;\n    } else if (maybeOperator && '$neq' in operator) {\n      const neqOperator = operator as NeqOperator<typeof value>;\n      match &&= neqOperator.$neq !== value;\n    } else if (maybeOperator && '$in' in operator) {\n      const inOperator = operator as InOperator<typeof value>;\n      match &&= inOperator.$in.includes(value);\n    } else if (maybeOperator && '$contains' in operator) {\n      if (Array.isArray(value)) {\n        const containsOperator = operator as ContainsOperator<\n          (typeof value)[number]\n        >;\n        match &&= value.includes(containsOperator.$contains);\n      } else {\n        match = false;\n      }\n    } else if (maybeOperator && '$gt' in operator) {\n      const gtOperator = operator as GtOperator<typeof value>;\n      const gtOperatorValue = isDateString(gtOperator.$gt)\n        ? new Date(gtOperator.$gt).getTime()\n        : gtOperator.$gt;\n      match &&= value > gtOperatorValue;\n    } else if (maybeOperator && '$gte' in operator) {\n      const gteOperator = operator as GteOperator<typeof value>;\n      const gteOperatorValue = isDateString(gteOperator.$gte)\n        ? new Date(gteOperator.$gte).getTime()\n        : gteOperator.$gte;\n      match &&= value >= gteOperatorValue;\n    } else if (maybeOperator && '$lt' in operator) {\n      const ltOperator = operator as LtOperator<typeof value>;\n      const ltOperatorValue = isDateString(ltOperator.$lt)\n        ? new Date(ltOperator.$lt).getTime()\n        : ltOperator.$lt;\n      match &&= value < ltOperatorValue;\n    } else if (maybeOperator && '$lte' in operator) {\n      const lteOperator = operator as LteOperator<typeof value>;\n      const lteOperatorValue = isDateString(lteOperator.$lte)\n        ? new Date(lteOperator.$lte).getTime()\n        : lteOperator.$lte;\n      match &&= value <= lteOperatorValue;\n      // } else if (maybeOperator && '$autocomplete' in operator) {\n      // TODO: regexp solution maybe?\n      // match &&= false;\n    } else {\n      const eqValue = operator as typeof value;\n      match &&= eqValue === value;\n    }\n\n    if (!match) {\n      return false;\n    }\n  }\n\n  return true;\n}\n", "import { useEffect, useMemo } from 'react';\nimport {\n  Call,\n  CallTypes,\n  combineComparators,\n  Comparator,\n  defaultSortPreset,\n  hasAudio,\n  hasScreenShare,\n  hasVideo,\n  isPinned,\n  paginatedLayoutSortPreset,\n  screenSharing,\n  speakerLayoutSortPreset,\n  StreamVideoParticipant,\n} from '@stream-io/video-client';\nimport { useCallStateHooks } from '@stream-io/video-react-bindings';\nimport { applyFilter, Filter } from '../../../utilities/filter';\n\nexport type FilterableParticipant = Pick<\n  StreamVideoParticipant,\n  'userId' | 'isSpeaking' | 'isDominantSpeaker' | 'name' | 'roles'\n> & {\n  isPinned: boolean;\n  hasVideo: boolean;\n  hasAudio: boolean;\n  hasScreenShare: boolean;\n};\n\nexport type ParticipantFilter = Filter<FilterableParticipant>;\nexport type ParticipantPredicate = (\n  participant: StreamVideoParticipant,\n) => boolean;\n\nexport const useFilteredParticipants = ({\n  excludeLocalParticipant = false,\n  filterParticipants,\n}: {\n  excludeLocalParticipant?: boolean;\n  filterParticipants?: ParticipantFilter | ParticipantPredicate;\n}) => {\n  const { useParticipants, useRemoteParticipants } = useCallStateHooks();\n  const allParticipants = useParticipants();\n  const remoteParticipants = useRemoteParticipants();\n  return useMemo(() => {\n    const unfilteredParticipants = excludeLocalParticipant\n      ? remoteParticipants\n      : allParticipants;\n\n    return filterParticipants\n      ? applyParticipantsFilter(unfilteredParticipants, filterParticipants)\n      : unfilteredParticipants;\n  }, [\n    allParticipants,\n    remoteParticipants,\n    excludeLocalParticipant,\n    filterParticipants,\n  ]);\n};\n\nexport const applyParticipantsFilter = (\n  participants: StreamVideoParticipant[],\n  filter: ParticipantPredicate | ParticipantFilter,\n) => {\n  const filterCallback =\n    typeof filter === 'function'\n      ? filter\n      : (participant: StreamVideoParticipant) =>\n          applyFilter(\n            {\n              userId: participant.userId,\n              isSpeaking: participant.isSpeaking,\n              isDominantSpeaker: participant.isDominantSpeaker,\n              name: participant.name,\n              roles: participant.roles,\n              isPinned: isPinned(participant),\n              hasVideo: hasVideo(participant),\n              hasAudio: hasAudio(participant),\n              hasScreenShare: hasScreenShare(participant),\n            },\n            filter,\n          );\n\n  return participants.filter(filterCallback);\n};\n\nexport const usePaginatedLayoutSortPreset = (call: Call | undefined) => {\n  useEffect(() => {\n    if (!call) return;\n    call.setSortParticipantsBy(paginatedLayoutSortPreset);\n    return () => {\n      resetSortPreset(call);\n    };\n  }, [call]);\n};\n\nexport const useSpeakerLayoutSortPreset = (\n  call: Call | undefined,\n  isOneOnOneCall: boolean,\n) => {\n  useEffect(() => {\n    if (!call) return;\n    // always show the remote participant in the spotlight\n    if (isOneOnOneCall) {\n      call.setSortParticipantsBy(combineComparators(screenSharing, loggedIn));\n    } else {\n      call.setSortParticipantsBy(speakerLayoutSortPreset);\n    }\n    return () => {\n      resetSortPreset(call);\n    };\n  }, [call, isOneOnOneCall]);\n};\n\nexport const useRawRemoteParticipants = () => {\n  const { useRawParticipants } = useCallStateHooks();\n  const rawParticipants = useRawParticipants();\n  return useMemo(\n    () => rawParticipants.filter((p) => !p.isLocalParticipant),\n    [rawParticipants],\n  );\n};\n\nconst resetSortPreset = (call: Call) => {\n  // reset the sorting to the default for the call type\n  const callConfig = CallTypes.get(call.type);\n  call.setSortParticipantsBy(\n    callConfig.options.sortParticipantsBy || defaultSortPreset,\n  );\n};\n\nconst loggedIn: Comparator<StreamVideoParticipant> = (a, b) => {\n  if (a.isLocalParticipant) return 1;\n  if (b.isLocalParticipant) return -1;\n  return 0;\n};\n", "import clsx from 'clsx';\nimport {\n  ComponentType,\n  ReactElement,\n  useCallback,\n  useEffect,\n  useState,\n} from 'react';\nimport {\n  useCall,\n  useCallStateHooks,\n  useI18n,\n} from '@stream-io/video-react-bindings';\nimport { hasScreenShare, humanize } from '@stream-io/video-client';\nimport { ParticipantView, useParticipantViewContext } from '../ParticipantView';\nimport { ParticipantsAudio } from '../Audio';\nimport {\n  usePaginatedLayoutSortPreset,\n  useRawRemoteParticipants,\n} from './hooks';\n\n/**\n * The props for the {@link LivestreamLayout} component.\n */\nexport type LivestreamLayoutProps = {\n  /**\n   * Whether the livestream is muted. Defaults to `false`.\n   */\n  muted?: boolean;\n\n  /**\n   * Whether to show the participant count. Defaults to `true`.\n   */\n  showParticipantCount?: boolean;\n\n  /**\n   * Whether to humanize the participant count. Defaults to `true`.\n   * @example\n   * 1000 participants -> 1k\n   * 1500 participants -> 1.5k\n   * 10_000 participants -> 10k\n   * 100_000 participants -> 100k\n   */\n  humanizeParticipantCount?: boolean;\n\n  /**\n   * Whether to enable fullscreen mode. Defaults to `true`.\n   */\n  enableFullScreen?: boolean;\n\n  /**\n   * Whether to show the duration of the call. Defaults to `true`.\n   */\n  showDuration?: boolean;\n\n  /**\n   * Whether to show the live badge. Defaults to `true`.\n   */\n  showLiveBadge?: boolean;\n\n  /**\n   * Whether to show the speaker name. Defaults to `false`.\n   */\n  showSpeakerName?: boolean;\n\n  /**\n   * Whether to show the mute button. Defaults to `true`.\n   */\n  showMuteButton?: boolean;\n\n  /**\n   * When set to `false` disables mirroring of the local participant's video.\n   * @default true\n   */\n  mirrorLocalParticipantVideo?: boolean;\n\n  /**\n   * The props to pass to the floating participant element.\n   */\n  floatingParticipantProps?: LivestreamLayoutProps & {\n    /**\n     * The position of the floating participant element. Defaults to `top-right`.\n     */\n    position?: 'top-left' | 'top-right' | 'bottom-left' | 'bottom-right';\n  };\n\n  /**\n   * Override the default participant view overlay UI.\n   */\n  ParticipantViewUI?: ComponentType | ReactElement | null;\n};\n\nexport const LivestreamLayout = (props: LivestreamLayoutProps) => {\n  const { useParticipants, useHasOngoingScreenShare } = useCallStateHooks();\n  const call = useCall();\n  const participants = useParticipants();\n  const [currentSpeaker] = participants;\n  const remoteParticipants = useRawRemoteParticipants();\n  const hasOngoingScreenShare = useHasOngoingScreenShare();\n  const presenter = hasOngoingScreenShare\n    ? participants.find(hasScreenShare)\n    : undefined;\n\n  usePaginatedLayoutSortPreset(call);\n\n  const { floatingParticipantProps, muted, ParticipantViewUI } = props;\n  const overlay = ParticipantViewUI ?? (\n    <ParticipantOverlay\n      showParticipantCount={props.showParticipantCount}\n      showDuration={props.showDuration}\n      showLiveBadge={props.showLiveBadge}\n      showMuteButton={props.showMuteButton}\n      showSpeakerName={props.showSpeakerName}\n      enableFullScreen={props.enableFullScreen}\n    />\n  );\n\n  const floatingParticipantOverlay =\n    hasOngoingScreenShare &&\n    (ParticipantViewUI ?? (\n      <ParticipantOverlay\n        // these elements aren't needed for the video feed\n        showParticipantCount={\n          floatingParticipantProps?.showParticipantCount ?? false\n        }\n        showDuration={floatingParticipantProps?.showDuration ?? false}\n        showLiveBadge={floatingParticipantProps?.showLiveBadge ?? false}\n        showSpeakerName={floatingParticipantProps?.showSpeakerName ?? true}\n        enableFullScreen={floatingParticipantProps?.enableFullScreen ?? true}\n      />\n    ));\n\n  return (\n    <div className=\"str-video__livestream-layout__wrapper\">\n      {!muted && <ParticipantsAudio participants={remoteParticipants} />}\n      {hasOngoingScreenShare && presenter && (\n        <ParticipantView\n          className=\"str-video__livestream-layout__screen-share\"\n          participant={presenter}\n          ParticipantViewUI={overlay}\n          trackType=\"screenShareTrack\"\n          muteAudio // audio is rendered by ParticipantsAudio\n        />\n      )}\n      {currentSpeaker && (\n        <ParticipantView\n          className={clsx(\n            hasOngoingScreenShare &&\n              clsx(\n                'str-video__livestream-layout__floating-participant',\n                `str-video__livestream-layout__floating-participant--${\n                  floatingParticipantProps?.position ?? 'top-right'\n                }`,\n              ),\n          )}\n          participant={currentSpeaker}\n          ParticipantViewUI={floatingParticipantOverlay || overlay}\n          mirror={\n            props.mirrorLocalParticipantVideo !== false ? undefined : false\n          }\n          muteAudio // audio is rendered by ParticipantsAudio\n        />\n      )}\n    </div>\n  );\n};\n\nLivestreamLayout.displayName = 'LivestreamLayout';\n\n/**\n * The props for the {@link LivestreamLayout} component.\n */\nexport type BackstageLayoutProps = {\n  /**\n   * Whether to show the counter for participants that joined before\n   * the livestream went live. Defaults to `true`.\n   */\n  showEarlyParticipantCount?: boolean;\n\n  /**\n   * Show the participant count in a humanized format. Defaults to `true`.\n   * @example\n   * 1000 participants -> 1k\n   * 1500 participants -> 1.5k\n   * 10_000 participants -> 10k\n   * 10_0000 participants -> 100k\n   */\n  humanizeParticipantCount?: boolean;\n};\n\nexport const BackstageLayout = (props: BackstageLayoutProps) => {\n  const { showEarlyParticipantCount = true, humanizeParticipantCount = true } =\n    props;\n  const { useParticipantCount, useCallStartsAt } = useCallStateHooks();\n  const participantCount = useParticipantCount();\n  const startsAt = useCallStartsAt();\n  const { t } = useI18n();\n\n  return (\n    <div className=\"str-video__livestream-layout__wrapper\">\n      <div className=\"str-video__livestream-layout__backstage\">\n        {startsAt && (\n          <span className=\"str-video__livestream-layout__starts-at\">\n            {startsAt.getTime() < Date.now()\n              ? t('Livestream starts soon')\n              : t('Livestream starts at {{ startsAt }}', { startsAt })}\n          </span>\n        )}\n        {showEarlyParticipantCount && (\n          <span className=\"str-video__livestream-layout__early-viewers-count\">\n            {t('{{ count }} participants joined early', {\n              count: humanizeParticipantCount\n                ? humanize(participantCount)\n                : participantCount,\n            })}\n          </span>\n        )}\n      </div>\n    </div>\n  );\n};\n\nBackstageLayout.displayName = 'BackstageLayout';\n\nconst ParticipantOverlay = (props: {\n  enableFullScreen?: boolean;\n  showParticipantCount?: boolean;\n  humanizeParticipantCount?: boolean;\n  showDuration?: boolean;\n  showLiveBadge?: boolean;\n  showSpeakerName?: boolean;\n  showMuteButton?: boolean;\n}) => {\n  const {\n    enableFullScreen = true,\n    showParticipantCount = true,\n    humanizeParticipantCount = true,\n    showDuration = true,\n    showLiveBadge = true,\n    showMuteButton = true,\n    showSpeakerName = false,\n  } = props;\n  const overlayBarVisible =\n    enableFullScreen ||\n    showParticipantCount ||\n    showDuration ||\n    showLiveBadge ||\n    showMuteButton ||\n    showSpeakerName;\n  const { participant } = useParticipantViewContext();\n  const { useParticipantCount, useSpeakerState } = useCallStateHooks();\n  const participantCount = useParticipantCount();\n  const duration = useUpdateCallDuration();\n  const toggleFullScreen = useToggleFullScreen();\n  const { speaker, volume } = useSpeakerState();\n  const isSpeakerMuted = volume === 0;\n  const { t } = useI18n();\n  return (\n    <div className=\"str-video__livestream-layout__overlay\">\n      {overlayBarVisible && (\n        <div className=\"str-video__livestream-layout__overlay__bar\">\n          {showLiveBadge && (\n            <span className=\"str-video__livestream-layout__live-badge\">\n              {t('Live')}\n            </span>\n          )}\n          {showParticipantCount && (\n            <span className=\"str-video__livestream-layout__viewers-count\">\n              {humanizeParticipantCount\n                ? humanize(participantCount)\n                : participantCount}\n            </span>\n          )}\n          {showSpeakerName && (\n            <span\n              className=\"str-video__livestream-layout__speaker-name\"\n              title={participant.name || participant.userId || ''}\n            >\n              {participant.name || participant.userId || ''}\n            </span>\n          )}\n          {showDuration && (\n            <span className=\"str-video__livestream-layout__duration\">\n              {formatDuration(duration)}\n            </span>\n          )}\n          {showMuteButton && (\n            <span\n              className={clsx(\n                'str-video__livestream-layout__mute-button',\n                isSpeakerMuted &&\n                  'str-video__livestream-layout__mute-button--muted',\n              )}\n              onClick={() => speaker.setVolume(isSpeakerMuted ? 1 : 0)}\n            />\n          )}\n          {enableFullScreen && (\n            <span\n              className=\"str-video__livestream-layout__go-fullscreen\"\n              onClick={toggleFullScreen}\n            />\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nconst useUpdateCallDuration = () => {\n  const { useIsCallLive, useCallSession } = useCallStateHooks();\n  const isCallLive = useIsCallLive();\n  const session = useCallSession();\n  const [duration, setDuration] = useState(() => {\n    if (!session || !session.live_started_at) return 0;\n    const liveStartTime = new Date(session.live_started_at);\n    const now = new Date();\n    return Math.floor((now.getTime() - liveStartTime.getTime()) / 1000);\n  });\n\n  useEffect(() => {\n    if (!isCallLive) return;\n    const interval = setInterval(() => {\n      setDuration((d) => d + 1);\n    }, 1000);\n    return () => {\n      clearInterval(interval);\n    };\n  }, [isCallLive]);\n\n  return duration;\n};\n\nconst useToggleFullScreen = () => {\n  const { participantViewElement } = useParticipantViewContext();\n  const [isFullscreen, setIsFullscreen] = useState(\n    !!document.fullscreenElement,\n  );\n  useEffect(() => {\n    const handler = () => setIsFullscreen(!!document.fullscreenElement);\n    document.addEventListener('fullscreenchange', handler);\n    return () => {\n      document.removeEventListener('fullscreenchange', handler);\n    };\n  }, []);\n  return useCallback(() => {\n    if (isFullscreen) {\n      document.exitFullscreen().catch((err) => {\n        console.error('Failed to exit fullscreen', err);\n      });\n    } else {\n      participantViewElement?.requestFullscreen().catch((err) => {\n        console.error('Failed to enter fullscreen', err);\n      });\n    }\n  }, [isFullscreen, participantViewElement]);\n};\n\nconst formatDuration = (durationInMs: number) => {\n  const days = Math.floor(durationInMs / 86400);\n  const hours = Math.floor(durationInMs / 3600);\n  const minutes = Math.floor((durationInMs % 3600) / 60);\n  const seconds = durationInMs % 60;\n\n  return `${days ? days + ' ' : ''}${hours ? hours + ':' : ''}${\n    minutes < 10 ? '0' : ''\n  }${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;\n};\n", "import { useEffect, useMemo, useState } from 'react';\nimport { useCall } from '@stream-io/video-react-bindings';\nimport { StreamVideoParticipant } from '@stream-io/video-client';\nimport clsx from 'clsx';\n\nimport {\n  DefaultParticipantViewUI,\n  ParticipantView,\n  ParticipantViewProps,\n} from '../ParticipantView';\nimport { ParticipantsAudio } from '../Audio';\nimport { IconButton } from '../../../components';\nimport { chunk } from '../../../utilities';\nimport {\n  ParticipantFilter,\n  ParticipantPredicate,\n  useFilteredParticipants,\n  usePaginatedLayoutSortPreset,\n  useRawRemoteParticipants,\n} from './hooks';\n\nconst GROUP_SIZE = 16;\n\ntype PaginatedGridLayoutGroupProps = {\n  /**\n   * The group of participants to render.\n   */\n  group: Array<StreamVideoParticipant>;\n} & Pick<\n  ParticipantViewProps,\n  'VideoPlaceholder' | 'PictureInPicturePlaceholder' | 'mirror'\n> &\n  Required<Pick<ParticipantViewProps, 'ParticipantViewUI'>>;\n\nconst PaginatedGridLayoutGroup = ({\n  group,\n  mirror,\n  VideoPlaceholder,\n  PictureInPicturePlaceholder,\n  ParticipantViewUI,\n}: PaginatedGridLayoutGroupProps) => {\n  return (\n    <div\n      className={clsx('str-video__paginated-grid-layout__group', {\n        'str-video__paginated-grid-layout--one': group.length === 1,\n        'str-video__paginated-grid-layout--two-four':\n          group.length >= 2 && group.length <= 4,\n        'str-video__paginated-grid-layout--five-nine':\n          group.length >= 5 && group.length <= 9,\n      })}\n    >\n      {group.map((participant) => (\n        <ParticipantView\n          key={participant.sessionId}\n          participant={participant}\n          muteAudio\n          mirror={mirror}\n          VideoPlaceholder={VideoPlaceholder}\n          PictureInPicturePlaceholder={PictureInPicturePlaceholder}\n          ParticipantViewUI={ParticipantViewUI}\n        />\n      ))}\n    </div>\n  );\n};\n\nexport type PaginatedGridLayoutProps = {\n  /**\n   * The number of participants to display per page.\n   */\n  groupSize?: number;\n\n  /**\n   * Whether to exclude the local participant from the grid.\n   * @default false\n   */\n  excludeLocalParticipant?: boolean;\n\n  /**\n   * Predicate to filter call participants or a filter object.\n   * @example\n   * // With a predicate:\n   * <PaginatedGridLayout\n   *   filterParticipants={p => p.roles.includes('student')}\n   * />\n   * @example\n   * // With a filter object:\n   * <PaginatedGridLayout\n   *   filterParticipants={{\n   *     $or: [\n   *       { roles: { $contains: 'student' } },\n   *       { isPinned: true },\n   *     ],\n   *   }}\n   * />\n   */\n  filterParticipants?: ParticipantPredicate | ParticipantFilter;\n\n  /**\n   * When set to `false` disables mirroring of the local partipant's video.\n   * @default true\n   */\n  mirrorLocalParticipantVideo?: boolean;\n\n  /**\n   * Turns on/off the pagination arrows.\n   * @default true\n   */\n  pageArrowsVisible?: boolean;\n\n  /**\n   * Whether the layout is muted. Defaults to `false`.\n   */\n  muted?: boolean;\n} & Pick<\n  ParticipantViewProps,\n  'ParticipantViewUI' | 'VideoPlaceholder' | 'PictureInPicturePlaceholder'\n>;\n\nexport const PaginatedGridLayout = (props: PaginatedGridLayoutProps) => {\n  const {\n    groupSize = (props.groupSize || 0) > 0\n      ? props.groupSize || GROUP_SIZE\n      : GROUP_SIZE,\n    excludeLocalParticipant = false,\n    filterParticipants,\n    mirrorLocalParticipantVideo = true,\n    pageArrowsVisible = true,\n    VideoPlaceholder,\n    ParticipantViewUI = DefaultParticipantViewUI,\n    PictureInPicturePlaceholder,\n    muted,\n  } = props;\n  const [page, setPage] = useState(0);\n  const [\n    paginatedGridLayoutWrapperElement,\n    setPaginatedGridLayoutWrapperElement,\n  ] = useState<HTMLDivElement | null>(null);\n\n  const call = useCall();\n  const remoteParticipants = useRawRemoteParticipants();\n  const participants = useFilteredParticipants({\n    excludeLocalParticipant,\n    filterParticipants,\n  });\n\n  usePaginatedLayoutSortPreset(call);\n\n  useEffect(() => {\n    if (!paginatedGridLayoutWrapperElement || !call) return;\n\n    const cleanup = call.setViewport(paginatedGridLayoutWrapperElement);\n\n    return () => cleanup();\n  }, [paginatedGridLayoutWrapperElement, call]);\n\n  // only used to render video elements\n  const participantGroups = useMemo(\n    () => chunk(participants, groupSize),\n    [participants, groupSize],\n  );\n\n  const pageCount = participantGroups.length;\n\n  // update page when page count is reduced and selected page no longer exists\n  useEffect(() => {\n    if (page > pageCount - 1) {\n      setPage(Math.max(0, pageCount - 1));\n    }\n  }, [page, pageCount]);\n\n  const selectedGroup = participantGroups[page];\n  const mirror = mirrorLocalParticipantVideo ? undefined : false;\n\n  if (!call) return null;\n\n  return (\n    <div\n      className=\"str-video__paginated-grid-layout__wrapper\"\n      ref={setPaginatedGridLayoutWrapperElement}\n    >\n      {!muted && <ParticipantsAudio participants={remoteParticipants} />}\n      <div className=\"str-video__paginated-grid-layout\">\n        {pageArrowsVisible && pageCount > 1 && (\n          <IconButton\n            icon=\"caret-left\"\n            disabled={page === 0}\n            onClick={() =>\n              setPage((currentPage) => Math.max(0, currentPage - 1))\n            }\n          />\n        )}\n        {selectedGroup && (\n          <PaginatedGridLayoutGroup\n            group={selectedGroup}\n            mirror={mirror}\n            VideoPlaceholder={VideoPlaceholder}\n            ParticipantViewUI={ParticipantViewUI}\n            PictureInPicturePlaceholder={PictureInPicturePlaceholder}\n          />\n        )}\n        {pageArrowsVisible && pageCount > 1 && (\n          <IconButton\n            disabled={page === pageCount - 1}\n            icon=\"caret-right\"\n            onClick={() =>\n              setPage((currentPage) => Math.min(pageCount - 1, currentPage + 1))\n            }\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nPaginatedGridLayout.displayName = 'PaginatedGridLayout';\n", "import { useEffect, useState } from 'react';\n\nexport const useCalculateHardLimit = (\n  /**\n   * Element that stretches to 100% of the whole layout component\n   */\n  wrapperElement: HTMLDivElement | null,\n  /**\n   * Element that directly hosts individual `ParticipantView` (or wrapper) elements\n   */\n  hostElement: HTMLDivElement | null,\n  limit?: 'dynamic' | number,\n) => {\n  const [calculatedLimit, setCalculatedLimit] = useState<{\n    vertical: number | null;\n    horizontal: number | null;\n  }>({\n    vertical: typeof limit === 'number' ? limit : null,\n    horizontal: typeof limit === 'number' ? limit : null,\n  });\n\n  useEffect(() => {\n    if (\n      !hostElement ||\n      !wrapperElement ||\n      typeof limit === 'number' ||\n      typeof limit === 'undefined'\n    )\n      return;\n\n    let childWidth: number | null = null;\n    let childHeight: number | null = null;\n\n    const resizeObserver = new ResizeObserver((entries, observer) => {\n      // this part should ideally run as little times as possible\n      // get child measurements and disconnect\n      // does not consider dynamically sized children\n      // this hook is for SpeakerLayout use only, where children in the bar are fixed size\n      if (entries.length > 1) {\n        const child = hostElement.firstChild as HTMLElement | null;\n\n        if (child) {\n          childHeight = child.clientHeight;\n          childWidth = child.clientWidth;\n          observer.unobserve(hostElement);\n        }\n      }\n\n      // keep the state at { vertical: 1, horizontal: 1 }\n      // until we get the proper child measurements\n      if (childHeight === null || childWidth === null) return;\n\n      const vertical = Math.floor(wrapperElement.clientHeight / childHeight);\n      const horizontal = Math.floor(wrapperElement.clientWidth / childWidth);\n\n      setCalculatedLimit((pv) => {\n        if (pv.vertical !== vertical || pv.horizontal !== horizontal)\n          return { vertical, horizontal };\n        return pv;\n      });\n    });\n\n    resizeObserver.observe(wrapperElement);\n    resizeObserver.observe(hostElement);\n\n    return () => {\n      resizeObserver.disconnect();\n    };\n  }, [hostElement, limit, wrapperElement]);\n\n  return calculatedLimit;\n};\n", "import { useEffect, useState } from 'react';\nimport clsx from 'clsx';\nimport { hasScreenShare } from '@stream-io/video-client';\nimport { useCall, useCallStateHooks } from '@stream-io/video-react-bindings';\n\nimport {\n  DefaultParticipantViewUI,\n  ParticipantView,\n  ParticipantViewProps,\n} from '../ParticipantView';\nimport { IconButton } from '../../../components';\nimport {\n  useDragToScroll,\n  useHorizontalScrollPosition,\n  useVerticalScrollPosition,\n} from '../../../hooks';\nimport {\n  ParticipantFilter,\n  ParticipantPredicate,\n  useFilteredParticipants,\n  useRawRemoteParticipants,\n  useSpeakerLayoutSortPreset,\n} from './hooks';\nimport { useCalculateHardLimit } from '../../hooks/useCalculateHardLimit';\nimport { ParticipantsAudio } from '../Audio';\n\nexport type SpeakerLayoutProps = {\n  /**\n   * The UI to be used for the participant in the spotlight.\n   */\n  ParticipantViewUISpotlight?: ParticipantViewProps['ParticipantViewUI'];\n\n  /**\n   * The UI to be used for the participants in the participants bar.\n   */\n  ParticipantViewUIBar?: ParticipantViewProps['ParticipantViewUI'];\n\n  /**\n   * The position of the participants who are not in focus.\n   * Providing `null` will hide the bar.\n   */\n  participantsBarPosition?: 'top' | 'bottom' | 'left' | 'right' | null;\n\n  /**\n   * Hard limits the number of the participants rendered in the participants bar.\n   * Providing string `dynamic` will calculate hard limit based on screen width/height.\n   */\n  participantsBarLimit?: 'dynamic' | number;\n\n  /**\n   * When set to `true` will exclude the local participant from layout.\n   * @default false\n   */\n  excludeLocalParticipant?: boolean;\n\n  /**\n   * Predicate to filter call participants or a filter object.\n   * @example\n   * // With a predicate:\n   * <SpeakerLayout\n   *   filterParticipants={p => p.roles.includes('student')}\n   * />\n   * @example\n   * // With a filter object:\n   * <SpeakerLayout\n   *   filterParticipants={{\n   *     $or: [\n   *       { roles: { $contains: 'student' } },\n   *       { isPinned: true },\n   *     ],\n   *   }}\n   * />\n   */\n  filterParticipants?: ParticipantPredicate | ParticipantFilter;\n\n  /**\n   * When set to `false` disables mirroring of the local participant's video.\n   * @default true\n   */\n  mirrorLocalParticipantVideo?: boolean;\n\n  /**\n   * Turns on/off the pagination arrows.\n   * @default true\n   */\n  pageArrowsVisible?: boolean;\n\n  /**\n   * Whether the layout is muted. Defaults to `false`.\n   */\n  muted?: boolean;\n\n  /**\n   * Whether to enable drag-to-scroll functionality on the participants bar.\n   * @default false\n   */\n  enableDragToScroll?: boolean;\n} & Pick<\n  ParticipantViewProps,\n  'VideoPlaceholder' | 'PictureInPicturePlaceholder'\n>;\n\nconst DefaultParticipantViewUIBar = () => (\n  <DefaultParticipantViewUI menuPlacement=\"top-end\" />\n);\n\nexport const SpeakerLayout = ({\n  ParticipantViewUIBar = DefaultParticipantViewUIBar,\n  ParticipantViewUISpotlight = DefaultParticipantViewUI,\n  VideoPlaceholder,\n  PictureInPicturePlaceholder,\n  participantsBarPosition = 'bottom',\n  participantsBarLimit,\n  mirrorLocalParticipantVideo = true,\n  excludeLocalParticipant = false,\n  filterParticipants,\n  pageArrowsVisible = true,\n  muted,\n  enableDragToScroll = false,\n}: SpeakerLayoutProps) => {\n  const call = useCall();\n  const { useParticipants } = useCallStateHooks();\n  const allParticipants = useParticipants();\n  const remoteParticipants = useRawRemoteParticipants();\n  const [participantInSpotlight, ...otherParticipants] =\n    useFilteredParticipants({ excludeLocalParticipant, filterParticipants });\n  const [participantsBarWrapperElement, setParticipantsBarWrapperElement] =\n    useState<HTMLDivElement | null>(null);\n  const [participantsBarElement, setParticipantsBarElement] =\n    useState<HTMLDivElement | null>(null);\n  const [buttonsWrapperElement, setButtonsWrapperElement] =\n    useState<HTMLDivElement | null>(null);\n\n  const isSpeakerScreenSharing =\n    participantInSpotlight && hasScreenShare(participantInSpotlight);\n  const hardLimit = useCalculateHardLimit(\n    buttonsWrapperElement,\n    participantsBarElement,\n    participantsBarLimit,\n  );\n\n  const isVertical =\n    participantsBarPosition === 'left' || participantsBarPosition === 'right';\n  const isHorizontal =\n    participantsBarPosition === 'top' || participantsBarPosition === 'bottom';\n\n  useEffect(() => {\n    if (!participantsBarWrapperElement || !call) return;\n\n    const cleanup = call.setViewport(participantsBarWrapperElement);\n\n    return () => cleanup();\n  }, [participantsBarWrapperElement, call]);\n\n  const isOneOnOneCall = allParticipants.length === 2;\n  useSpeakerLayoutSortPreset(call, isOneOnOneCall);\n  useDragToScroll(participantsBarWrapperElement, {\n    enabled: enableDragToScroll,\n  });\n\n  let participantsWithAppliedLimit = otherParticipants;\n\n  const hardLimitToApply = isVertical\n    ? hardLimit.vertical\n    : hardLimit.horizontal;\n\n  if (\n    typeof participantsBarLimit !== 'undefined' &&\n    hardLimitToApply !== null\n  ) {\n    participantsWithAppliedLimit = otherParticipants.slice(\n      0,\n      // subtract 1 if speaker is sharing screen as\n      // that one is rendered independently from otherParticipants array\n      hardLimitToApply - (isSpeakerScreenSharing ? 1 : 0),\n    );\n  }\n\n  const mirror = mirrorLocalParticipantVideo ? undefined : false;\n\n  if (!call) return null;\n\n  const renderParticipantsBar =\n    participantsBarPosition &&\n    (participantsWithAppliedLimit.length > 0 || isSpeakerScreenSharing);\n  return (\n    <div className=\"str-video__speaker-layout__wrapper\">\n      {!muted && <ParticipantsAudio participants={remoteParticipants} />}\n      <div\n        className={clsx(\n          'str-video__speaker-layout',\n          participantsBarPosition &&\n            `str-video__speaker-layout--variant-${participantsBarPosition}`,\n        )}\n      >\n        <div className=\"str-video__speaker-layout__spotlight\">\n          {participantInSpotlight && (\n            <ParticipantView\n              participant={participantInSpotlight}\n              muteAudio={true}\n              mirror={mirror}\n              trackType={\n                isSpeakerScreenSharing ? 'screenShareTrack' : 'videoTrack'\n              }\n              ParticipantViewUI={ParticipantViewUISpotlight}\n              VideoPlaceholder={VideoPlaceholder}\n              PictureInPicturePlaceholder={PictureInPicturePlaceholder}\n            />\n          )}\n        </div>\n        {renderParticipantsBar && (\n          <div\n            ref={setButtonsWrapperElement}\n            className=\"str-video__speaker-layout__participants-bar-buttons-wrapper\"\n          >\n            <div\n              className=\"str-video__speaker-layout__participants-bar-wrapper\"\n              ref={setParticipantsBarWrapperElement}\n            >\n              <div\n                ref={setParticipantsBarElement}\n                className=\"str-video__speaker-layout__participants-bar\"\n              >\n                {isSpeakerScreenSharing && (\n                  <div\n                    className=\"str-video__speaker-layout__participant-tile\"\n                    key={participantInSpotlight.sessionId}\n                  >\n                    <ParticipantView\n                      participant={participantInSpotlight}\n                      ParticipantViewUI={ParticipantViewUIBar}\n                      VideoPlaceholder={VideoPlaceholder}\n                      PictureInPicturePlaceholder={PictureInPicturePlaceholder}\n                      mirror={mirror}\n                      muteAudio={true}\n                    />\n                  </div>\n                )}\n                {participantsWithAppliedLimit.map((participant) => (\n                  <div\n                    className=\"str-video__speaker-layout__participant-tile\"\n                    key={participant.sessionId}\n                  >\n                    <ParticipantView\n                      participant={participant}\n                      ParticipantViewUI={ParticipantViewUIBar}\n                      VideoPlaceholder={VideoPlaceholder}\n                      PictureInPicturePlaceholder={PictureInPicturePlaceholder}\n                      mirror={mirror}\n                      muteAudio={true}\n                    />\n                  </div>\n                ))}\n              </div>\n            </div>\n            {pageArrowsVisible && isVertical && (\n              <VerticalScrollButtons\n                scrollWrapper={participantsBarWrapperElement}\n              />\n            )}\n            {pageArrowsVisible && isHorizontal && (\n              <HorizontalScrollButtons\n                scrollWrapper={participantsBarWrapperElement}\n              />\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nSpeakerLayout.displayName = 'SpeakerLayout';\n\ntype ScrollButtonsProps<T extends HTMLElement> = {\n  scrollWrapper: T | null;\n};\n\nconst HorizontalScrollButtons = <T extends HTMLElement>({\n  scrollWrapper,\n}: ScrollButtonsProps<T>) => {\n  const scrollPosition = useHorizontalScrollPosition(scrollWrapper);\n\n  const scrollStartClickHandler = () => {\n    scrollWrapper?.scrollBy({ left: -150, behavior: 'smooth' });\n  };\n\n  const scrollEndClickHandler = () => {\n    scrollWrapper?.scrollBy({ left: 150, behavior: 'smooth' });\n  };\n  return (\n    <>\n      {scrollPosition && scrollPosition !== 'start' && (\n        <IconButton\n          onClick={scrollStartClickHandler}\n          icon=\"caret-left\"\n          className=\"str-video__speaker-layout__participants-bar--button-left\"\n        />\n      )}\n      {scrollPosition && scrollPosition !== 'end' && (\n        <IconButton\n          onClick={scrollEndClickHandler}\n          icon=\"caret-right\"\n          className=\"str-video__speaker-layout__participants-bar--button-right\"\n        />\n      )}\n    </>\n  );\n};\n\nconst VerticalScrollButtons = <T extends HTMLElement>({\n  scrollWrapper,\n}: ScrollButtonsProps<T>) => {\n  const scrollPosition = useVerticalScrollPosition(scrollWrapper);\n\n  const scrollTopClickHandler = () => {\n    scrollWrapper?.scrollBy({ top: -150, behavior: 'smooth' });\n  };\n\n  const scrollBottomClickHandler = () => {\n    scrollWrapper?.scrollBy({ top: 150, behavior: 'smooth' });\n  };\n  return (\n    <>\n      {scrollPosition && scrollPosition !== 'top' && (\n        <IconButton\n          onClick={scrollTopClickHandler}\n          icon=\"caret-up\"\n          className=\"str-video__speaker-layout__participants-bar--button-top\"\n        />\n      )}\n      {scrollPosition && scrollPosition !== 'bottom' && (\n        <IconButton\n          onClick={scrollBottomClickHandler}\n          icon=\"caret-down\"\n          className=\"str-video__speaker-layout__participants-bar--button-bottom\"\n        />\n      )}\n    </>\n  );\n};\n", "import { useCall, useI18n } from '@stream-io/video-react-bindings';\nimport { useEffect, useState } from 'react';\n\nimport { hasScreenShare } from '@stream-io/video-client';\nimport { Icon } from '../../../../components';\nimport {\n  DefaultParticipantViewUI,\n  ParticipantView,\n  ParticipantViewProps,\n} from '../../ParticipantView';\nimport {\n  ParticipantFilter,\n  ParticipantPredicate,\n  useFilteredParticipants,\n  usePaginatedLayoutSortPreset,\n} from '../hooks';\n\nexport type PipLayoutProps = {\n  /**\n   * Whether to exclude the local participant from the grid.\n   * @default false\n   */\n  excludeLocalParticipant?: boolean;\n\n  /**\n   * Predicate to filter call participants or a filter object.\n   * @example\n   * // With a predicate:\n   * <PipLayout\n   *   filterParticipants={p => p.roles.includes('student')}\n   * />\n   * @example\n   * // With a filter object:\n   * <PipLayout\n   *   filterParticipants={{\n   *     $or: [\n   *       { roles: { $contains: 'student' } },\n   *       { isPinned: true },\n   *     ],\n   *   }}\n   * />\n   */\n  filterParticipants?: ParticipantPredicate | ParticipantFilter;\n\n  /**\n   * When set to `false` disables mirroring of the local partipant's video.\n   * @default true\n   */\n  mirrorLocalParticipantVideo?: boolean;\n} & Pick<ParticipantViewProps, 'ParticipantViewUI' | 'VideoPlaceholder'>;\n\nexport const Pip = (props: PipLayoutProps) => {\n  const { t } = useI18n();\n  const {\n    excludeLocalParticipant = false,\n    filterParticipants,\n    mirrorLocalParticipantVideo = true,\n    VideoPlaceholder,\n    ParticipantViewUI = DefaultParticipantViewUI,\n  } = props;\n  const [layoutWrapperElement, setLayoutWrapperElement] =\n    useState<HTMLDivElement | null>(null);\n\n  const call = useCall();\n  const participants = useFilteredParticipants({\n    excludeLocalParticipant,\n    filterParticipants,\n  });\n  const screenSharingParticipant = participants.find((p) => hasScreenShare(p));\n\n  usePaginatedLayoutSortPreset(call);\n\n  useEffect(() => {\n    if (!layoutWrapperElement || !call) return;\n    return call.setViewport(layoutWrapperElement);\n  }, [layoutWrapperElement, call]);\n\n  const mirror = mirrorLocalParticipantVideo ? undefined : false;\n\n  if (!call) return null;\n\n  return (\n    <div className=\"str-video__pip-layout\" ref={setLayoutWrapperElement}>\n      {screenSharingParticipant &&\n        (screenSharingParticipant.isLocalParticipant ? (\n          <div className=\"str-video__pip-screen-share-local\">\n            <Icon icon=\"screen-share-off\" />\n            <span className=\"str-video__pip-screen-share-local__title\">\n              {t('You are presenting your screen')}\n            </span>\n          </div>\n        ) : (\n          <ParticipantView\n            participant={screenSharingParticipant}\n            trackType=\"screenShareTrack\"\n            muteAudio\n            mirror={false}\n            VideoPlaceholder={VideoPlaceholder}\n            ParticipantViewUI={ParticipantViewUI}\n          />\n        ))}\n      {participants.map((participant) => (\n        <ParticipantView\n          key={participant.sessionId}\n          participant={participant}\n          muteAudio\n          mirror={mirror}\n          VideoPlaceholder={VideoPlaceholder}\n          ParticipantViewUI={ParticipantViewUI}\n        />\n      ))}\n    </div>\n  );\n};\n\nPip.displayName = 'PipLayout.Pip';\n", "import { ParticipantsAudio } from '../../Audio';\nimport { useRawRemoteParticipants } from '../hooks';\n\nexport const Host = () => {\n  const remoteParticipants = useRawRemoteParticipants();\n  return <ParticipantsAudio participants={remoteParticipants} />;\n};\n\nHost.displayName = 'PipLayout.Host';\n", "import { useCall, useI18n } from '@stream-io/video-react-bindings';\nimport { useEffect, useMemo, useState } from 'react';\nimport clsx from 'clsx';\nimport { hasScreenShare } from '@stream-io/video-client';\nimport { Icon, IconButton } from '../../../../components';\nimport {\n  DefaultParticipantViewUI,\n  ParticipantView,\n} from '../../ParticipantView';\nimport {\n  useFilteredParticipants,\n  usePaginatedLayoutSortPreset,\n} from '../hooks';\nimport { chunk } from '../../../../utilities';\nimport { PipLayoutProps } from './Pip';\n\ntype GridDensity = 'single' | 'small' | 'medium' | 'large' | 'overflow';\n\nexport type PipLayoutGridProps = PipLayoutProps & {\n  /**\n   * The number of participants to display per page.\n   * @default 9\n   */\n  groupSize?: number;\n\n  /**\n   * Whether to show pagination arrows when there are multiple pages.\n   * @default true\n   */\n  pageArrowsVisible?: boolean;\n};\n\nconst getGridDensity = (count: number): GridDensity => {\n  if (count === 1) return 'single';\n  if (count <= 5) return 'small';\n  if (count <= 9) return 'medium';\n  if (count <= 16) return 'large';\n  return 'overflow';\n};\n\n/**\n * A grid-based PIP layout with pagination support.\n * Use this when you need a more structured grid view in PIP mode.\n */\nexport const Grid = (props: PipLayoutGridProps) => {\n  const { t } = useI18n();\n  const {\n    excludeLocalParticipant = false,\n    filterParticipants,\n    mirrorLocalParticipantVideo = true,\n    groupSize = 9,\n    pageArrowsVisible = true,\n    VideoPlaceholder,\n    ParticipantViewUI = DefaultParticipantViewUI,\n  } = props;\n\n  const [page, setPage] = useState(0);\n  const [wrapperElement, setWrapperElement] = useState<HTMLDivElement | null>(\n    null,\n  );\n\n  const call = useCall();\n  const participants = useFilteredParticipants({\n    excludeLocalParticipant,\n    filterParticipants,\n  });\n  const screenSharingParticipant = participants.find((p) => hasScreenShare(p));\n\n  usePaginatedLayoutSortPreset(call);\n\n  useEffect(() => {\n    if (!wrapperElement || !call) return;\n    return call.setViewport(wrapperElement);\n  }, [wrapperElement, call]);\n\n  const participantGroups = useMemo(\n    () => chunk(participants, groupSize),\n    [participants, groupSize],\n  );\n\n  const pageCount = participantGroups.length;\n\n  if (page > pageCount - 1) {\n    setPage(Math.max(0, pageCount - 1));\n  }\n\n  const selectedGroup = participantGroups[page];\n  const mirror = mirrorLocalParticipantVideo ? undefined : false;\n\n  if (!call) return null;\n\n  return (\n    <div\n      className=\"str-video__pip-layout str-video__pip-layout--grid\"\n      ref={setWrapperElement}\n    >\n      {screenSharingParticipant &&\n        (screenSharingParticipant.isLocalParticipant ? (\n          <div className=\"str-video__pip-screen-share-local\">\n            <Icon icon=\"screen-share-off\" />\n            <span className=\"str-video__pip-screen-share-local__title\">\n              {t('You are presenting your screen')}\n            </span>\n          </div>\n        ) : (\n          <ParticipantView\n            participant={screenSharingParticipant}\n            trackType=\"screenShareTrack\"\n            muteAudio\n            mirror={false}\n            VideoPlaceholder={VideoPlaceholder}\n            ParticipantViewUI={ParticipantViewUI}\n          />\n        ))}\n      <div className=\"str-video__pip-layout__grid-container\">\n        {pageArrowsVisible && page > 0 && (\n          <IconButton\n            icon=\"caret-left\"\n            onClick={() =>\n              setPage((currentPage) => Math.max(0, currentPage - 1))\n            }\n            className=\"str-video__pip-layout__pagination-button str-video__pip-layout__pagination-button--left\"\n          />\n        )}\n        {selectedGroup && (\n          <div\n            className={clsx(\n              'str-video__pip-layout__grid',\n              `str-video__pip-layout__grid--${getGridDensity(selectedGroup.length)}`,\n            )}\n          >\n            {selectedGroup.map((participant) => (\n              <ParticipantView\n                key={participant.sessionId}\n                participant={participant}\n                muteAudio\n                mirror={mirror}\n                VideoPlaceholder={VideoPlaceholder}\n                ParticipantViewUI={ParticipantViewUI}\n              />\n            ))}\n          </div>\n        )}\n        {pageArrowsVisible && page < pageCount - 1 && (\n          <IconButton\n            icon=\"caret-right\"\n            onClick={() =>\n              setPage((currentPage) => Math.min(pageCount - 1, currentPage + 1))\n            }\n            className=\"str-video__pip-layout__pagination-button str-video__pip-layout__pagination-button--right\"\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nGrid.displayName = 'PipLayout.Grid';\n", "import { Pip } from './Pip';\nimport { Host } from './Host';\nimport { Grid } from './Grid';\n\nexport const PipLayout = { Pip, Host, Grid };\n", "import { PropsWithChildren, useEffect, useState } from 'react';\nimport { Call, CallingState } from '@stream-io/video-client';\nimport {\n  useCall,\n  useCallStateHooks,\n  useEffectEvent,\n  useStreamVideoClient,\n} from '@stream-io/video-react-bindings';\nimport {\n  BackstageLayout,\n  BackstageLayoutProps,\n  LivestreamLayout,\n  LivestreamLayoutProps,\n  StreamCall,\n} from '../../core';\n\nexport type LivestreamPlayerProps = {\n  /**\n   * The call type. Usually `livestream`.\n   */\n  callType: string;\n  /**\n   * The call ID.\n   */\n  callId: string;\n  /**\n   * Determines when the viewer joins the call.\n   *\n   * `\"asap\"` behavior means joining the call as soon as it is possible\n   * (either the `join_ahead_time_seconds` setting allows it, or the user\n   * has the capability to join backstage).\n   *\n   * `\"live\"` behavior means joining the call when it goes live.\n   *\n   * @default \"asap\"\n   */\n  joinBehavior?: 'asap' | 'live';\n  /**\n   * The props for the {@link LivestreamLayout} component.\n   */\n  layoutProps?: LivestreamLayoutProps;\n  /**\n   * The props for the {@link BackstageLayout} component.\n   */\n  backstageProps?: BackstageLayoutProps;\n  /**\n   * Callback to handle errors while fetching or joining livestream.\n   */\n  onError?: (error: any) => void;\n};\n\nexport const LivestreamPlayer = (\n  props: PropsWithChildren<LivestreamPlayerProps>,\n) => {\n  const { callType, callId, children, ...restProps } = props;\n  const client = useStreamVideoClient();\n  const [call, setCall] = useState<Call>();\n  const onError = useEffectEvent(props.onError ?? (() => {}));\n\n  useEffect(() => {\n    if (!client) return;\n    const myCall = client.call(callType, callId);\n    setCall(myCall);\n    myCall.get().catch((e) => {\n      console.error('Failed to fetch call', e);\n      onError(e);\n    });\n    return () => {\n      myCall.leave().catch((e) => {\n        console.error('Failed to leave call', e);\n      });\n      setCall(undefined);\n    };\n  }, [callId, callType, client]);\n\n  if (!call) {\n    return null;\n  }\n\n  return (\n    <StreamCall call={call}>\n      <LivestreamCall {...restProps} />\n      {children}\n    </StreamCall>\n  );\n};\n\nconst LivestreamCall = (props: {\n  joinBehavior?: 'asap' | 'live';\n  layoutProps?: LivestreamLayoutProps;\n  backstageProps?: BackstageLayoutProps;\n  onError?: (error: any) => void;\n}) => {\n  const call = useLivestreamCall(props);\n  const { useIsCallLive } = useCallStateHooks();\n  const isLive = useIsCallLive();\n\n  if (!call) return null;\n\n  if (isLive) {\n    return <LivestreamLayout {...props.layoutProps} />;\n  }\n\n  return <BackstageLayout {...props.backstageProps} />;\n};\n\nconst useLivestreamCall = (props: {\n  joinBehavior?: 'asap' | 'live';\n  onError?: (error: any) => void;\n}) => {\n  const call = useCall();\n  const { useIsCallLive, useOwnCapabilities } = useCallStateHooks();\n  const canJoinLive = useIsCallLive();\n  const canJoinEarly = useCanJoinEarly();\n  const canJoinBackstage =\n    useOwnCapabilities()?.includes('join-backstage') ?? false;\n  const canJoinAsap = canJoinLive || canJoinEarly || canJoinBackstage;\n  const joinBehavior = props.joinBehavior ?? 'asap';\n  const canJoin =\n    (joinBehavior === 'asap' && canJoinAsap) ||\n    (joinBehavior === 'live' && canJoinLive);\n  const onError = useEffectEvent(props.onError ?? (() => {}));\n\n  useEffect(() => {\n    if (call && call.state.callingState === CallingState.IDLE && canJoin) {\n      call.join().catch((e) => {\n        console.error('Failed to join call', e);\n        onError(e);\n      });\n    }\n  }, [call, canJoin]);\n\n  return call;\n};\n\nconst useCanJoinEarly = () => {\n  const { useCallStartsAt, useCallSettings } = useCallStateHooks();\n  const startsAt = useCallStartsAt();\n  const settings = useCallSettings();\n  const joinAheadTimeSeconds = settings?.backstage.join_ahead_time_seconds;\n  const [canJoinEarly, setCanJoinEarly] = useState(() =>\n    checkCanJoinEarly(startsAt, joinAheadTimeSeconds),\n  );\n\n  useEffect(() => {\n    if (!canJoinEarly) {\n      const handle = setInterval(() => {\n        setCanJoinEarly(checkCanJoinEarly(startsAt, joinAheadTimeSeconds));\n      }, 1000);\n\n      return () => clearInterval(handle);\n    }\n  }, [canJoinEarly, startsAt, joinAheadTimeSeconds]);\n\n  return canJoinEarly;\n};\n\nconst checkCanJoinEarly = (\n  startsAt: Date | undefined,\n  joinAheadTimeSeconds: number | undefined,\n) => {\n  if (!startsAt) {\n    return false;\n  }\n\n  return Date.now() >= +startsAt - (joinAheadTimeSeconds ?? 0) * 1000;\n};\n", "import { setSdkInfo, SfuModels } from '@stream-io/video-client';\n\nexport * from '@stream-io/video-client';\nexport * from '@stream-io/video-react-bindings';\n\nexport * from './src/core';\n\nexport * from './src/components';\nexport * from './src/wrappers';\nexport * from './src/translations';\nexport {\n  useHorizontalScrollPosition,\n  useVerticalScrollPosition,\n  useRequestPermission,\n  usePersistedDevicePreferences,\n  useDeviceList,\n  useModeration,\n} from './src/hooks';\nexport { applyFilter, type Filter } from './src/utilities/filter';\n\nconst [major, minor, patch] = (\n  process.env.PKG_VERSION || '0.0.0-development'\n).split('.');\n\nsetSdkInfo({\n  type: SfuModels.SdkType.REACT,\n  major,\n  minor,\n  patch,\n});\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoBO,IAAM,QAAQ,CAAC,EACpB,aACA,YAAY,cACZ,GAAG,KAAI,MACQ;AACf,QAAM,OAAO,QAAO;AACpB,QAAM,CAAC,cAAc,eAAe,QAAI,uBACtC,IAAI;AAEN,QAAM,EAAE,QAAQ,UAAS,IAAK;AAE9B,8BAAU,MAAK;AACb,QAAI,CAAC,QAAQ,CAAC;AAAc;AAC5B,UAAM,UAAU,KAAK,iBAAiB,cAAc,WAAW,SAAS;AACxE,WAAO,MAAK;AACV,gBAAO;IACT;EACF,GAAG,CAAC,MAAM,WAAW,cAAc,SAAS,CAAC;AAE7C,aACEA,wBAAA,SAAA,EACE,UAAQ,MAAA,GACJ,MACJ,KAAK,iBAAe,gBACN,QAAM,mBACH,WAAS,mBACT,UAAS,CAAA;AAGhC;AAEA,MAAM,cAAc;AC/Bb,IAAM,oBAAoB,CAAC,UAAiC;AACjE,QAAM,EAAE,cAAc,WAAU,IAAK;AACrC,aACEA,wBAAAA,6BAAAA,EAAAA,UACG,aAAa,IAAI,CAAC,gBAAe;AAChC,QAAI,YAAY;AAAoB,aAAO;AAC3C,UAAM,EAAE,aAAa,wBAAwB,UAAS,IAAK;AAE3D,UAAM,gBAAgB,SAAS,WAAW;AAC1C,UAAM,oBAAoB,iBAAiB,mBACzCA,wBAAC,OAAK,EAAA,GACA,YACJ,WAAU,cACV,YAAwB,CAAA;AAI5B,UAAM,2BAA2B,oBAAoB,WAAW;AAChE,UAAM,+BAA+B,4BACnC,8BACEA,wBAAC,OAAK,EAAA,GACA,YACJ,WAAU,yBACV,YAAwB,CAAA;AAI9B,eACEC,yBAACC,aAAAA,UAAQ,EAAA,UAAA,CACN,mBACA,4BAA4B,EAAA,GAFhB,SAAS;EAK5B,CAAC,EAAC,CAAA;AAGR;AAEA,kBAAkB,cAAc;IC/CnB,6BAAyB,4BAEpC,MAAS;AAEJ,IAAM,4BAA4B,UACvC,yBAAW,sBAAsB;ACL5B,IAAM,sBAAsB,CAAC,EAClC,aAAa,CAAA,GACb,WACA,UACA,QAAQ,aAAa,GAAE,MAGpB;AACH,QAAM,EACJ,MACA,GACA,GACA,QACA,UAAU,EAAE,cAAc,SAAQ,GAClC,QAAO,IACL,YAAY;IACd;IACA;IACA,YAAY;MACV,OAAO,UAAU;MACjB,MAAK;MACL,KAAI;MACJ,KAAK;QACH,SAAS;QACT,OAAO,CAAC,EAAE,iBAAiB,SAAQ,MAAM;AACvC,iBAAO,OAAO,SAAS,SAAS,OAAO;YACrC,WAAW,GAAG,eAAe;UAC9B,CAAA;QACH;OACD;MACD,GAAG;IACJ;EACF,CAAA;AAGD,8BAAU,MAAK;AACb,QAAI,CAAC,gBAAgB,CAAC;AAAU;AAEhC,UAAM,UAAU,WAAW,cAAc,UAAU,MAAM;AAEzD,WAAO,MAAM,QAAO;EACtB,GAAG,CAAC,cAAc,UAAU,MAAM,CAAC;AAEnC,SAAO,EAAE,MAAM,GAAG,GAAG,cAAc,UAAU,UAAU,QAAO;AAChE;ACtBA,IAAM,gBAAgB;IAOT,gCAAgC,CAC3C,MAAc,oCACN;AACR,QAAM,EACJ,iBACA,qBACA,oBACA,gBACA,gBAAe,IACb,kBAAiB;AACrB,QAAM,WAAW,gBAAe;AAChC,QAAM,eAAe,oBAAmB;AAExC,QAAM,kBAA6C,mBAAkB;AACrE,QAAM,cAAqC,eAAc;AACzD,QAAM,eAAuC,gBAAe;AAE5D,QAAM,CAAC,eAAe,gBAAgB,QAAI,uBAExC,MAAM;AAER,QAAM,OAAO,QAAO;AAKpB,QAAM,sBAAkB,qBAAoB,IAAI;AAChD,MAAI,QAAQ,gBAAgB,YAAY,MAAM;AAC5C,SAAK,OAAO,sBAAsB;AAClC,SAAK,WAAW,sBAAsB;AACtC,oBAAgB,UAAU;EAC5B;AAIA,8BAAU,MAAK;AACb,WAAO,MAAK;AACV,YAAM,cAAc,gBAAgB;AACpC,UAAI,aAAa;AACf,oBAAY,OAAO,sBAAsB;AACzC,oBAAY,WAAW,sBAAsB;AAC7C,wBAAgB,UAAU;MAC5B;IACF;EACF,GAAG,CAAC,IAAI,CAAC;AAIT,QAAM,gBAAgB,UAAU,OAAO,UAAU,YAAY,UAAU;AACvE,8BACE,SAAS,QAAK;AACZ,QACE,iBAAiB,aAAa,QAC9B,gBAAgB,QAAQ,WAAW,KAClC,MAAM,QAAQ,aAAa,KAAK,cAAc,WAAW,KAC1D,aAAa,QAAQ,WAAW,KAChC,CAAC,YACD,kBAAkB,QAClB;AACA;IACF;AAEA,qBAAiB,UAAU;AAE3B,KAAC,YAAW;AACV,YAAM,EAAE,OAAO,MAAK,IAAK;AACzB,iBAAW,CAAC,WAAW,OAAO,cAAc,iBAAiB,KAAK;QAChE,CAAC,cAAc,iBAAiB,CAAC,MAAM,gBAAgB,IAAI;QAC3D,CAAC,UAAU,aAAa,CAAC,MAAM,mBAAmB,MAAM,OAAO;QAC/D,CAAC,WAAW,cAAc,OAAO,IAAI;MAC7B,GAAE;AACV,cAAM,cAAc,4BAA4B,GAAG;AACnD,cAAM,aAAa,YAAY,SAAS;AACxC,cAAM,UACJ,MACA,SAAS;AAEX,cAAM,eAAe,aACjB,2BACE,SACA,CAAC,UAAU,EAAE,KAAI,GACjB,cAAc,WAAW,iBAAiB,CAAA,IAAK,MAAM,SACrD,iBAAiB,IAEnB,gBAAgB,SAAS,cAAc,iBAAiB;AAE5D,cAAM,aAAa,MAAM,CAAC,QAAO;AAC/B,kBAAQ,KACN,mBAAmB,SAAS,uBAC5B,GAAG;QAEP,CAAC;MACH;IACF,GAAC,EAAI,QAAQ,MACX,iBAAiB,CAAC,UAAW,UAAU,aAAa,YAAY,KAAM,CAAC;EAE3E,GACA;IACE;IACA;IACA;IACA;IACA;IACA;IACA,gBAAgB;IAChB;IACA;IACA,aAAa;EACd,CAAA;AAGH,8BACE,SAAS,UAAO;AACd,QAAI,iBAAiB,aAAa,QAAQ,kBAAkB,WAAW;AACrE;IACF;AAEA,eAAW,CAAC,WAAW,SAAS,gBAAgB,MAAM,KAAK;MACzD;QACE;QACA,iBAAiB,CAAA;QACjB,YAAY;QACZ,YAAY;MACb;MACD;QACE;QACA,gBAAgB;QAChB,gBAAgB;QAChB,gBAAgB;MACjB;MACD;QACE;QACA,aAAa;QACb,aAAa;QACb,aAAa;MACd;IACO,GAAE;AACV,UAAI;AACF,mCAA2B,KAAK,WAAW;UACzC;UACA;UACA;QACD,CAAA;MACH,SAAS,KAAK;AACZ,gBAAQ,KAAK,kBAAkB,SAAS,uBAAuB,GAAG;MACpE;IACF;EACF,GACA;IACE;IACA;IACA;IACA,YAAY;IACZ,YAAY;IACZ;IACA,gBAAgB;IAChB,gBAAgB;IAChB,gBAAgB;IAChB,aAAa;IACb,aAAa;IACb,aAAa;EACd,CAAA;AAEL;AAEA,IAAM,8BAA8B,CAAC,QAAuC;AAC1E,QAAM,iBAAiB,OAAO,aAAa,QAAQ,GAAG;AACtD,MAAI,cAAsC,CAAA;AAE1C,MAAI,gBAAgB;AAClB,QAAI;AACF,oBAAc,KAAK,MAAM,cAAc;AAEvC,UAAI,OAAO,OAAO,aAAa,KAAK,GAAG;AAErC,oBAAY,aACV,YACA;MACJ;IACF,QAAQ;IAER;EACF;AAEA,SAAO;AACT;AAEA,IAAM,6BAA6B,CACjC,KACA,WACA,UACQ;AACR,QAAM,cAAc,4BAA4B,GAAG;AACnD,QAAM,iBAAiB,4BACrB,MAAM,SACN,MAAM,cAAc;AAEtB,QAAM,oBAAoB,CAAC,YAAY,SAAS,KAAK,CAAA,CAAE,EACpD,KAAI,EACJ,OACC,CAAC,MACC,EAAE,qBAAqB,eAAe,qBACrC,EAAE,wBAAwB,MACzB,EAAE,wBAAwB,eAAe,oBAAoB;AAGrE,SAAO,aAAa,QAClB,KACA,KAAK,UAAU;IACb,GAAG;IACH,KAAK;;IACL,CAAC,SAAS,GAAG;MACX;QACE,GAAG;QACH,OAAO,MAAM;MACkB;MACjC,GAAG;IACJ,EAAC,MAAM,GAAG,CAAC;EACb,CAAA,CAAC;AAEN;AAEA,IAAM,6BAA6B,OACjC,SACA,YACA,SACA,sBACiB;AACjB,MAAI;AAEJ,aAAW,KAAK,YAAY;AAC1B,cAAA,QAAU,EAAE;AAEZ,QAAI,EAAE,qBAAqB,eAAe;AACxC;IACF;AAEA,UAAM,SACJ,QAAQ,KAAK,CAAC,MAAM,EAAE,aAAa,EAAE,gBAAgB,KACrD,QAAQ,KAAK,CAAC,MAAM,EAAE,UAAU,EAAE,mBAAmB;AAEvD,QAAI,QAAQ;AACV,UAAI,CAAC,QAAQ,MAAM,gBAAgB;AACjC,cAAM,QAAQ,OAAO,OAAO,QAAQ;MACtC;AAEA,cAAQ,EAAE;AACV;IACF;EACF;AAEA,MAAI,OAAO,UAAU,WAAW;AAC9B,UAAM,gBAAgB,SAAS,OAAO,iBAAiB;EACzD;AACF;AAEA,IAAM,kBAAkB,OACtB,SACA,OACA,sBACE;AACF,MAAI,qBAAqB,CAAC,QAAQ,MAAM,QAAQ;AAC9C,UAAM,QAAQ,QAAQ,YAAY,QAAQ,IAAC;EAC7C;AACF;AAEA,IAAM,8BAA8B,CAClC,SACA,oBAC6E;EAC7E,kBAAkB,kBAAkB;EACpC,qBACE,SAAS,KAAK,CAAC,MAAM,EAAE,aAAa,cAAc,GAAG,SAAS;AACjE;ACvTD,IAAM,mBAAmB;AAMlB,IAAM,4BAA4B,CACvC,eACA,YAAoB,qBAClB;AACF,QAAM,CAAC,gBAAgB,iBAAiB,QAAI,uBAE1C,IAAI;AAEN,8BAAU,MAAK;AACb,QAAI,CAAC;AAAe;AAEpB,UAAM,gBAAgB,MAAK;AACzB,YAAM,UAAU;AAEhB,YAAM,uBAAuB,QAAQ,eAAe,QAAQ;AAE5D,UAAI,CAAC;AAAsB,eAAO,kBAAkB,IAAI;AAExD,YAAM,aAAa,QAAQ,aAAa;AACxC,UAAI;AAAY,eAAO,kBAAkB,KAAK;AAE9C,YAAM,gBACJ,KAAK,IACH,QAAQ,eAAe,QAAQ,YAAY,QAAQ,YAAY,KAC5D;AAEP,UAAI;AAAe,eAAO,kBAAkB,QAAQ;AAEpD,wBAAkB,SAAS;IAC7B;AAEA,UAAM,iBAAiB,IAAI,eAAe,aAAa;AACvD,mBAAe,QAAQ,aAAa;AAEpC,kBAAc,iBAAiB,UAAU,aAAa;AACtD,WAAO,MAAK;AACV,oBAAc,oBAAoB,UAAU,aAAa;AACzD,qBAAe,WAAU;IAC3B;EACF,GAAG,CAAC,eAAe,SAAS,CAAC;AAE7B,SAAO;AACT;AAEO,IAAM,8BAA8B,CACzC,eACA,YAAoB,qBAClB;AACF,QAAM,CAAC,gBAAgB,iBAAiB,QAAI,uBAE1C,IAAI;AAEN,8BAAU,MAAK;AACb,QAAI,CAAC;AAAe;AAEpB,UAAM,gBAAgB,MAAK;AACzB,YAAM,UAAU;AAEhB,YAAM,yBAAyB,QAAQ,cAAc,QAAQ;AAE7D,UAAI,CAAC;AAAwB,eAAO,kBAAkB,IAAI;AAE1D,YAAM,eAAe,QAAQ,cAAc;AAC3C,UAAI;AAAc,eAAO,kBAAkB,OAAO;AAElD,YAAM,aACJ,KAAK,IACH,QAAQ,cAAc,QAAQ,aAAa,QAAQ,WAAW,KAC3D;AAEP,UAAI;AAAY,eAAO,kBAAkB,KAAK;AAE9C,wBAAkB,SAAS;IAC7B;AAEA,UAAM,iBAAiB,IAAI,eAAe,aAAa;AACvD,mBAAe,QAAQ,aAAa;AAEpC,kBAAc,iBAAiB,UAAU,aAAa;AACtD,WAAO,MAAK;AACV,oBAAc,oBAAoB,UAAU,aAAa;AACzD,qBAAe,WAAU;IAC3B;EACF,GAAG,CAAC,eAAe,SAAS,CAAC;AAE7B,SAAO;AACT;AC1FO,IAAM,uBAAuB,CAAC,eAA6B;AAChE,QAAM,OAAO,QAAO;AACpB,QAAM,EAAE,kBAAiB,IAAK,kBAAiB;AAC/C,QAAM,gBAAgB,kBAAkB,UAAU;AAClD,QAAM,CAAC,sBAAsB,uBAAuB,QAAI,uBAAS,KAAK;AAEtE,8BAAU,MAAK;AACb,UAAM,QAAQ,MAAM,wBAAwB,KAAK;AAEjD,QAAI;AAAe,YAAK;EAC1B,GAAG,CAAC,aAAa,CAAC;AAElB,QAAM,wBAAoB,0BAAY,YAAW;AAC/C,QAAI;AAAe,aAAO;AAE1B,UAAM,uBACJ,CAAC,CAAC,MAAM,mBAAmB,WAAW,UAAU;AAClD,QAAI,wBAAwB,CAAC;AAAsB,aAAO;AAE1D,4BAAwB,IAAI;AAE5B,QAAI;AACF,YAAM,MAAM,mBAAmB;QAC7B,aAAa,CAAC,UAAU;MACzB,CAAA;IACH,SAAS,OAAO;AACd,8BAAwB,KAAK;AAC7B,YAAM,IAAI,MAAM,6BAA6B,KAAK,EAAE;IACtD;AAEA,WAAO;EACT,GAAG,CAAC,MAAM,eAAe,sBAAsB,UAAU,CAAC;AAE1D,SAAO;IACL;IACA;IACA,sBAAsB,CAAC,CAAC,MAAM,mBAAmB,WAAW,UAAU;IACtE;;AAEJ;AC3BM,SAAU,cACd,SACA,kBAAoC;AAMpC,QAAM,EAAE,EAAC,IAAK,QAAO;AAErB,aAAO,sBAAQ,MAAK;AAClB,QAAI,qBAA4C;AAChD,QAAI,gBAA+B;AAEnC,UAAM,aAA+B,QAAQ,IAAI,CAAC,GAAG,MAAK;AACxD,YAAM,aAAa,EAAE,aAAa;AAClC,YAAM,SAAS,EAAE,UAAU,EAAE,UAAU,OAAO,EAAE,OAAO,WAAU;AAEjE,UAAI,YAAY;AACd,6BAAqB;AACrB,wBAAgB;MAClB;AAEA,aAAO;IACT,CAAC;AAED,QAAI,uBAAuB,QAAQ,kBAAkB,MAAM;AACzD,YAAMC,iBAAgB;QACpB,UAAU;QACV,OAAO,EAAE,SAAS;QAClB,YAAY;;AAGd,2BAAqBA;AACrB,sBAAgB;AAChB,iBAAW,QAAQA,cAAa;IAClC;AAEA,WAAO,EAAE,YAAY,oBAAoB,cAAa;EACxD,GAAG,CAAC,SAAS,kBAAkB,CAAC,CAAC;AACnC;AClDA,IAAM,oCAAoC,MAAc;AACtD,MACE,OAAO,WAAW,eAClB,OAAO,oBAAoB,eAC3B,OAAO,eAAe,eACtB,CAAC,OAAO,wBACR;AACA,WAAO;EACT;AAEA,MAAI;AACF,UAAM,SAAS,IAAI,gBAAgB,GAAG,CAAC;AACvC,WAAO,CAAC,CAAC,OAAO,WAAW,UAAU;MACnC,OAAO;MACP,WAAW;MACX,gBAAgB;IACjB,CAAA;EACH,QAAQ;AACN,WAAO;EACT;AACF;AAUO,IAAM,gBAAgB,CAAC,YAA+B;AAC3D,QAAM,EAAE,WAAW,IAAI,IAAK,WAAW,CAAA;AAEvC,QAAM,OAAO,QAAO;AAEpB,QAAM,iBAAa,qBAA6C,IAAI;AACpE,QAAM,mBAAe,qBAAgD,IAAI;AACzE,QAAM,oBAAgB,qBAAqC,IAAI;AAE/D,QAAM,wBAAoB,qBAA2C,IAAI;AAKzE,QAAM,gCAA4B,0BAAY,MAAK;AACjD,QAAI,CAAC,kBAAkB,SAAS;AAC9B,wBAAkB,UAAU,OAAO,wBAA8B,EAC9D,KAAK,CAAC,WAAW,OAAO,cAAc,EACtC,MAAM,CAAC,UAAS;AACf,gBAAQ,MAAM,8CAA8C,KAAK;AACjE,cAAM;MACR,CAAC;IACL;AAEA,WAAO,kBAAkB;EAC3B,GAAG,CAAA,CAAE;AAEL,QAAM,kBAAc,0BAAY,MAAK;AACnC,QAAI,WAAW,SAAS;AACtB,mBAAa,WAAW,OAAO;AAC/B,iBAAW,UAAU;IACvB;AAEA,kBACG,UAAO,EACP,MAAM,CAAC,QAAQ,QAAQ,MAAM,kCAAkC,GAAG,CAAC;AAEtE,kBAAc,UAAU;EAC1B,GAAG,CAAA,CAAE;AAEL,QAAM,qBAAiB,0BAAY,YAAW;AAC5C,QAAI;AACF,YAAM,MAAM,OAAO,QAAO;IAC5B,SAAS,OAAO;AACd,cAAQ,MAAM,0CAA0C,KAAK;IAC/D;EACF,GAAG,CAAC,IAAI,CAAC;AAET,8BAAU,MAAK;AACb,QAAI,CAAC;AAAM;AAEX,WAAO,KAAK,GAAG,2BAA2B,YAAW;AACnD,UAAI;AACF,cAAM,0BAAyB;MACjC,SAAS,WAAW;AAClB,gBAAQ,MAAM,8CAA8C,SAAS;MACvE;IACF,CAAC;EACH,GAAG,CAAC,MAAM,yBAAyB,CAAC;AAEpC,8BAAU,MAAK;AACb,QAAI,CAAC;AAAM;AAEX,WAAO,KAAK,GAAG,wBAAwB,YAAW;AAChD,UAAI,cAAc;AAAS;AAE3B,UAAI;AAEJ,UAAI;AACF,8BAAsB,MAAM,0BAAyB;MACvD,SAAS,WAAW;AAClB,gBAAQ,MAAM,8CAA8C,SAAS;AACrE,cAAM,eAAc;AACpB;MACF;AAEA,UAAI,CAAC,kCAAiC,GAAI;AACxC,gBAAQ,KAAK,kDAAkD;AAC/D,cAAM,eAAc;AACpB;MACF;AAEA,YAAM,EAAE,WAAU,IAAK,KAAK,OAAO,eAAe,CAAC,gBAAe;AAChE,sBAAc,UAAU;AAExB,cAAM,gBAAgB,IAAI,QACxB,OAAO,SAAS,WAAU;AACxB,gBAAM,CAAC,KAAK,IAAI,YAAY,eAAc;AAE1C,cAAI;AAEJ,cAAI;AACF,wBAAY,IAAI,oBAAoB,KAAK;AACzC,yBAAa,UAAU;AAEvB,kBAAM,SAAS,MAAM,UAAU,MAAK;AACpC,kBAAM,SAAS,IAAI,YAAY,CAAC,MAAM,CAAC;AACvC,oBAAQ,MAAM;AAEd,gBAAI,WAAW,GAAG;AAChB,yBAAW,UAAU,WAAW,aAAa,QAAQ;YACvD;UACF,SAAS,OAAO;AACd,mBAAO,KAAK;AACZ,oBAAQ,MAAM,uCAAuC,KAAK;AAE1D,kBAAM,cAAc,UAAO;AAC3B,0BAAc,UAAU;AACxB,yBAAa,UAAU;AAEvB,kBAAM,eAAc;AACpB;UACF;QACF,CAAC;AAGH,eAAO;UACL,QAAQ;UACR,MAAM,MAAK;AACT,gBAAI,aAAa,SAAS;AACxB,2BAAa,QAAQ,KAAI;AACzB,2BAAa,UAAU;YACzB;UACF;;MAEJ,CAAC;IACH,CAAC;EACH,GAAG,CAAC,MAAM,2BAA2B,aAAa,gBAAgB,QAAQ,CAAC;AAE3E,8BAAU,MAAM,aAAa,CAAC,WAAW,CAAC;AAC5C;SCvIgB,gBACd,SACA,UAA+B,CAAA,GAAE;AAEjC,QAAM,eAAW,qBAAwB;IACvC,YAAY;IACZ,iBAAiB;IACjB,OAAO;IACP,OAAO;IACP,WAAW;IACX,WAAW;IACX,OAAO;IACP,QAAQ;IACR,QAAQ;EACT,CAAA;AAED,8BAAU,MAAK;AACb,QAAI,CAAC,WAAW,CAAC,QAAQ;AAAS;AAElC,UAAM,EAAE,QAAQ,MAAM,cAAc,KAAK,gBAAgB,EAAC,IAAK;AAE/D,UAAM,QAAQ,SAAS;AAEvB,UAAM,eAAe,MAAK;AACxB,UAAI,MAAM,OAAO;AACf,6BAAqB,MAAM,KAAK;AAChC,cAAM,QAAQ;MAChB;AACA,YAAM,YAAY;AAClB,YAAM,YAAY;IACpB;AAEA,UAAM,eAAe,MAAK;AACxB,YAAM,aAAa;AACnB,YAAM,aAAa;AAEnB,cAAQ,cAAc,MAAM;AAC5B,cAAQ,aAAa,MAAM;AAE3B,UACE,KAAK,IAAI,MAAM,SAAS,IAAI,eAC5B,KAAK,IAAI,MAAM,SAAS,IAAI,aAC5B;AACA,cAAM,QAAQ;AACd;MACF;AAEA,YAAM,QAAQ,sBAAsB,YAAY;IAClD;AAEA,UAAM,gBAAgB,CAAC,MAAmB;AACxC,UAAI,EAAE,gBAAgB;AAAS;AAE/B,mBAAY;AAEZ,YAAM,aAAa;AACnB,YAAM,kBAAkB;AAExB,YAAM,QAAQ,EAAE;AAChB,YAAM,QAAQ,EAAE;AAChB,YAAM,SAAS,EAAE;AACjB,YAAM,SAAS,EAAE;IACnB;AAEA,UAAM,gBAAgB,CAAC,MAAmB;AACxC,UAAI,EAAE,gBAAgB;AAAS;AAE/B,UAAI,CAAC,MAAM;AAAiB;AAE5B,YAAM,KAAK,EAAE,UAAU,MAAM;AAC7B,YAAM,KAAK,EAAE,UAAU,MAAM;AAE7B,UAAI,CAAC,MAAM,cAAc,KAAK,MAAM,IAAI,EAAE,IAAI,eAAe;AAC3D,cAAM,aAAa;AACnB,UAAE,eAAc;MAClB;AAEA,UAAI,CAAC,MAAM;AAAY;AAEvB,YAAM,SAAS,EAAE,UAAU,MAAM;AACjC,YAAM,SAAS,EAAE,UAAU,MAAM;AAEjC,cAAQ,cAAc;AACtB,cAAQ,aAAa;AAErB,YAAM,YAAY;AAClB,YAAM,YAAY;AAElB,YAAM,QAAQ,EAAE;AAChB,YAAM,QAAQ,EAAE;IAClB;AAEA,UAAM,sBAAsB,MAAK;AAC/B,YAAM,cAAc,MAAM;AAE1B,YAAM,aAAa;AACnB,YAAM,kBAAkB;AAExB,YAAM,QAAQ;AACd,YAAM,QAAQ;AACd,YAAM,SAAS;AACf,YAAM,SAAS;AAEf,UAAI,CAAC,aAAa;AAChB,qBAAY;AACZ;MACF;AAEA,UAAI,KAAK,MAAM,MAAM,WAAW,MAAM,SAAS,IAAI,aAAa;AAC9D,qBAAY;AACZ;MACF;AAEA,YAAM,QAAQ,sBAAsB,YAAY;IAClD;AAEA,YAAQ,iBAAiB,eAAe,aAAa;AACrD,YAAQ,iBAAiB,eAAe,aAAa;AACrD,WAAO,iBAAiB,aAAa,mBAAmB;AACxD,WAAO,iBAAiB,iBAAiB,mBAAmB;AAE5D,WAAO,MAAK;AACV,cAAQ,oBAAoB,eAAe,aAAa;AACxD,cAAQ,oBAAoB,eAAe,aAAa;AACxD,aAAO,oBAAoB,aAAa,mBAAmB;AAC3D,aAAO,oBAAoB,iBAAiB,mBAAmB;AAE/D,mBAAY;IACd;EACF,GAAG,CAAC,SAAS,OAAO,CAAC;AACvB;ICzIY;CAAZ,SAAYC,iBAAc;AACxB,EAAAA,gBAAA,QAAA,IAAA;AACA,EAAAA,gBAAA,MAAA,IAAA;AACF,GAHY,mBAAA,iBAAc,CAAA,EAAA;AAqB1B,IAAM,kBAAc,4BAAgC,CAAA,CAAE;AAK/C,IAAM,iBAAiB,MAAuB;AACnD,aAAO,yBAAW,WAAW;AAC/B;AAEA,IAAM,aAAa,CAAC,EAClB,UACA,KAAI,MAGA;AACJ,QAAM,CAAC,YAAY,aAAa,QAAI,uBAAgC,IAAI;AAExE,aACEH,yBAAAI,6BAAA,EAAA,UAAA,KACEL,wBAAA,OAAA,EAAK,KAAK,eAAe,WAAU,oBAAmB,CAAA,OACtDA,wBAAC,iBAAe,EAAA,cACdA,wBAAC,gBAAc,EAAC,MAAM,YAAU,cAC9BA,wBAAA,OAAA,EAAK,WAAU,6BAA4B,KAAK,KAAK,aAAW,SACrD,CAAA,EACL,CAAA,EACS,CAAA,CACD,EAAA,CAAA;AAGxB;AAEO,IAAM,aAAa,CAAwB,EAChD,cAAAM,eACA,YAAY,aACZ,WAAW,YACX,QAAAC,SACA,aAAa,eAAe,MAC5B,UACA,SAAQ,MACe;AACvB,QAAM,CAAC,WAAW,YAAY,QAAI,uBAAS,KAAK;AAChD,QAAM,oBAAgB,qBAAO,QAAQ;AACrC,gBAAc,UAAU;AAExB,QAAM,EAAE,UAAU,cAAc,MAAM,GAAG,EAAC,IAAK,oBAAoB;IACjE;IACA;IACA,QAAAA;EACD,CAAA;AAED,8BAAU,MAAK;AACb,UAAM,iBAAiB,cAAc;AAErC,UAAM,cAAc,CAAC,UAAqB;AACxC,UAAI,CAAC,YAAY,cAAc,SAAS,MAAM,MAAc,GAAG;AAC7D,qBAAa,IAAI;AACjB,sBAAc,UAAU,IAAI;MAC9B,WAAW,YAAY,CAAC,UAAU,SAAS,MAAM,MAAc,GAAG;AAChE,qBAAa,KAAK;AAClB,sBAAc,UAAU,KAAK;MAC/B;IACF;AAEA,UAAM,gBAAgB,CAAC,UAAwB;AAC7C,UACE,MAAM;MACN,MAAM,IAAI,YAAW,MAAO,YAC5B,CAAC,MAAM,UACP,CAAC,MAAM,SACP;AACA,qBAAa,KAAK;AAClB,sBAAc,UAAU,KAAK;MAC/B;IACF;AACA,oBAAgB,iBAAiB,SAAS,aAAa,EAAE,SAAS,KAAI,CAAE;AACxE,oBAAgB,iBAAiB,WAAW,aAAa;AACzD,WAAO,MAAK;AACV,sBAAgB,oBAAoB,SAAS,aAAa;QACxD,SAAS;MACV,CAAA;AACD,sBAAgB,oBAAoB,WAAW,aAAa;IAC9D;EACF,GAAG,CAAC,UAAU,YAAY,CAAC;AAE3B,aACEN,yBAAAI,6BAAA,EAAA,UAAA,CACG,iBACCL,wBAAC,YAAY,UAAQ,EAAC,OAAO,EAAE,OAAO,MAAM,aAAa,KAAK,EAAC,GAAE,UAC9D,eAAe,eAAe,aAC7BA,wBAAC,YAAU,EAAC,MAAY,SAAkB,CAAA,IACxC,eAAe,eAAe,WAChCA,wBAAA,OAAA,EACE,WAAU,6BACV,KAAK,KAAK,aACV,OAAO;IACL,UAAU;IACV,KAAK,KAAK;IACV,MAAM,KAAK;IACX,WAAW;EACZ,GACD,MAAK,QACL,SAAkB,CAAA,IAElB,KAAI,CAAA,OAGZA,wBAACM,eAAY,EAAC,WAAsB,KAAK,KAAK,aAAY,CAAA,CAAI,EAAA,CAAA;AAGpE;ACxJO,IAAM,cAAc,CAAC,EAC1B,UACA,YAAW,MAGP;AACJ,QAAM,UAAM,qBAAyB,IAAI;AACzC,aACEN,wBAAA,MAAA,EACE,WAAU,2BACV,KACA,SAAS,CAAC,MAAK;AACb,QACE,eACA,EAAE,WAAW,IAAI,WACjB,IAAI,SAAS,SAAS,EAAE,MAAc,GACtC;AACA,kBAAY,CAAC;IACf;EACF,GAAC,SAEQ,CAAA;AAGf;AAEO,IAAM,wBAAwB,CAAC,EACpC,UACA,GAAG,KAAI,MACmC;AAC1C,aACEA,wBAAA,MAAA,EAAI,WAAU,iCAA+B,cAC3CA,wBAAA,UAAA,EAAA,GAAY,MAAI,SAAW,CAAA,EAAU,CAAA;AAG3C;AC9BO,IAAM,OAAO,CAAC,EAAE,WAAW,KAAI,UACpCA,wBAAA,QAAA,EACE,WAAW,aACT,mBACA,QAAQ,oBAAoB,IAAI,IAChC,SAAS,EACV,CAAA;ACXC,SAAU,yBAAyB,cAA+B;AACtE,QAAM,CAAC,OAAO,QAAQ,QAAI,uBACxB,SAAS,4BAA4B,YAAY;AAGnD,MAAI,CAAC,gBAAgB;AAAO,aAAS,KAAK;AAE1C,8BAAU,MAAK;AACb,QAAI,CAAC;AAAc;AAEnB,UAAM,YAAY,MAAK;AACrB,eAAS,SAAS,4BAA4B,YAAY;IAC5D;AAEA,iBAAa,iBAAiB,yBAAyB,SAAS;AAChE,iBAAa,iBAAiB,yBAAyB,SAAS;AAEhE,WAAO,MAAK;AACV,mBAAa,oBAAoB,yBAAyB,SAAS;AACnE,mBAAa,oBAAoB,yBAAyB,SAAS;IACrE;EACF,GAAG,CAAC,YAAY,CAAC;AAEjB,SAAO;AACT;ACRO,IAAM,gCAAgC,MAAK;AAChD,QAAM,EAAE,aAAa,wBAAwB,aAAY,IACvD,0BAAyB;AAC3B,QAAM,CAAC,kBAAkB,mBAAmB,QAAI,uBAC9C,CAAC,CAAC,SAAS,iBAAiB;AAE9B,QAAM,OAAO,QAAO;AACpB,QAAM,QAAQ,yBAAyB,gBAAgB,MAAS;AAChE,QAAM,EAAE,EAAC,IAAK,QAAO;AAErB,QAAM,EAAE,KAAK,WAAW,OAAM,IAAK;AAEnC,QAAM,gBAAgB,SAAS,WAAW;AAC1C,QAAM,gBAAgB,SAAS,WAAW;AAC1C,QAAM,sBAAsB,eAAe,WAAW;AACtD,QAAM,2BAA2B,oBAAoB,WAAW;AAEhE,QAAM,YAAY,MAAM,MAAM,UAAU,MAAM;AAC9C,QAAM,WAAW,MAAM,MAAM,SAAS,EAAE,SAAS,OAAM,CAAE;AACzD,QAAM,YAAY,MAAM,MAAM,SAAS,QAAQ,OAAO;AACtD,QAAM,YAAY,MAAM,MAAM,SAAS,QAAQ,OAAO;AACtD,QAAM,kBAAkB,MAAM,MAAM,SAAS,QAAQ,aAAa;AAClE,QAAM,uBAAuB,MAC3B,MAAM,SAAS,QAAQ,mBAAmB;AAE5C,QAAM,kBAAkB,CAAC,eAAuB,MAAK;AACnD,UAAM,sBAAsB;MAC1B,SAAS;MACT,mBAAmB,CAAC,UAAU;IAC/B,CAAA;EACH;AAEA,QAAM,mBAAmB,CAAC,eAAuB,MAAK;AACpD,UAAM,sBAAsB;MAC1B,SAAS;MACT,oBAAoB,CAAC,UAAU;IAChC,CAAA;EACH;AAEA,QAAM,uBAAuB,MAAK;AAChC,QAAI,KAAK;AACP,YAAM,MAAM,SAAS;IACvB,OAAO;AACL,YAAM,IAAI,SAAS;IACrB;EACF;AAEA,QAAM,iBAAiB,MAAK;AAC1B,UACI,eAAe,EAAE,SAAS,QAAQ,YAAY,UAAS,CAAE,EAC1D,MAAM,CAAC,QAAO;AACb,cAAQ,MAAM,6BAA6B,MAAM,IAAI,GAAG;IAC1D,CAAC;EACL;AAEA,QAAM,mBAAmB,MAAK;AAC5B,UACI,iBAAiB,EAAE,SAAS,QAAQ,YAAY,UAAS,CAAE,EAC5D,MAAM,CAAC,QAAO;AACb,cAAQ,MAAM,+BAA+B,MAAM,IAAI,GAAG;IAC5D,CAAC;EACL;AAEA,QAAM,uBAAuB,MAAK;AAChC,QAAI,CAAC,kBAAkB;AACrB,aAAO,wBAAwB,kBAAiB,EAAG,MAAM,QAAQ,KAAK;IACxE;AACA,WAAO,SAAS,eAAc,EAAG,MAAM,QAAQ,KAAK;EACtD;AAEA,8BAAU,MAAK;AAGb,UAAM,yBAAyB,MAAK;AAClC,0BAAoB,CAAC,CAAC,SAAS,iBAAiB;IAClD;AACA,aAAS,iBAAiB,oBAAoB,sBAAsB;AACpE,WAAO,MAAK;AACV,eAAS,oBAAoB,oBAAoB,sBAAsB;IACzE;EACF,GAAG,CAAA,CAAE;AAEL,QAAM,yBAAyB,MAAK;AAClC,QAAI,gBAAgB,CAAC,OAAO;AAC1B,aAAO,aACJ,wBAAuB,EACvB,MAAM,QAAQ,KAAK;IACxB;AAEA,WAAO,SAAS,qBAAoB,EAAG,MAAM,QAAQ,KAAK;EAC5D;AAEA,QAAM,EAAE,MAAK,IAAK,eAAc,KAAM,CAAA;AACtC,aACEC,yBAAC,aAAW,EAAC,aAAa,OAAK,UAAA,KAC7BA,yBAAC,uBAAqB,EACpB,SAAS,sBACT,UAAU,OAAO,CAAC,IAAI,YAAU,UAAA,KAEhCD,wBAAC,MAAI,EAAC,MAAK,MAAK,CAAA,GACf,MAAM,EAAE,OAAO,IAAI,EAAE,KAAK,CAAC,EAAA,CAAA,OAE9BC,yBAAC,YAAU,EAAC,gBAAgB,CAAC,cAAc,gBAAgB,GAAC,UAAA,KAC1DA,yBAAC,uBAAqB,EACpB,SAAS,gBACT,UAAU,OAAO,CAAC,IAAI,YAAU,UAAA,KAEhCD,wBAAC,MAAI,EAAC,MAAK,MAAK,CAAA,GACf,EAAE,kBAAkB,CAAC,EAAA,CAAA,OAExBC,yBAAC,uBAAqB,EACpB,SAAS,kBACT,UAAU,CAAC,OAAO,IAAI,YAAU,UAAA,KAEhCD,wBAAC,MAAI,EAAC,MAAK,MAAK,CAAA,GACf,EAAE,oBAAoB,CAAC,EAAA,CAAA,CACF,EAAA,CAAA,OAE1BA,wBAAC,YAAU,EAAC,gBAAgB,CAAC,cAAc,WAAW,GAAC,cACrDC,yBAAC,uBAAqB,EAAC,SAAS,WAAS,UAAA,KACvCD,wBAAC,MAAI,EAAC,MAAK,cAAa,CAAA,GACvB,EAAE,OAAO,CAAC,EAAA,CAAA,EACW,CAAA,OAE1BA,wBAAC,YAAU,EAAC,gBAAgB,CAAC,cAAc,SAAS,GAAC,cACnDC,yBAAC,uBAAqB,EAAC,SAAS,UAAQ,UAAA,KACtCD,wBAAC,MAAI,EAAC,MAAK,YAAW,CAAA,GACrB,EAAE,MAAM,CAAC,EAAA,CAAA,EACY,CAAA,OAE1BC,yBAAC,YAAU,EAAC,gBAAgB,CAAC,cAAc,UAAU,GAAC,UAAA,CACnD,qBACCA,yBAAC,uBAAqB,EAAC,SAAS,WAAS,UAAA,KACvCD,wBAAC,MAAI,EAAC,MAAK,qBAAoB,CAAA,GAC9B,EAAE,gBAAgB,CAAC,EAAA,CAAA,GAGvB,2BACCC,yBAAC,uBAAqB,EAAC,SAAS,iBAAe,UAAA,KAC7CD,wBAAC,MAAI,EAAC,MAAK,mBAAkB,CAAA,GAC5B,EAAE,uBAAuB,CAAC,EAAA,CAAA,GAG9B,qBACCC,yBAAC,uBAAqB,EAAC,SAAS,WAAS,UAAA,KACvCD,wBAAC,MAAI,EAAC,MAAK,WAAU,CAAA,GACpB,EAAE,YAAY,CAAC,EAAA,CAAA,GAGnB,gCACCC,yBAAC,uBAAqB,EAAC,SAAS,sBAAoB,UAAA,KAClDD,wBAAC,MAAI,EAAC,MAAK,WAAU,CAAA,GACpB,EAAE,yBAAyB,CAAC,EAAA,CAAA,CAEhC,EAAA,CAAA,GAEF,0BACC,OAAO,uBAAuB,sBAAsB,mBAClDA,wBAAC,uBAAqB,EAAC,SAAS,sBAAoB,UACjD,EAAE,8BAA8B;IAC/B,WAAW,mBAAmB,EAAE,OAAO,IAAI,EAAE,OAAO;GACrD,EAAC,CAAA,GAGP,gBAAgB,SAAS,+BACxBA,wBAAC,uBAAqB,EAAC,SAAS,wBAAsB,UACnD,EAAE,sCAAsC;IACvC,WAAW,QAAQ,EAAE,OAAO,IAAI,EAAE,OAAO;EAC1C,CAAA,EAAC,CAAA,OAGNC,yBAAC,YAAU,EAAC,gBAAgB,CAAC,cAAc,uBAAuB,GAAC,UAAA,KACjED,wBAAC,uBAAqB,EACpB,SAAS,gBAAgB,cAAc,UAAU,GAAC,UAEjD,EAAE,aAAa,EAAC,CAAA,OAEnBA,wBAAC,uBAAqB,EACpB,SAAS,gBAAgB,cAAc,UAAU,GAAC,UAEjD,EAAE,aAAa,EAAC,CAAA,OAEnBA,wBAAC,uBAAqB,EACpB,SAAS,gBAAgB,cAAc,WAAW,GAAC,UAElD,EAAE,sBAAsB,EAAC,CAAA,OAG5BA,wBAAC,uBAAqB,EACpB,SAAS,iBAAiB,cAAc,UAAU,GAAC,UAElD,EAAE,eAAe,EAAC,CAAA,OAErBA,wBAAC,uBAAqB,EACpB,SAAS,iBAAiB,cAAc,UAAU,GAAC,UAElD,EAAE,eAAe,EAAC,CAAA,OAErBA,wBAAC,uBAAqB,EACpB,SAAS,iBAAiB,cAAc,WAAW,GAAC,UAEnD,EAAE,wBAAwB,EAAC,CAAA,CACN,EAAA,CAAA,CACb,EAAA,CAAA;AAGnB;AC9NO,IAAM,kBAAkB,CAC7B,uBAC0C;AAC1C,SAAO,uBAAuB,OAC1B,QACA,KAAC,6BAAe,kBAAkB;AACxC;ACRO,IAAM,QAAQ,CAAsB,OAAUQ,UAAgB;AACnE,QAAM,aAAa,KAAK,KAAK,MAAM,SAASA,KAAI;AAEhD,SAAO,MAAM,KACX,EAAE,QAAQ,WAAU,GACpB,CAAC,GAAG,UAAU,MAAM,MAAMA,QAAO,OAAOA,QAAO,QAAQA,KAAI,CAAM;AAErE;ACLO,IAAM,oBAAoB,CAC/B,KACA,YACE;AACF,MAAI,CAAC;AAAK;AAEV,MAAI,OAAO,QAAQ;AAAY,WAAO,IAAI,OAAO;AAEjD,MAAI,UAAU;AAChB;ACEO,IAAM,gBAAY,yBACvB,SAASC,WAAU,EAAE,QAAQ,GAAG,KAAI,GAAI,KAAG;AACzC,QAAM,CAAC,cAAc,eAAe,QAAI,uBACtC,IAAI;AAGN,8BAAU,MAAK;AACb,QAAI,CAAC,gBAAgB,CAAC;AAAQ;AAC9B,QAAI,WAAW,aAAa;AAAW;AAEvC,iBAAa,YAAY;AACzB,QAAI,SAAS,SAAQ,KAAM,SAAS,UAAS,GAAI;AAE/C,iBAAW,MAAK;AACd,qBAAa,YAAY;AACzB,qBAAa,KAAI,EAAG,MAAM,CAAC,MAAK;AAC9B,kBAAQ,MAAM,yBAAyB,CAAC;QAC1C,CAAC;MACH,GAAG,CAAC;IACN;AAEA,WAAO,MAAK;AACV,mBAAa,MAAK;AAClB,mBAAa,YAAY;IAC3B;EACF,GAAG,CAAC,QAAQ,YAAY,CAAC;AAEzB,aACET,wBAAA,SAAA,EACE,UAAQ,MACR,aAAW,MAAA,GACP,MACJ,KAAK,CAAC,YAAW;AACf,sBAAkB,KAAK,OAAO;AAC9B,oBAAgB,OAAO;EACzB,EAAC,CAAA;AAGP,CAAC;AC3CI,IAAM,2BAAuB,yBAGlC,SAAS,wBAAwB,EAAE,aAAa,OAAO,SAAQ,GAAI,KAAG;AACtE,QAAM,CAAC,OAAO,QAAQ,QAAI,uBAAS,KAAK;AACxC,QAAMU,QAAO,YAAY,QAAQ,YAAY;AAC7C,aACET,yBAAAA,OAAAA,EAAK,WAAU,gCAA+B,OAAc,KAAQ,UAAA,EAChE,CAAC,YAAY,SAAS,WACrBS,YACCV,wBAAC,kBAAgB,EAAC,MAAMU,MAAI,CAAA,QAE5BV,wBAAA,OAAA,EAAK,WAAU,gDAA8C,SAClD,CAAA,IAGd,YAAY,SAAS,CAAC,aACrBA,wBAAA,OAAA,EACE,SAAS,MAAM,SAAS,IAAI,GAC5B,KAAKU,OACL,WAAU,wCACV,KAAK,YAAY,MAAK,CAAA,CAEzB,EAAA,CAAA;AAGP,CAAC;AAED,IAAM,mBAAmB,CAAC,UAA2B;AACnD,QAAM,EAAE,MAAAA,MAAI,IAAK;AACjB,QAAM,WAAWA,MACd,MAAM,GAAG,EACT,MAAM,GAAG,CAAC,EACV,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,EACf,KAAK,EAAE;AACV,aACEV,wBAAAA,OAAAA,EAAK,WAAU,mDAAiD,UAC7D,SAAQ,CAAA;AAGf;ACvCO,IAAMW,+BAA0B,yBAGrC,SAASA,yBAAwB,OAAO,KAAG;AAC3C,QAAM,EAAE,EAAC,IAAK,QAAO;AACrB,aACEX,wBAAC,sBAAoB,EAAC,KAAQ,GAAM,OAAK,UACtC,EAAE,mBAAmB,EAAC,CAAA;AAG7B,CAAC;ACVM,IAAM,yCAAqC,yBAGhD,SAASY,oCAAmC,OAAO,KAAG;AACtD,QAAM,EAAE,EAAC,IAAK,QAAO;AACrB,aACEZ,wBAAC,sBAAoB,EAAC,KAAQ,GAAM,OAAK,UACtC,EAAE,6BAA6B,EAAC,CAAA;AAGvC,CAAC;ACiEM,IAAMa,UAAQ,CAAC,EACpB,UAAU,MACV,QACA,WACA,aACA,WACA,mBAAmBF,0BACnB,8BAA8B,oCAC9B,MACA,GAAG,KAAI,MACQ;AACf,QAAM,EACJ,WACA,aACA,mBACA,yBACA,oBACA,OAAM,IACJ;AAEJ,QAAM,OAAO,QAAO;AACpB,QAAM,CAAC,cAAc,eAAe,QAAI,uBACtC,IAAI;AAGN,QAAM,CAAC,eAAe,gBAAgB,QAAI,uBAAS,IAAI;AACvD,QAAM,CAAC,YAAY,aAAa,QAAI,uBAAS,IAAI;AACjD,QAAM,QAAQ,yBAAyB,gBAAgB,MAAS;AAEhE,QAAM,SACJ,cAAc,eACV,cACA,cAAc,qBACZ,oBACA;AAER,oCAAgB,MAAK;AACnB,QAAI,CAAC,QAAQ,CAAC,gBAAgB,cAAc;AAAQ;AAEpD,UAAM,UAAU,KAAK,iBAAiB,cAAc,WAAW,SAAS;AAExE,WAAO,MAAK;AACV,gBAAO;IACT;EACF,GAAG,CAAC,MAAM,WAAW,WAAW,YAAY,CAAC;AAE7C,8BAAU,MAAK;AACb,QAAI,CAAC,UAAU,CAAC;AAAc;AAE9B,UAAM,CAAC,KAAK,IAAI,OAAO,eAAc;AACrC,QAAI,CAAC;AAAO;AAEZ,UAAM,kBAAkB,MAAK;AAC3B,uBAAiB,aAAa,MAAM;AAEpC,YAAM,EAAE,QAAQ,GAAG,SAAS,EAAC,IAAK,MAAM,YAAW;AACnD,oBAAc,SAAS,MAAM;IAC/B;AAKA,qBAAiB,aAAa,MAAM;AAEpC,iBAAa,iBAAiB,QAAQ,eAAe;AACrD,iBAAa,iBAAiB,SAAS,eAAe;AACtD,UAAM,iBAAiB,UAAU,eAAe;AAChD,WAAO,MAAK;AACV,mBAAa,oBAAoB,QAAQ,eAAe;AACxD,mBAAa,oBAAoB,SAAS,eAAe;AACzD,YAAM,oBAAoB,UAAU,eAAe;AAGnD,uBAAiB,IAAI;IACvB;EACF,GAAG,CAAC,QAAQ,YAAY,CAAC;AAEzB,MAAI,CAAC;AAAM,WAAO;AAElB,QAAM,oBACJ,cAAc,eACV,SAAS,WAAW,IACpB,cAAc,qBACZ,eAAe,WAAW,IAC1B;AAER,QAAM,cACJ,cAAc,UACd,0BAA0B,SAAS,MAAM,gBAAgB;AAE3D,QAAM,wBACJ,CAAC,WACD,CAAC,qBACD,eACA,eAAe,aAAa,SAAS;AACvC,QAAM,cACJ,WAAW,SACP,sBAAsB,cAAc,eACpC;AACN,QAAM,qBAAqB,cAAc;AACzC,aACEV,yBAAAI,6BAAA,EAAA,UAAA,CACG,CAAC,6BACAL,wBAAA,SAAA,EAAA,GACM,MACJ,WAAW,aAAK,oBAAoB,WAAW;IAC7C,iCAAiC;IACjC,0BAA0B,CAAC;IAC3B,4BAA4B;IAC5B,kCAAkC;GACnC,GAAC,gBACY,QAAM,mBACH,WACjB,KAAK,CAAC,YAAW;AACf,oBAAgB,OAAO;AACvB,UAAM,kBAAkB,OAAO;EACjC,EAAC,CAAA,GAGJ,SAAS,mCACRA,wBAAC,6BAA2B,EAC1B,OAAO,EAAE,UAAU,WAAU,GAC7B,YAAwB,CAAA,IAI1B,yBAAyB,kBAAkB,wBAC3CA,wBAAC,kBAAgB,EACf,OAAO,EAAE,UAAU,WAAU,GAC7B,aACA,KAAK,MAAM,2BAA0B,CAAA,CAExC,EAAA,CAAA;AAGP;AAEAa,QAAM,cAAc;ACzNb,IAAM,4BAA4B,CAAwB,EAC/D,gBACA,kBAAkB,uBAClB,WACA,UAAS,MAMN;AACH,QAAM,OAAO,QAAO;AACpB,QAAM,UAAU,yBAAyB,MAAM;AAC/C,8BAAU,MAAK;AACb,QAAI,CAAC,kBAAkB,CAAC,WAAW,CAAC,QAAQ,cAAc;AAAQ;AAClE,UAAM,YAAY,QAAQ,uBACxB,gBACA,WACA,SAAS;AAEX,WAAO,MAAK;AACV,gBAAS;IACX;EACF,GAAG,CAAC,gBAAgB,SAAS,MAAM,WAAW,SAAS,CAAC;AAC1D;ACjBO,IAAM,SAAS,CAAC,EACrB,UACA,MAAAH,OACA,OACA,WACA,GAAG,KAAI,MACS;AAChB,QAAM,CAAC,OAAO,QAAQ,QAAI,uBAAS,KAAK;AAExC,aACET,yBAAAI,6BAAA,EAAA,UAAA,EACI,CAAC,YAAY,UAAUK,aACvBV,wBAAC,gBAAc,EAAC,WAAsB,OAAc,OAAO,CAACU,KAAI,EAAC,CAAA,GAElE,YAAY,CAAC,aACZV,wBAAA,OAAA,EACE,SAAS,MAAM,SAAS,IAAI,GAC5B,KAAI,UACJ,WAAW,aAAK,qBAAqB,SAAS,GAC9C,KAAK,UACL,OAAY,GACR,KAAI,CAAA,CAEX,EAAA,CAAA;AAGP;AAOO,IAAM,iBAAiB,CAAC,EAC7B,WACA,OACA,MAAK,MACmB;AACxB,aACEA,wBAAA,OAAA,EACE,WAAW,aAAK,wCAAwC,SAAS,GACjE,OAAY,cAEZC,yBAAA,OAAA,EAAA,UAAA,CACG,MAAM,CAAC,EAAE,CAAC,GACV,MAAM,CAAC,IAAI,CAAC,CAAC,EAAA,CAAA,EACV,CAAA;AAGZ;AC/CA,IAAM,oCAAgC,mBAAK,MACzC,OAAO,8CAAqB,EAAE,KAAK,CAAC,OAAO;EACzC,SAAS,EAAE;EACX,CAAC;AAML,IAAM,+BAA2B,4BAE/B,MAAS;AAKJ,IAAM,uBAAuB,MAAK;AACvC,QAAM,cAAU,yBAAW,wBAAwB;AACnD,MAAI,CAAC,SAAS;AACZ,UAAM,IAAI,MACR,sEAAsE;EAE1E;AACA,SAAO;AACT;AAQO,IAAM,4BAA4B,CACvC,UAGE;AACF,QAAM,EAAE,mBAAmB,MAAM,GAAG,YAAW,IAAK;AACpD,aACED,wBAAC,uBAAQ,EAAC,UAAU,kBAAgB,cAClCA,wBAAC,+BAA6B,EAAA,GACxB,aACJ,iBAAiB,yBAAwB,CAAA,EACzC,CAAA;AAGR;AChDO,IAAM,iBAAa,yBAAW,SAASc,YAC5C,OACA,KAAoC;AAEpC,QAAM,EAAE,MAAM,SAAS,SAAS,SAAS,WAAW,GAAG,KAAI,IAAK;AAChE,aACEd,wBAAAA,UAAAA,EACE,WAAW,aAAK,oCAAoC,WAAW;IAC7D,CAAC,6CAA6C,OAAO,EAAE,GAAG;IAC1D,6CAA6C;EAC9C,CAAA,GACD,SAAS,CAAC,MAAK;AACb,MAAE,eAAc;AAChB,cAAU,CAAC;EACb,GACA,KAAQ,GACJ,MAAI,cAERA,wBAAC,MAAI,EAAC,KAAU,CAAA,EAAI,CAAA;AAG1B,CAAC;ACJM,IAAM,sBAAkB,yBAG7B,SAASe,iBACT,EACE,UACA,SACA,UACA,WACA,QACA,MAAAC,OACA,eACA,YACA,OACA,kBAAAC,oBAAmB,yBACnB,SACA,SACA,cACA,GAAG,gBAAe,GAEpB,KAAG;AAEH,aACEhB,yBAAAA,OAAAA,EACE,WAAW,aAAK,+BAA+B,WAAW;IACxD,wCAAwC;IACxC,qCAAqCe;EACtC,CAAA,GACD,OACA,KAAQ,UAAA,KAERf,yBAAAA,OAAAA,EACE,WAAW,aAAK,6CAA6C;IAC3D,qDAAqD;IACrD,6DACE,UAAU,YAAY;IACxB,+DACE,UAAU,YAAY;IACxB,uDAAuD;EACxD,CAAA,GAAC,UAAA,KAEFD,wBAAA,UAAA,EACE,MAAK,UACL,WAAU,uCACV,SAAS,CAAC,MAAK;AACb,MAAE,eAAc;AAChB,cAAU,CAAC;EACb,GACA,UAAkB,GACd,iBAAe,SAEV,CAAA,GAEVgB,aACChB,wBAAC,YAAU,EACT,QAAQ,YACR,WAAW,eACX,cAAciB,mBACd,UAAU,cAAY,UAErB,gBAAgBD,KAAI,QAAIhB,wBAACgB,OAAI,CAAA,CAAA,IAAMA,MAAI,CAAA,CAE3C,EAAA,CAAA,GAEF,eACChB,wBAAA,OAAA,EAAK,WAAU,wCAAsC,UAAE,QAAO,CAAA,CAC/D,EAAA,CAAA;AAGP,CAAC;AAED,IAAM,8BAA0B,yBAG9B,SAASkB,yBAAwB,EAAE,UAAS,GAAI,KAAG;AACnD,aACElB,wBAAC,YAAU,EACT,WAAW,aAAK,iCAAiC;IAC/C,yCAAyC;EAC1C,CAAA,GACD,MAAM,YAAY,eAAe,YACjC,IAAQ,CAAA;AAGd,CAAC;AC9GM,IAAM,aAAa,CAAC,EACzB,UACA,GAAG,KAAI,MACiD;AACxD,aACEA,wBAAA,UAAA,EAAA,GAAY,MAAM,WAAU,0BAAwB,SACzC,CAAA;AAGf;ACDO,IAAM,mBAAmB,CAAC,EAC/B,UACA,UACA,QAAO,MACmB;AAC1B,QAAM,OAAO,QAAO;AACpB,QAAM,kBAAoD,0BACxD,OAAO,MAAK;AACV,QAAI,SAAS;AACX,cAAQ,CAAC;IACX,WAAW,MAAM;AACf,YAAM,KAAK,KAAI;AACf,iBAAQ;IACV;EACF,GACA,CAAC,SAAS,UAAU,IAAI,CAAC;AAE3B,aACEA,wBAAC,YAAU,EACT,UACA,MAAK,eACL,SAAQ,WAAS,eACL,sBACZ,SAAS,YAAW,CAAA;AAG1B;ACpBO,IAAM,eAAe,CAAC,UAA+C;AAC1E,QAAM,EACJ,WACA,SACA,UACA,mBACA,gBACA,YAAY,OACZ,WACA,gBAAgB,iCAChB,MAAK,IACH;AAEJ,QAAM,EAAE,MAAM,GAAG,GAAG,SAAQ,IAAK,oBAAoB;IACnD;IACA,UAAU;EACX,CAAA;AAED,8BAAU,MAAK;AACb,QAAI,CAAC,aAAa,CAAC,qBAAqB,CAAC;AAAgB;AAEzD,UAAM,UAAU,WAAW,MAAK;AAC9B,qBAAc;IAChB,GAAG,iBAAiB;AAEpB,WAAO,MAAM,aAAa,OAAO;EACnC,GAAG,CAAC,WAAW,gBAAgB,iBAAiB,CAAC;AAEjD,aACEC,yBAAA,OAAA,EAAK,KAAK,KAAK,cAAY,UAAA,CACxB,iBACCA,yBAAA,OAAA,EACE,WAAW,aAAK,2BAA2B,SAAS,GACpD,KAAK,KAAK,aACV,OAAO;IACL,UAAU;IACV,KAAK,KAAK;IACV,MAAM,KAAK;IACX,WAAW;EACZ,GAAA,UAAA,CAEA,qBAAiBD,wBAAA,KAAA,EAAG,WAAW,cAAa,CAAA,OAC7CA,wBAAA,QAAA,EAAM,WAAU,oCAAkC,UAAE,QAAO,CAAA,GAC1D,YACCA,wBAAA,KAAA,EACE,WAAU,yEACV,SAAS,MAAK,CAAA,IAEd,IAAI,EAAA,CAAA,GAGX,QAAQ,EAAA,CAAA;AAGf;ACvBO,IAAM,yBAAyB,CAAC,UAAsC;AAC3E,QAAM,EACJ,YACA,oBACA,iBACA,yBACA,gBACA,oBAAoB,MACpB,SAAQ,IACN;AACJ,QAAM,EAAE,kBAAiB,IAAK,kBAAiB;AAC/C,QAAM,gBAAgB,kBAAkB,UAAU;AAClD,QAAM,wBAAoB,qBAAO,aAAa;AAC9C,QAAM,CAAC,kBAAkB,mBAAmB,QAAI,uBAAQ;AAGxD,8BAAU,MAAK;AACb,QAAI,kBAAkB,YAAY;AAAe;AAEjD,QAAI,eAAe;AACjB,0BAAoB,SAAS;AAC7B,wBAAkB,UAAU;IAC9B,OAAO;AACL,0BAAoB,SAAS;AAC7B,wBAAkB,UAAU;IAC9B;EACF,GAAG,CAAC,aAAa,CAAC;AAElB,QAAM,qBAAiB,0BAAY,MAAM,oBAAoB,MAAS,GAAG,CAAA,CAAE;AAC3E,MAAI,oBAAoB;AACtB,eACEA,wBAAC,cAAY,EACX,WAAW,sBAAsB,CAAC,eAClC,SAAS,yBAAuB,SAEvB,CAAA;EAGf;AAEA,aACEA,wBAAC,cAAY,EACX,WAAW,CAAC,CAAC,kBACb,mBACA,gBACA,SACE,qBAAqB,YAAY,kBAAkB,gBAAc,SAG1D,CAAA;AAGf;ACrFO,IAAM,iCAAiC,CAAC,EAC7C,UACA,MACA,UAAS,MACkD;AAC3D,QAAM,EAAE,mBAAkB,IAAK,kBAAiB;AAChD,QAAM,EAAE,qBAAoB,IAAK,mBAAkB;AACnD,QAAM,EAAE,EAAC,IAAK,QAAO;AAErB,QAAM,UAAU,QAAQ,EAAE,iCAAiC;AAC3D,aACEA,wBAAC,cAAY,EACX,SACA,WAAW,sBACX,WAAW,aAAa,aAAW,SAE1B,CAAA;AAGf;ACtBO,IAAM,kCAAkC,CAAC,EAC9C,UACA,KAAI,MACwD;AAC5D,QAAM,EAAE,EAAC,IAAK,QAAO;AACrB,QAAM,EAAE,0BAAyB,IAAK,uBAAsB;AAE5D,QAAM,CAAC,WAAW,UAAU,QAAI,uBAAS,KAAK;AAE9C,QAAM,UAAU,QAAQ,EAAE,0BAA0B;AAEpD,8BAAU,MAAK;AACb,QAAI,2BAA2B;AAC7B,iBAAW,IAAI;IACjB,OAAO;AACL,iBAAW,KAAK;IAClB;EACF,GAAG,CAAC,yBAAyB,CAAC;AAE9B,aACEA,wBAAC,cAAY,EACX,SACA,eAAc,iDACd,WACA,WAAU,aACV,OAAO,MAAM,WAAW,KAAK,GAAC,SAErB,CAAA;AAGf;AC7BO,IAAM,mBAAmB,CAAC,EAC/B,WACA,OAAO,WACP,MACA,QAAO,MACmB;AAC1B,aACEC,yBAAA,OAAA,EACE,WAAW,aAAK,gCAAgC,SAAS,GACzD,OAAO,SAAO,UAAA,KAEdD,wBAAAA,OAAAA,EAAK,WAAW,aAAK,sCAAsC,IAAI,EAAC,CAAA,GAC/D,YAAQA,wBAAA,KAAA,EAAG,WAAU,qCAAmC,UAAE,KAAI,CAAA,CAAK,EAAA,CAAA;AAG1E;ICTa,UAAU,CAAwB,EAC7C,UACA,kBACA,kBACA,mBAAmB,OACnB,UAAU,MAAK,MACK;AACpB,QAAM,eAAW,qBAAsB,IAAI;AAC3C,QAAM,EAAE,MAAM,GAAG,GAAG,UAAU,QAAO,IAAK,oBAAoB;IAC5D,WAAW;IACX,UAAU;IACV,YAAY,CAAC,MAAM,EAAE,SAAS,SAAQ,CAAE,CAAC;EAC1C,CAAA;AAED,8BAAU,MAAK;AACb,SAAK,aAAa,gBAAgB;EACpC,GAAG,CAAC,kBAAkB,IAAI,CAAC;AAE3B,MAAI,CAAC;AAAS,WAAO;AAErB,aACEC,yBAAA,OAAA,EACE,WAAW,aAAK,sBAAsB,gBAAgB,GACtD,KAAK,KAAK,aACV,OAAO;IACL,UAAU;IACV,KAAK,KAAK;IACV,MAAM,KAAK;EACZ,GAAA,UAAA,KAEDD,wBAAC,eAAa,EACZ,KAAK,UACL,SACA,MAAK,8CAA6C,CAAA,GAEnD,QAAQ,EAAA,CAAA;AAGf;ACtDO,IAAM,wBAAwB,CAAwB,EAC3D,cACA,aAAY,IAGV,CAAA,MAAM;AACR,QAAM,CAAC,gBAAgB,iBAAiB,QAAI,uBAAS,KAAK;AAE1D,QAAM,uBAAyC,0BAC7C,CAAC,MAAK;AACJ,sBAAkB,IAAI;AACtB,mBAAe,CAAC;EAClB,GACA,CAAC,YAAY,CAAC;AAGhB,QAAM,uBAAyC,0BAC7C,CAAC,MAAK;AACJ,sBAAkB,KAAK;AACvB,mBAAe,CAAC;EAClB,GACA,CAAC,YAAY,CAAC;AAGhB,SAAO,EAAE,kBAAkB,kBAAkB,eAAc;AAC7D;ACjBO,IAAM,cAAc,CAAC,EAC1B,OACA,kBACA,kBACA,iBACA,GAAG,MAAK,MACW;AACnB,QAAM,EAAE,kBAAkB,kBAAkB,eAAc,IACxD,sBAAqB;AACvB,QAAM,CAAC,eAAe,gBAAgB,QAAI,uBACxC,IAAI;AAEN,QAAM,yBACJ,CAAC,mBAAmB,QAAQ,KAAK,KAAK;AAExC,aACEC,yBAAAI,6BAAA,EAAA,UAAA,KACEL,wBAAC,SAAO,EACN,kBAAkB,eAClB,SAAS,wBACT,kBACA,kBAAkC,UAEjC,SAAS,GAAE,CAAA,OAEdA,wBAAA,OAAA,EACE,KAAK,kBACL,cAAc,kBACd,cAAc,kBAAgB,GAC1B,MAAK,CAAA,CACT,EAAA,CAAA;AAGR;ACpBA,IAAM,wBAAwB,MAAK;AACjC,QAAM,EAAE,EAAC,IAAK,QAAO;AACrB,QAAM,EAAE,qBAAqB,mBAAkB,IAAK,uBAAsB;AAE1E,QAAM,EAAE,MAAK,IAAK,eAAc;AAEhC,aACEC,yBAAAA,OAAAA,EAAK,WAAU,0CAAwC,UAAA,KACrDA,yBAAA,OAAA,EAAK,WAAU,oCAAkC,UAAA,KAC/CD,wBAAC,MAAI,EAAC,MAAK,eAAc,CAAA,OACzBA,wBAAAA,MAAAA,EAAI,WAAU,qCAAmC,UAC9C,EAAE,eAAe,EAAC,CAAA,CAChB,EAAA,CAAA,OAEPA,wBAAAA,KAAAA,EAAG,WAAU,yCAAuC,UACjD,EAAE,0CAA0C,EAAC,CAAA,OAEhDC,yBAAA,OAAA,EAAK,WAAU,qCAAmC,UAAA,KAChDD,wBAAC,iBAAe,EAAC,SAAQ,aAAY,SAAS,OAAK,UAChD,EAAE,QAAQ,EAAC,CAAA,OAEdA,wBAAC,iBAAe,EAAC,SAAQ,WAAU,SAAS,qBAAmB,UAC5D,yBAAqBA,wBAAC,kBAAgB,CAAA,CAAA,IAAM,EAAE,eAAe,EAAC,CAAA,CAC/C,EAAA,CAAA,CACd,EAAA,CAAA;AAGZ;AAEA,IAAM,mCAA+B,yBAGnC,SAASmB,8BAA6B,OAAO,KAAG;AAChD,aACEnB,wBAAC,iBAAe,EACd,KACA,QAAQ,MACR,SAAQ,aAAW,eACP,yBAAuB,cAEnCA,wBAAC,MAAI,EAAC,MAAK,gBAAe,CAAA,EAAG,CAAA;AAGnC,CAAC;IAEY,+BAA+B,CAAC,EAC3C,QAAO,MAGJ;AACH,QAAM,EAAE,EAAC,IAAK,QAAO;AACrB,QAAM,EAAE,qBAAqB,oBAAoB,0BAAyB,IACxE,uBAAsB;AAExB,MAAI,2BAA2B;AAC7B,eACEA,wBAAC,YAAU,EACT,gBAAgB;MACd,cAAc;MACd,cAAc;IACf,GAAA,cAEDA,wBAAC,YAAU,EACT,cAAc,8BACd,YAAY,eAAe,QAAM,cAEjCA,wBAAC,uBAAqB,CAAA,CAAA,EAAG,CAAA,EACd,CAAA;EAGnB;AAEA,QAAM,QAAQ,qBACV,EAAE,mCAAmC,IACpC,WAAW,EAAE,aAAa;AAE/B,aACEA,wBAAC,YAAU,EACT,gBAAgB;IACd,cAAc;IACd,cAAc;EACf,GAAA,cAEDA,wBAAC,aAAW,EAAC,OAAY,cACvBA,wBAAC,iBAAe,EACd,QAAQ,2BACR,SACA,SAAQ,aAAW,eACP,0BACZ,SAAS,qBAAqB,SAAY,qBAAmB,UAE5D,yBACCA,wBAAC,kBAAgB,CAAA,CAAA,QAEjBA,wBAAC,MAAI,EAAC,MAAK,gBAAe,CAAA,EAC3B,CAAA,EACe,CAAA,EACN,CAAA;AAGpB;IAEa,mBAAmB,CAAC,EAAE,QAAO,MAA6B;AACrE,QAAM,EAAE,EAAC,IAAK,QAAO;AACrB,QAAM,EAAE,qBAAqB,oBAAoB,0BAAyB,IACxE,uBAAsB;AAExB,MAAI,QAAQ,WAAW,EAAE,aAAa;AAEtC,MAAI,oBAAoB;AACtB,YAAQ,4BACJ,EAAE,kCAAkC,IACpC,EAAE,mCAAmC;EAC3C;AAEA,aACEA,wBAAC,YAAU,EACT,gBAAgB;IACd,cAAc;IACd,cAAc;EACf,GAAA,cAEDA,wBAAC,iBAAe,EACd,QAAQ,2BACR,SACA,SAAQ,aAAW,eAEjB,4BACI,0BACA,0BAEN,OACA,SAAS,qBAAqB,SAAY,qBAAmB,UAE5D,yBACCA,wBAAC,kBAAgB,CAAA,CAAA,QAEjBA,wBAAC,MAAI,EACH,MAAM,4BAA4B,iBAAiB,gBAAe,CAAA,EAErE,CAAA,EACe,CAAA;AAGxB;AC7JO,IAAM,0BAAkD;EAC7D,UAAU;EACV,gBAAgB;EAChB,eAAe;EACf,aAAa;EACb,WAAW;EACX,WAAW;;IAGA,WAAW,CAAC,EACvB,aAAa,EAAE,UAAU,UAAS,GAClC,uBAAuB,MACvB,mBAAmB,wBAAuB,MACxB;AAClB,QAAM,OAAO,QAAO;AAEpB,8BAAU,MAAK;AACb,QAAI,CAAC,QAAQ,CAAC;AAAU;AAExB,UAAM,YAAY,WAAW,MAAK;AAChC,WAAK,cAAc,SAAS;IAC9B,GAAG,oBAAoB;AAEvB,WAAO,MAAK;AACV,mBAAa,SAAS;IACxB;EACF,GAAG,CAAC,MAAM,sBAAsB,UAAU,SAAS,CAAC;AAEpD,MAAI,CAAC;AAAU,WAAO;AAEtB,QAAM,EAAE,YAAY,UAAS,IAAK;AAElC,aACEA,wBAAAA,OAAAA,EAAK,WAAU,uBAAqB,cAClCA,wBAAA,QAAA,EAAM,WAAU,8BAA4B,UACzC,aAAa,iBAAiB,SAAS,EAAC,CAAA,EACpC,CAAA;AAGb;AChCO,IAAM,mBAAqC;EAChD;IACE,MAAM;IACN,YAAY;EACb;EACD;;IAEE,MAAM;IACN,YAAY;EACb;EACD;IACE,MAAM;IACN,YAAY;EACb;EACD;IACE,MAAM;IACN,YAAY;EACb;EACD;IACE,MAAM;IACN,YAAY;EACb;EACD;IACE,MAAM;IACN,YAAY;EACb;;AAOI,IAAM,kBAAkB,CAAC,EAC9B,YAAY,iBAAgB,MACH;AACzB,aACEA,wBAAC,YAAU,EAAC,gBAAgB,CAAC,cAAc,eAAe,GAAC,cACzDA,wBAAC,YAAU,EACT,WAAU,OACV,cAAc,2BACd,YAAY,eAAe,MAAI,cAE/BA,wBAAC,sBAAoB,EAAC,UAAoB,CAAA,EAAI,CAAA,EACnC,CAAA;AAGnB;AAEA,IAAM,gCAA4B,yBAGhC,SAASoB,2BAA0B,EAAE,UAAS,GAAI,KAAG;AACrD,QAAM,EAAE,EAAC,IAAK,QAAO;AACrB,aACEpB,wBAAC,aAAW,EAAC,OAAO,EAAE,WAAW,GAAG,iBAAiB,WAAS,cAC5DA,wBAAC,iBAAe,EAAC,KAAU,QAAQ,WAAW,SAAQ,WAAS,cAC7DA,wBAAC,MAAI,EAAC,MAAK,YAAW,CAAA,EAAG,CAAA,EACT,CAAA;AAGxB,CAAC;AAOM,IAAM,uBAAuB,CAAC,EACnC,WACA,SAAS,aAAY,MACS;AAC9B,QAAM,OAAO,QAAO;AACpB,QAAM,EAAE,MAAK,IAAK,eAAc;AAChC,aACEA,wBAAA,OAAA,EACE,WAAW,aAAK,6BAA6B;IAC3C,yCAAyC,WAAW;IACpD,uCAAuC,WAAW;GACnD,GAAC,UAED,UAAU,IAAI,CAAC,iBACdA,wBAAAA,UAAAA,EAEE,MAAK,UACL,WAAU,qCACV,SAAS,MAAK;AACZ,UAAM,aAAa,QAAQ;AAC3B,YAAK;EACP,GAAC,UAEA,SAAS,cAAc,wBAAwB,SAAS,UAAU,EAAC,GAR/D,SAAS,UAAU,CAU3B,EAAC,CAAA;AAGR;AChGO,IAAM,2BAA2B,CACtC,OACA,YACyB;AACzB,SAAO,YAAW;AAChB,QAAI;AACF,YAAM,QAAO;IACf,SAAS,OAAO;AACd,UAAI,MAAM,SAAS;AACjB,cAAM,QAAQ,KAAK;AACnB;MACF;AAEA,UAAI,CAAC,kBAAkB,KAAK,GAAG;AAC7B,gBAAQ,MAAM,+BAA+B,KAAK;MACpD;IACF;EACF;AACF;AAEA,SAAS,kBAAkB,OAAc;AACvC,SAAO,iBAAiB,gBAAgB,MAAM,SAAS;AACzD;ACfO,IAAM,oBAAoB,CAAC,UAAiC;AACjE,QAAM,EAAE,EAAC,IAAK,QAAO;AACrB,QAAM,EAAE,SAAS,kBAAiB,IAAK;AAEvC,QAAM,EAAE,0BAA0B,qBAAqB,gBAAe,IACpE,kBAAiB;AACnB,QAAM,yBAAyB,yBAAwB;AACvD,QAAM,EAAE,eAAe,mBAAmB,qBAAoB,IAC5D,qBAAqB,cAAc,WAAW;AAEhD,QAAM,eAAe,gBAAe;AACpC,QAAM,yBAAyB,cAAc,cAAc;AAE3D,QAAM,EAAE,aAAa,oBAAoB,gBAAe,IACtD,oBAAoB;IAClB;EACD,CAAA;AACH,QAAM,mBAAmB,CAAC;AAC1B,QAAM,2BACH,CAAC,qBACC,0BAA0B,2BAA2B,UACvD,CAAC,qBAAqB;AACzB,QAAM,cAAc,yBAAyB,OAAO,YAAW;AAC7D,QAAI,CAAC,eAAe;AAClB,YAAM,kBAAiB;IACzB,OAAO;AACL,YAAM,YAAY,OAAM;IAC1B;EACF,CAAC;AAED,aACEA,wBAAC,YAAU,EAAC,gBAAgB,CAAC,cAAc,WAAW,GAAC,cACrDA,wBAAC,wBAAsB,EACrB,YAAY,cAAc,aAC1B,oBAAoB,sBACpB,iBAAiB,EAAE,gCAAgC,GACnD,yBAAyB,EAAE,2CAA2C,GACtE,gBAAgB,EAAE,sCAAsC,GAAC,cAEzDA,wBAAC,aAAW,EAAC,OAAO,WAAW,EAAE,cAAc,GAAC,cAC9CA,wBAAC,iBAAe,EACd,QAAQ,0BAA0B,kBAClC,SACA,SAAQ,WAAS,eAEf,yBACI,6BACA,6BAEN,UAAU,0BACV,SAAS,aAAW,cAEpBA,wBAAC,MAAI,EACH,MACE,yBAAyB,oBAAoB,mBAAkB,CAAA,EAEjE,CAAA,EACc,CAAA,EACN,CAAA,EACS,CAAA;AAG/B;AChFO,IAAM,uBAAuB,MAAK;AACvC,QAAM,EAAE,mBAAkB,IAAK,kBAAiB;AAChD,QAAM,EAAE,WAAW,YAAW,IAAK,mBAAkB;AACrD,QAAM,CAAC,YAAY,aAAa,QAAI,uBAAS,CAAC;AAE9C,8BAAU,MAAK;AACb,QAAI,CAAC,aAAa,CAAC;AAAa;AAChC,UAAM,uBAAuB,oBAC3B,aACA,CAAC,EAAE,YAAY,GAAE,MAAO,cAAc,EAAE,GACxC,EAAE,wBAAwB,IAAI,qBAAqB,MAAK,CAAE;AAE5D,WAAO,MAAK;AACV,2BAAoB,EAAG,MAAM,QAAQ,KAAK;IAC5C;EACF,GAAG,CAAC,WAAW,WAAW,CAAC;AAE3B,aACEC,yBAAAA,OAAAA,EAAK,WAAU,qCAAmC,UAAA,KAChDD,wBAAC,MAAI,EAAC,MAAM,YAAY,QAAQ,UAAS,CAAA,OACzCA,wBAAA,OAAA,EAAK,WAAU,0CAAwC,cACrDA,wBAAA,OAAA,EACE,WAAU,gDACV,OAAO,EAAE,WAAW,UAAU,aAAa,GAAG,IAAG,EAAE,CAAA,EACnD,CAAA,CACE,EAAA,CAAA;AAGZ;ACEA,IAAM,oBAAgB,4BACpB,CAAA,CAAwB;AAG1B,IAAM,SAAS,CAAC,UAMX;AACH,QAAM,EACJ,UACA,MACA,sBACA,sBACA,cAAc,iBAAgB,IAC5B;AACJ,QAAM,CAAC,QAAQ,SAAS,QAAI,uBAAS,KAAK;AAC1C,QAAM,CAAC,aAAa,cAAc,QAAI,uBAAwB,IAAI;AAClE,QAAM,CAAC,eAAe,gBAAgB,QAAI,uBACxC,oBAAoB;AAEtB,QAAM,CAAC,eAAe,gBAAgB,QAAI,uBACxC,oBAAoB;AAGtB,QAAM,EAAE,MAAM,QAAO,IAAK,YAAY;IACpC,WAAW;IACX,MAAM;IACN,cAAc;IACd,sBAAsB;IACtB,YAAY,CAAC,KAAI,CAAE;EACpB,CAAA;AAED,QAAM,kBAAc,qBAAkC,CAAA,CAAE;AACxD,QAAM,gBAAY,qBAA6B,CAAA,CAAE;AAEjD,QAAM,mBAAe,0BACnB,CAAC,UAAwB;AACvB,qBAAiB,KAAK;AACtB,qBAAiB,SAAS,CAAC;AAC3B,cAAU,KAAK;AACf,QAAI,UAAU,MAAM;AAClB,uBAAiB,UAAU,QAAQ,KAAK,CAAC;IAC3C;EACF,GACA,CAAC,gBAAgB,CAAC;AAGpB,QAAM,uBAAuB,CAAC,UAAwB;AACpD,QAAI,QAAQ;AACV,qBAAe,KAAK;IACtB,OAAO;AACL,mBAAa,KAAK;IACpB;EACF;AAEA,QAAM,UAAU,kBAAkB,SAAS;IACzC,SAAS;IACT;IACA;IACA,YAAY;EACb,CAAA;AACD,QAAM,YAAY,aAAa,SAAS;IACtC,SAAS;IACT;IACA;IACA,SAAS;EACV,CAAA;AACD,QAAM,QAAQ,SAAS,OAAO;AAC9B,QAAM,UAAU,WAAW,OAAO;AAClC,QAAMqB,QAAO,QAAQ,SAAS,EAAE,MAAM,UAAS,CAAE;AAEjD,QAAM,EAAE,mBAAmB,kBAAkB,aAAY,IAAK,gBAC5D,CAAC,SAAS,WAAW,OAAO,SAASA,KAAI,CAAC;AAG5C,QAAM,oBAAgB,sBACpB,OAAO;IACL;IACA;IACA;IACA;MAEF,CAAC,aAAa,eAAe,cAAc,YAAY,CAAC;AAG1D,aACEpB,yBAAA,OAAA,EAAK,WAAU,uBAAqB,UAAA,KAClCA,yBAAA,OAAA,EACE,WAAU,gCACV,KAAK,KAAK,cACV,UAAU,GAAC,GACP,kBAAiB,GAAE,UAAA,KAEvBA,yBAAA,SAAA,EAAO,WAAU,uCAAqC,UAAA,CACnD,YACCD,wBAAC,MAAI,EAAC,WAAU,sCAAqC,KAAU,CAAA,GAEhE,aAAa,EAAA,CAAA,OAEhBA,wBAAC,MAAI,EACH,WAAU,yCACV,MAAM,SAAS,eAAe,eAAc,CAAA,CAC5C,EAAA,CAAA,OAEJA,wBAAC,cAAc,UAAQ,EAAC,OAAO,eAAa,UACzC,cACCA,wBAAC,sBAAoB,EAAC,SAAkB,OAAO,OAAK,cAClDA,wBAAA,OAAA,EACE,WAAU,4BACV,KAAK,KAAK,aAAW,GACjB,iBAAgB,GAAE,cAEtBA,wBAAC,cAAY,EAAC,aAA0B,WAAoB,SACjD,CAAA,EACI,CAAA,EACX,CAAA,EAET,CAAA,CACsB,EAAA,CAAA;AAG/B;AAQO,IAAM,uBAAuB,CAAC,UAAoC;AACvE,QAAM,EAAE,UAAU,OAAO,KAAI,IAAK;AAClC,QAAM,EAAE,cAAc,aAAY,QAAK,yBAAW,aAAa;AAC/D,QAAM,EAAE,KAAK,MAAK,IAAK,YAAW;AAClC,aACEC,yBAAA,OAAA,EACE,WAAW,aAAK,8BAA8B;IAC5C,wCAAwC;EACzC,CAAA,GACD,KAAQ,GACJ,aAAa;IACf,SAAS,MAAM,aAAa,KAAK;GAClC,GAAC,UAAA,CAED,YAAQD,wBAAC,MAAI,EAAC,WAAU,4BAA2B,KAAU,CAAA,OAC9DA,wBAAA,QAAA,EAAM,WAAU,6BAA2B,UAAE,MAAK,CAAA,CAAQ,EAAA,CAAA;AAGhE;AAEO,IAAM,iBAAiB,CAAC,UAQ1B;AACH,QAAM,EACJ,UACA,MACA,cACA,sBACA,qBAAoB,IAClB;AACJ,aACEA,wBAAC,QAAM,EACL,MACA,cACA,sBACA,sBAA0C,SAEjC,CAAA;AAGf;ACnMA,IAAM,uBAAuB,CAAC,EAC5B,UACA,IACA,OACA,UACA,MAAAU,OACA,UACA,gBACA,MAAK,MACyB;AAC9B,aACET,yBAAA,SAAA,EACE,WAAW,aAAK,sCAAsC;IACpD,gDAAgD;IAChD,gDAAgD;EACjD,CAAA,GACD,SAAS,IAAE,UAAA,KAEXD,wBAAA,SAAA,EACE,MAAK,SACL,MAAMU,OACN,UACA,OACA,IACA,SAAS,UACT,gBACA,SAAkB,CAAA,GAEnB,KAAK,EAAA,CAAA;AAGZ;AAIA,IAAM,qBAAqB,CACzB,UAOE;AACF,QAAM,EACJ,UAAU,CAAA,GACV,kBACA,OACA,MACA,UACA,SAAQ,IACN;AACJ,QAAM,EAAE,MAAK,IAAK,eAAc;AAChC,QAAM,EAAE,WAAU,IAAK,cAAc,SAAS,gBAAgB;AAE9D,aACET,yBAAA,OAAA,EAAK,WAAU,2CAAyC,UAAA,CACrD,aACCD,wBAAA,OAAA,EAAK,WAAU,qDAAmD,UAC/D,MAAK,CAAA,GAGT,WAAW,IAAI,CAAC,WAAU;AACzB,eACEA,wBAAC,sBAAoB,EACnB,IAAI,GAAG,IAAI,KAAK,OAAO,QAAQ,IAC/B,OAAO,OAAO,UACd,OAAO,OAAO,OAEd,UAAU,CAAC,MAAK;AACd,YAAM,WAAW,EAAE,OAAO;AAC1B,UAAI,aAAa,WAAW;AAC1B,mBAAW,QAAQ;MACrB;AACA,cAAK;IACP,GACA,MAAM,MACN,UAAU,OAAO,WAAU,GATtB,OAAO,QAAQ;EAY1B,CAAC,GACA,QAAQ,EAAA,CAAA;AAGf;AAEA,IAAM,yBAAyB,CAAC,UAM3B;AACH,QAAM,EAAE,UAAU,CAAA,GAAI,kBAAkB,OAAO,UAAU,KAAI,IAAK;AAClE,QAAM,EAAE,YAAY,oBAAoB,cAAa,IAAK,cACxD,SACA,gBAAgB;AAGlB,QAAM,mBAAe,0BACnB,CAAC,UAAiB;AAChB,UAAM,WAAW,WAAW,KAAK,EAAE;AACnC,QAAI,aAAa,WAAW;AAC1B,iBAAW,QAAQ;IACrB;EACF,GACA,CAAC,YAAY,QAAQ,CAAC;AAGxB,aACEC,yBAAA,OAAA,EAAK,WAAU,2CAAyC,UAAA,KACtDD,wBAAA,OAAA,EAAK,WAAU,qDAAmD,UAC/D,MAAK,CAAA,OAERA,wBAAC,gBAAc,EACb,MACA,sBAAsB,eACtB,sBAAsB,mBAAmB,OACzC,cAA0B,UAEzB,WAAW,IAAI,CAAC,eACfA,wBAAC,sBAAoB,EAEnB,MACA,OAAO,OAAO,OACd,UAAU,OAAO,WAAU,GAHtB,OAAO,QAAQ,CAKvB,EAAC,CAAA,CACa,EAAA,CAAA;AAGvB;AAEO,IAAM,iBAAiB,CAC5B,UASE;AACF,QAAM,EAAE,aAAa,QAAQ,MAAM,GAAG,KAAI,IAAK;AAE/C,MAAI,eAAe,QAAQ;AACzB,eAAOA,wBAAC,oBAAkB,EAAA,GAAK,KAAI,CAAA;EACrC;AACA,aAAOA,wBAAC,wBAAsB,EAAA,GAAK,MAAM,KAAU,CAAA;AACrD;AC/JO,IAAM,cAAc,CAAC,UAAgC;AAC1D,QAAM,EAAE,gBAAe,IAAK,kBAAiB;AAC7C,QAAM,EAAE,eAAc,IAAK,gBAAe;AAC1C,QAAM,sBAAkB,qBAAgC,IAAI;AAC5D,QAAM,CAAC,WAAW,YAAY,QAAI,uBAAS,KAAK;AAChD,QAAM,EAAE,EAAC,IAAK,QAAO;AAErB,QAAM,EACJ,WAAW,qBAAqB,4BAAoB,IAAI,QAAuB,oBAAmB,IAChG;AAGJ,8BAAU,MAAK;AACb,UAAM,QAAQ,gBAAgB;AAC9B,QAAI,CAAC,SAAS,CAAC;AAAgB;AAG/B,QAAI,eAAe,OAAO;AACxB,YAAM,UAAU,cAAc,EAAE,MAAM,CAAC,QAAO;AAC5C,gBAAQ,MAAM,sCAAsC,GAAG;MACzD,CAAC;IACH;EACF,GAAG,CAAC,cAAc,CAAC;AAEnB,QAAM,sBAAkB,0BAAY,YAAW;AAC7C,UAAM,QAAQ,gBAAgB;AAC9B,QAAI,CAAC;AAAO;AAEZ,UAAM,MAAM;AAEZ,QAAI;AACF,UAAI,WAAW;AACb,cAAM,MAAK;AACX,cAAM,cAAc;AACpB,qBAAa,KAAK;MACpB,OAAO;AACL,cAAM,MAAM,KAAI;AAChB,qBAAa,IAAI;MACnB;IACF,SAAS,KAAK;AACZ,cAAQ,MAAM,8BAA8B,GAAG;AAC/C,mBAAa,KAAK;IACpB;EACF,GAAG,CAAC,WAAW,QAAQ,CAAC;AAExB,QAAM,uBAAmB,0BAAY,MAAM,aAAa,KAAK,GAAG,CAAA,CAAE;AAClE,aACEC,yBAAA,OAAA,EAAK,WAAU,2BAAyB,UAAA,KACtCD,wBAAA,SAAA,EACE,KAAK,iBACL,SAAS,kBACT,SAAS,iBAAgB,CAAA,OAE3BA,wBAAC,iBAAe,EACd,WAAU,mCACV,SAAS,iBACT,MAAK,UAAQ,cAEbC,yBAAA,OAAA,EAAK,WAAU,2CAAyC,UAAA,KACtDD,wBAAC,MAAI,EAAC,MAAK,UAAS,CAAA,GACnB,YAAY,EAAE,WAAW,IAAI,EAAE,cAAc,CAAC,EAAA,CAAA,EAC3C,CAAA,CACU,EAAA,CAAA;AAGxB;AC/DO,IAAM,2BAA2B,CAAC,EACvC,OACA,YACA,yBAAyB,KAAI,MACK;AAClC,QAAM,EAAE,mBAAkB,IAAK,kBAAiB;AAChD,QAAM,EAAE,YAAY,gBAAgB,QAAO,IAAK,mBAAkB;AAElE,aACEA,wBAAC,gBAAc,EACb,SAAS,WAAW,CAAA,GACpB,kBAAkB,gBAClB,MAAK,cACL,UAAU,OAAO,aAAY;AAC3B,UAAM,WAAW,OAAO,QAAQ;EAClC,GACA,OACA,YACA,MAAK,OAAK,UAET,8BACCC,yBAAAI,6BAAA,EAAA,UAAA,KACEL,wBAAA,MAAA,EAAI,WAAU,wCAAuC,CAAA,OACrDA,wBAAC,sBAAoB,CAAA,CAAA,CAAG,EAAA,CAAA,EAE3B,CAAA;AAGP;AASO,IAAM,4BAA4B,CAAC,EACxC,OACA,YACA,qBAAqB,MACrB,oBAAmB,MACgB;AACnC,QAAM,EAAE,gBAAe,IAAK,kBAAiB;AAC7C,QAAM,EAAE,SAAS,gBAAgB,SAAS,2BAA0B,IAClE,gBAAe;AAEjB,MAAI,CAAC;AAA4B,WAAO;AAExC,aACEA,wBAAC,gBAAc,EACb,SACA,MAAK,eACL,kBAAkB,gBAClB,UAAU,CAAC,aAAY;AACrB,YAAQ,OAAO,QAAQ;EACzB,GACA,OACA,YACA,MAAK,WAAS,UAEb,0BACCC,yBAAAI,6BAAA,EAAA,UAAA,KACEL,wBAAA,MAAA,EAAI,WAAU,wCAAuC,CAAA,OACrDA,wBAAC,aAAW,EAAC,UAAU,oBAAmB,CAAA,CAAI,EAAA,CAAA,EAEjD,CAAA;AAGP;ACxEO,IAAM,sBAAsB,CAAC,EAClC,OACA,WAAU,MACmB;AAC7B,QAAM,EAAE,eAAc,IAAK,kBAAiB;AAC5C,QAAM,EAAE,QAAQ,SAAS,eAAc,IAAK,eAAc;AAE1D,aACEA,wBAAC,gBAAc,EACb,SAAS,WAAW,CAAA,GACpB,MAAK,cACL,kBAAkB,gBAClB,UAAU,OAAO,aAAY;AAC3B,UAAM,OAAO,OAAO,QAAQ;EAC9B,GACA,OACA,YACA,MAAK,SAAQ,CAAA;AAGnB;ACbO,IAAM,iBAAiB,CAAC,EAC7B,aAAa,eAAe,KAAI,MACR;AACxB,aACEA,wBAAC,YAAU,EACT,WAAU,cACV,cAAc,gCACd,YAAsB,cAEtBA,wBAAC,MAAI,CAAA,CAAA,EAAG,CAAA;AAGd;AAEA,IAAM,OAAO,MAAK;AAChB,QAAM,EAAE,EAAC,IAAK,QAAO;AACrB,aACEC,yBAAA,OAAA,EAAK,WAAU,8BAA4B,UAAA,KACzCD,wBAAC,qBAAmB,EAAC,OAAO,EAAE,iBAAiB,EAAC,CAAA,OAChDA,wBAAC,0BAAwB,EAAC,OAAO,EAAE,cAAc,EAAC,CAAA,OAClDA,wBAAC,2BAAyB,EAAC,OAAO,EAAE,iBAAiB,EAAC,CAAA,CAAI,EAAA,CAAA;AAGhE;AAEA,IAAM,qCAAiC,yBAGrC,SAASsB,gCAA+B,EAAE,UAAS,GAAI,KAAG;AAC1D,QAAM,EAAE,EAAC,IAAK,QAAO;AACrB,aACEtB,wBAAC,YAAU,EACT,WAAW,aAAK,sCAAsC;IACpD,8CAA8C;EAC/C,CAAA,GACD,OAAO,EAAE,oBAAoB,GAC7B,MAAK,mBACL,IAAQ,CAAA;AAGd,CAAC;AC3BM,IAAM,2BAA2B,CACtC,UACE;AACF,QAAM,EACJ,SACA,MAAAgB,QAAO,0BACP,gBAAgB,OAChB,cACA,mBACA,GAAG,yBAAwB,IACzB;AACJ,QAAM,EAAE,EAAC,IAAK,QAAO;AACrB,QAAM,EAAE,mBAAkB,IAAK,kBAAiB;AAChD,QAAM,EACJ,YACA,sBACA,uBACA,oBACA,gBAAe,IACb,mBAAmB,EAAE,kBAAiB,CAAE;AAC5C,QAAM,CAAC,iBAAiB,kBAAkB,QAAI,uBAAS,KAAK;AAC5D,QAAM,cAAc,yBAAyB,OAAO,MAClD,WAAW,OAAM,CAAE;AAGrB,aACEhB,wBAAC,aAAW,EACV,OACE,CAAC,uBACG,EAAE,sCAAsC,IACvC,WAAW,EAAE,KAAK,GAEzB,iBAAgC,cAEhCC,yBAAC,iBAAe,EACd,QAAQ,oBACR,SACA,WAAW,aACT,CAAC,wBAAwB,+BAA+B,GAE1D,SAAQ,aACR,UACE,CAAC,wBAAyB,CAAC,qBAAqB,iBAAgB,eAGhE,qBACI,gCACA,6BAEN,SAAS,aACT,MAAMe,OACN,eAA4B,GACxB,0BACJ,cAAc,CAAC,UAAS;AACtB,uBAAmB,KAAK;AACxB,mBAAe,KAAK;EACtB,GAAC,UAAA,KAEDhB,wBAAC,MAAI,EAAC,MAAM,CAAC,qBAAqB,QAAQ,UAAS,CAAA,GAClD,CAAC,4BACAA,wBAAA,QAAA,EACE,WAAU,kCACV,OAAO,EAAE,sCAAsC,GAC/C,UAAS,IAAG,CAAA,GAGf,6BACCA,wBAAA,QAAA,EACE,WAAU,iCACV,OAAO,EAAE,wBAAwB,GACjC,UAAS,IAAG,CAAA,CAEf,EAAA,CAAA,EACe,CAAA;AAGxB;AAUO,IAAM,8BAA8B,CACzC,UACE;AACF,QAAM,EAAE,EAAC,IAAK,QAAO;AACrB,QAAM,EACJ,SACA,MAAAgB,YAAOhB,wBAAC,0BAAwB,EAAC,YAAW,OAAM,CAAA,GAClD,gBAAgB,OAChB,cACA,mBACA,GAAG,yBAAwB,IACzB;AAEJ,QAAM,EAAE,eAAe,mBAAmB,qBAAoB,IAC5D,qBAAqB,cAAc,UAAU;AAE/C,QAAM,EAAE,mBAAkB,IAAK,kBAAiB;AAChD,QAAM,EACJ,YACA,sBACA,uBACA,iBACA,mBAAkB,IAChB,mBAAmB,EAAE,kBAAiB,CAAE;AAE5C,QAAM,CAAC,iBAAiB,kBAAkB,QAAI,uBAAS,KAAK;AAC5D,QAAM,cAAc,yBAAyB,OAAO,YAAW;AAC7D,QAAI,CAAC,eAAe;AAClB,YAAM,kBAAiB;IACzB,OAAO;AACL,YAAM,WAAW,OAAM;IACzB;EACF,CAAC;AAED,aACEA,wBAAC,YAAU,EAAC,gBAAgB,CAAC,cAAc,UAAU,GAAC,cACpDA,wBAAC,wBAAsB,EACrB,YAAY,cAAc,YAC1B,oBAAoB,sBACpB,iBAAiB,EAAE,oBAAoB,GACvC,yBAAyB,EAAE,oCAAoC,GAC/D,gBAAgB,EAAE,0BAA0B,GAAC,cAE7CA,wBAAC,aAAW,EACV,OACE,CAAC,gBACG,EAAE,4CAA4C,IAC9C,CAAC,uBACC,EAAE,oCAAoC,IACrC,WAAW,EAAE,KAAK,GAE3B,iBAAgC,cAEhCC,yBAAC,iBAAe,EACd,QAAQ,oBACR,SACA,SAAQ,aACR,UACE,CAAC,wBACD,CAAC;EAEA,CAAC,qBAAqB,iBAAgB,eAGvC,qBAAqB,wBAAwB,qBAE/C,SAAS,aACT,MAAMe,OACN,eACA,YAAY,IAAE,GACV,0BACJ,cAAc,CAAC,UAAS;AACtB,uBAAmB,KAAK;AACxB,mBAAe,KAAK;EACtB,GAAC,UAAA,KAEDhB,wBAAC,MAAI,EAAC,MAAM,qBAAqB,YAAY,MAAK,CAAA,IAChD,CAAC,wBAAwB,CAAC,sBAC1BA,wBAAA,QAAA,EAAM,WAAU,kCAAgC,UAAA,IAAA,CAAA,GAEjD,6BACCA,wBAAA,QAAA,EACE,WAAU,iCACV,OAAO,EAAE,wBAAwB,GAAC,UAAA,IAAA,CAAA,CAIrC,EAAA,CAAA,EACe,CAAA,EACN,CAAA,EACS,CAAA;AAG/B;ACnLO,IAAM,2BAA2B,CACtC,UACE;AACF,QAAM,EACJ,SACA,MAAAgB,QAAO,qBACP,gBAAgB,OAChB,cACA,mBACA,GAAG,yBAAwB,IACzB;AACJ,QAAM,EAAE,EAAC,IAAK,QAAO;AACrB,QAAM,EAAE,eAAc,IAAK,kBAAiB;AAC5C,QAAM,EACJ,QACA,sBACA,uBACA,iBACA,mBAAkB,IAChB,eAAe,EAAE,kBAAiB,CAAE;AACxC,QAAM,CAAC,iBAAiB,kBAAkB,QAAI,uBAAS,KAAK;AAC5D,QAAM,cAAc,yBAAyB,OAAO,MAAM,OAAO,OAAM,CAAE;AAEzE,aACEhB,wBAAC,aAAW,EACV,OACE,CAAC,uBACG,EAAE,sCAAsC,IACvC,WAAW,EAAE,OAAO,GAE3B,iBAAgC,cAEhCC,yBAAC,iBAAe,EACd,QAAQ,oBACR,SACA,WAAW,aACT,CAAC,wBAAwB,+BAA+B,GAE1D,SAAQ,aAAW,eAEjB,qBACI,gCACA,6BAEN,SAAS,aACT,UACE,CAAC,wBAAyB,CAAC,qBAAqB,iBAElD,MAAMe,OACN,eAA4B,GACxB,0BACJ,cAAc,CAAC,UAAS;AACtB,uBAAmB,KAAK;AACxB,mBAAe,KAAK;EACtB,GAAC,UAAA,KAEDhB,wBAAC,MAAI,EAAC,MAAM,CAAC,qBAAqB,WAAW,aAAY,CAAA,GACxD,CAAC,4BACAA,wBAAA,QAAA,EACE,WAAU,kCACV,OAAO,EAAE,sCAAsC,GAC/C,UAAS,IAAG,CAAA,GAGf,6BACCA,wBAAA,QAAA,EACE,WAAU,iCACV,OAAO,EAAE,wBAAwB,GACjC,UAAS,IAAG,CAAA,CAEf,EAAA,CAAA,EACe,CAAA;AAGxB;AAUO,IAAM,8BAA8B,CACzC,UACE;AACF,QAAM,EAAE,EAAC,IAAK,QAAO;AACrB,QAAM,EACJ,SACA,MAAAgB,YAAOhB,wBAAC,qBAAmB,EAAC,YAAW,OAAM,CAAA,GAC7C,gBAAgB,OAChB,cACA,mBACA,GAAG,yBAAwB,IACzB;AAEJ,QAAM,EAAE,eAAe,mBAAmB,qBAAoB,IAC5D,qBAAqB,cAAc,UAAU;AAE/C,QAAM,EAAE,gBAAgB,gBAAe,IAAK,kBAAiB;AAC7D,QAAM,EACJ,QACA,oBACA,sBACA,uBACA,gBAAe,IACb,eAAe,EAAE,kBAAiB,CAAE;AACxC,QAAM,eAAe,gBAAe;AACpC,QAAM,2BAA2B,cAAc,MAAM;AACrD,QAAM,CAAC,iBAAiB,kBAAkB,QAAI,uBAAS,KAAK;AAC5D,QAAM,cAAc,yBAAyB,OAAO,YAAW;AAC7D,QAAI,CAAC,eAAe;AAClB,YAAM,kBAAiB;IACzB,OAAO;AACL,YAAM,OAAO,OAAM;IACrB;EACF,CAAC;AAED,aACEA,wBAAC,YAAU,EAAC,gBAAgB,CAAC,cAAc,UAAU,GAAC,cACpDA,wBAAC,wBAAsB,EACrB,YAAY,cAAc,YAC1B,oBAAoB,sBACpB,iBAAiB,EAAE,+BAA+B,GAClD,yBAAyB,EACvB,+CAA+C,GAEjD,gBAAgB,EAAE,qCAAqC,GAAC,cAExDA,wBAAC,aAAW,EACV,OACE,CAAC,gBACG,EAAE,4CAA4C,IAC9C,CAAC,uBACC,EAAE,sCAAsC,IACxC,CAAC,2BACC,EAAE,4CAA4C,IAC9C,WAAW,EAAE,OAAO,GAE9B,iBAAgC,cAEhCC,yBAAC,iBAAe,EACd,QAAQ,oBACR,SACA,SAAQ,aACR,UACE,CAAC,wBACD,CAAC,iBACD,CAAC,4BACA,CAAC,qBAAqB,iBAAgB,eAGvC,qBAAqB,wBAAwB,qBAE/C,SAAS,aACT,MAAMe,OACN,eACA,YAAY,IAAE,GACV,0BACJ,cAAc,CAAC,UAAS;AACtB,uBAAmB,KAAK;AACxB,mBAAe,KAAK;EACtB,GAAC,UAAA,KAEDhB,wBAAC,MAAI,EAAC,MAAM,qBAAqB,eAAe,SAAQ,CAAA,IACtD,CAAC,wBACD,CAAC,iBACD,CAAC,iCACDA,wBAAAA,QAAAA,EAAM,WAAU,kCAAgC,UAAA,IAAA,CAAA,GAEjD,6BACCA,wBAAA,QAAA,EACE,WAAU,iCACV,OAAO,EAAE,wBAAwB,GAAC,UAAA,IAAA,CAAA,CAIrC,EAAA,CAAA,EACe,CAAA,EACN,CAAA,EACS,CAAA;AAG/B;AC1MA,IAAM,cAAc,CAAC,UAGhB;AACH,QAAM,EAAE,SAAS,MAAK,IAAK;AAC3B,QAAM,EAAE,EAAC,IAAK,QAAO;AACrB,aACEC,yBAAA,OAAA,EAAK,WAAU,qCAAmC,UAAA,KAChDA,yBAAAA,UAAAA,EACE,WAAU,gDACV,MAAK,UAAQ,eACD,qBACZ,SAAS,SAAO,UAAA,KAEhBD,wBAAC,MAAI,EACH,WAAU,2DACV,MAAK,SAAQ,CAAA,GAEd,EAAE,YAAY,CAAC,EAAA,CAAA,OAElBA,wBAAC,YAAU,EAAC,gBAAgB,CAAC,cAAc,QAAQ,GAAC,cAClDC,yBAAAA,UAAAA,EACE,WAAU,8CACV,MAAK,UAAQ,eACD,2BACZ,SAAS,OAAK,UAAA,KAEdD,wBAAC,MAAI,EACH,WAAU,yDACV,MAAK,WAAU,CAAA,GAEhB,EAAE,kBAAkB,CAAC,EAAA,CAAA,EACf,CAAA,CACE,EAAA,CAAA;AAGnB;AAEA,IAAM,iCAA6B,yBAGjC,SAASuB,4BAA2B,EAAE,UAAS,GAAI,KAAG;AACtD,QAAM,EAAE,EAAC,IAAK,QAAO;AACrB,aACEvB,wBAAC,aAAW,EAAC,OAAO,EAAE,YAAY,GAAG,iBAAiB,WAAS,cAC7DA,wBAAC,YAAU,EACT,MAAM,YAAY,UAAU,YAC5B,SAAS,YAAY,WAAW,UAAQ,eAC5B,qBACZ,IAAQ,CAAA,EACR,CAAA;AAGR,CAAC;AASM,IAAM,0BAA0B,CAAC,EACtC,SACA,QAAO,MACmB;AAC1B,QAAM,OAAO,QAAO;AAEpB,QAAM,kBAAoD,0BACxD,OAAO,MAAK;AACV,QAAI,SAAS;AACX,cAAQ,CAAC;IACX,WAAW,MAAM;AACf,YAAM,KAAK,MAAK;AAChB,gBAAO;IACT;EACF,GACA,CAAC,SAAS,SAAS,IAAI,CAAC;AAG1B,QAAM,oBAAsD,0BAC1D,OAAO,MAAK;AACV,QAAI,SAAS;AACX,cAAQ,CAAC;IACX,WAAW,MAAM;AACf,YAAM,KAAK,QAAO;AAClB,gBAAO;IACT;EACF,GACA,CAAC,SAAS,SAAS,IAAI,CAAC;AAG1B,aACEA,wBAAC,YAAU,EAAC,WAAU,aAAY,cAAc,4BAA0B,cACxEA,wBAAC,aAAW,EAAC,OAAO,eAAe,SAAS,YAAW,CAAA,EAAI,CAAA;AAGjE;AAEO,IAAM,mBAAmB,CAAC,EAC/B,UACA,SACA,SACA,QAAO,MACmB;AAC1B,QAAM,OAAO,QAAO;AACpB,QAAM,EAAE,EAAC,IAAK,QAAO;AACrB,QAAM,kBAAoD,0BACxD,OAAO,MAAK;AACV,QAAI,SAAS;AACX,cAAQ,CAAC;IACX,WAAW,MAAM;AACf,YAAM,KAAK,MAAK;AAChB,gBAAO;IACT;EACF,GACA,CAAC,SAAS,SAAS,IAAI,CAAC;AAE1B,aACEA,wBAAC,YAAU,EACT,UACA,MAAK,YACL,SAAQ,UACR,OAAO,WAAW,EAAE,YAAY,GAAC,eACrB,sBACZ,SAAS,YAAW,CAAA;AAG1B;AC5HO,IAAM,eAAe,CAAC,EAAE,QAAO,UACpCC,yBAAAA,OAAAA,EAAK,WAAU,4BAA0B,UAAA,KACvCD,wBAAC,YAAU,EAAC,gBAAgB,CAAC,cAAc,UAAU,GAAC,cACpDA,wBAAC,gCAA8B,EAAA,cAC7BA,wBAAC,6BAA2B,CAAA,CAAA,EAAG,CAAA,EACA,CAAA,OAEnCA,wBAAC,YAAU,EAAC,gBAAgB,CAAC,cAAc,UAAU,GAAC,cACpDA,wBAAC,6BAA2B,CAAA,CAAA,EAAG,CAAA,OAEjCA,wBAAC,YAAU,EAAC,gBAAgB,CAAC,cAAc,eAAe,GAAC,cACzDA,wBAAC,iBAAe,CAAA,CAAA,EAAG,CAAA,OAErBA,wBAAC,YAAU,EAAC,gBAAgB,CAAC,cAAc,WAAW,GAAC,cACrDA,wBAAC,mBAAiB,CAAA,CAAA,EAAG,CAAA,OAEvBA,wBAAC,YAAU,EACT,gBAAgB;EACd,cAAc;EACd,cAAc;AACf,GAAA,cAEDA,wBAAC,kBAAgB,CAAA,CAAA,EAAG,CAAA,OAEtBA,wBAAC,kBAAgB,EAAC,QAAgB,CAAA,CAAI,EAAA,CAAA;AC3B1C,IAAM,4BAAwB,mBAAK,MAAM,OAAO,yCAAyB,CAAC;AAE1E,IAAK;CAAL,SAAKwB,SAAM;AACT,EAAAA,QAAA,MAAA,IAAA;AACA,EAAAA,QAAA,IAAA,IAAA;AACA,EAAAA,QAAA,KAAA,IAAA;AACF,GAJK,WAAA,SAAM,CAAA,EAAA;AAiBJ,IAAM,YAAY,CAAC,UAAyB;AACjD,QAAM,EACJ,kBAAkB,IAClB,mBAAmB,KACnB,sBAAsB,IACtB,uBAAuB,IACvB,sBAAsB,IACtB,uBAAuB,IACvB,gBAAgB,OAChB,+BAA+B,KAAI,IACjC;AACJ,QAAM,CAAC,eAAe,gBAAgB,QAAI,uBAExC,MAAK;AACL,UAAM,MAAM,KAAK,IAAG;AACpB,WAAO,MAAM,KAAK,EAAE,QAAQ,GAAE,GAAI,CAAC,GAAG,OAAO,EAAE,GAAG,MAAM,GAAG,GAAG,EAAC,EAAG;EACpE,CAAC;AAED,QAAM,EAAE,EAAC,IAAK,QAAO;AACrB,QAAM,CAAC,gBAAgB,iBAAiB,QAAI,uBAAS,GAAG;AACxD,QAAM,CAAC,kBAAkB,mBAAmB,QAAI,uBAAS,GAAG;AAC5D,QAAM,CAAC,qBAAqB,sBAAsB,QAAI,uBAAS,GAAG;AAClE,QAAM,CAAC,uBAAuB,wBAAwB,QAAI,uBAAS,GAAG;AACtE,QAAM,oBAAgB,qBAAwB,MAAS;AACvD,QAAM,EAAE,mBAAkB,IAAK,kBAAiB;AAChD,QAAM,kBAAkB,mBAAkB;AAE1C,8BAAU,MAAK;AACb,QAAI,CAAC;AAAiB;AACtB,QAAI,CAAC,cAAc,SAAS;AAC1B,oBAAc,UAAU;AACxB;IACF;AACA,UAAM,0BAA0B,cAAc;AAC9C,sBAAkB,MAAK;AACrB,aAAO,wBAAwB,yBAAyB,eAAe;IACzE,CAAC;AACD,wBAAoB,MAAK;AACvB,aAAO,0BACL,yBACA,eAAe;IAEnB,CAAC;AACD,2BAAuB,MAAK;AAC1B,aAAO,6BACL,yBACA,eAAe;IAEnB,CAAC;AACD,6BAAyB,MAAK;AAC5B,aAAO,+BACL,yBACA,eAAe;IAEnB,CAAC;AAED,qBAAiB,CAAC,eAAc;AAC9B,YAAM,mBAAmB,WAAW,MAAM,GAAG;AAC7C,uBAAiB,KAAK;QACpB,GAAG,gBAAgB;QACnB,GACE,gBAAgB,eAAe,4BAC/B,gBAAgB,oBAAoB;MACvC,CAAA;AACD,aAAO;IACT,CAAC;AAED,kBAAc,UAAU;EAC1B,GAAG,CAAC,eAAe,CAAC;AAEpB,QAAM,oBAAoB;IACxB,UAAU;IACV,WAAW;IACX,OAAO,iBAAiB,eAAe,4BAA4B;;AAGrE,QAAM,wBAAwB;IAC5B,UAAU;IACV,WAAW;;AAGb,QAAM,wBAAwB;IAC5B,UAAU;IACV,WAAW;;AAGb,aACExB,wBAAA,OAAA,EAAK,WAAU,yBAAuB,UACnC,uBACCC,yBAAAA,6BAAAA,EAAAA,UAAAA,KACEA,yBAAA,OAAA,EAAK,WAAU,iCAA+B,UAAA,KAC5CA,yBAAAA,MAAAA,EAAI,WAAU,kCAAgC,UAAA,KAC5CD,wBAAC,MAAI,EACH,WAAU,+BACV,MAAK,eAAc,CAAA,GAEpB,EAAE,cAAc,CAAC,EAAA,CAAA,OAEpBA,wBAAAA,KAAAA,EAAG,WAAU,sCAAoC,UAC9C,EACC,gGAAgG,EACjG,CAAA,CACC,EAAA,CAAA,OAGNA,wBAAA,OAAA,EAAK,WAAU,uCAAqC,cAClDA,wBAAC,uBAAQ,EAAC,UAAU,8BAA4B,cAC9CA,wBAAC,uBAAqB,EAAC,QAAQ,cAAa,CAAA,EAAI,CAAA,EACvC,CAAA,OAGbC,yBAAAA,OAAAA,EAAK,WAAU,iCAA+B,UAAA,KAC5CA,yBAAA,MAAA,EAAI,WAAU,kCAAgC,UAAA,KAC5CD,wBAAC,MAAI,EACH,WAAU,+BACV,MAAK,kBAAiB,CAAA,GAEvB,EAAE,mBAAmB,CAAC,EAAA,CAAA,OAEzBA,wBAAA,KAAA,EAAG,WAAU,sCAAoC,UAC9C,EAAE,6DAA6D,EAAC,CAAA,CAC/D,EAAA,CAAA,OAGNC,yBAAA,OAAA,EAAK,WAAU,yCAAuC,UAAA,KACpDD,wBAAC,UAAQ,EAAC,OAAO,EAAE,QAAQ,GAAG,OAAO,gBAAgB,WAAU,CAAA,OAC/DA,wBAAC,UAAQ,EACP,OAAO,EAAE,SAAS,GAClB,OAAO,GAAG,gBAAgB,eAAe,wBAAwB,QACjE,YAAY,kBAAiB,CAAA,OAE/BA,wBAAC,UAAQ,EACP,OAAO,EAAE,gBAAgB,GACzB,OAAO,GAAG,gBAAgB,gBAAgB,iBAAiB,QAC3D,YAAY;IACV,GAAG;IACH,OAAO,gBAAgB,gBAAgB;IACxC,CAAA,OAEHA,wBAAC,UAAQ,EACP,OAAO,EAAE,gBAAgB,GACzB,OAAO,GAAG,gBAAgB,eAAe,iBAAiB,QAC1D,YAAY;IACV,GAAG;IACH,OAAO,gBAAgB,eAAe;EACvC,EAAA,CAAA,OAEHA,wBAAC,UAAQ,EACP,OAAO,GAAG,EAAE,oBAAoB,CAAC,GAAG,gBAAgB,YAAY,eAAe,IAAI,EAAE,IACrF,OAAO,YAAY,gBAAgB,cAAc,EAAC,CAAA,OAEpDA,wBAAC,UAAQ,EACP,OAAO,EAAE,6BAA6B,GACtC,OAAO,gBAAgB,eAAe,yBAAwB,CAAA,OAEhEA,wBAAC,UAAQ,EACP,OAAO,EAAE,sBAAsB,GAC/B,OAAO,YAAY,gBAAgB,eAAe,EAAC,CAAA,OAErDA,wBAAC,UAAQ,EACP,OAAO,EAAE,6BAA6B,GACtC,OAAO,gBAAgB,gBAAgB,yBAAwB,CAAA,OAEjEA,wBAAC,UAAQ,EAAC,OAAO,EAAE,iBAAiB,GAAG,OAAO,eAAc,CAAA,OAC5DA,wBAAC,UAAQ,EAAC,OAAO,EAAE,mBAAmB,GAAG,OAAO,iBAAgB,CAAA,CAAI,EAAA,CAAA,OAGtEC,yBAAA,OAAA,EAAK,WAAU,iCAA+B,UAAA,KAC5CA,yBAAA,MAAA,EAAI,WAAU,kCAAgC,UAAA,KAC5CD,wBAAC,MAAI,EAAC,WAAU,+BAA8B,MAAK,MAAK,CAAA,GACvD,EAAE,mBAAmB,CAAC,EAAA,CAAA,OAEzBA,wBAAA,KAAA,EAAG,WAAU,sCAAoC,UAC9C,EACC,oEAAoE,EACrE,CAAA,CACC,EAAA,CAAA,OAGNC,yBAAA,OAAA,EAAK,WAAU,yCAAuC,UAAA,KACpDD,wBAAC,UAAQ,EACP,OAAO,EAAE,SAAS,GAClB,OAAO,GAAG,gBAAgB,oBAAoB,wBAAwB,QACtE,YAAY,kBAAiB,CAAA,OAE/BA,wBAAC,UAAQ,EACP,OAAO,EAAE,aAAa,GACtB,OAAO,iBAAiB,eAAe,EAAC,CAAA,OAE1CA,wBAAC,UAAQ,EACP,OAAO,EAAE,yBAAyB,GAClC,OAAO,oBAAmB,CAAA,OAE5BA,wBAAC,UAAQ,EACP,OAAO,EAAE,yBAAyB,GAClC,OAAO,sBAAqB,CAAA,OAE9BA,wBAAC,UAAQ,EACP,OAAO,EAAE,wBAAwB,GACjC,OAAO,GAAG,gBAAgB,oBAAoB,iBAAiB,QAC/D,YAAY;IACV,GAAG;IACH,OAAO,gBAAgB,oBAAoB;IAC5C,CAAA,OAEHA,wBAAC,UAAQ,EACP,OAAO,EAAE,wBAAwB,GACjC,OAAO,GAAG,gBAAgB,qBAAqB,iBAAiB,QAChE,YAAY;IACV,GAAG;IACH,OAAO,gBAAgB,qBAAqB;EAC7C,EAAA,CAAA,CACD,EAAA,CAAA,CACE,EAAA,CAAA,EAET,CAAA;AAGP;AAEA,IAAM,sBAAsB,CAAC,UAAkC;AAC7D,QAAM,EAAE,YAAW,IAAK;AACxB,QAAM,CAAC,QAAQ,SAAS,QAAI,uBAAS,KAAK;AAE1C,QAAM,EAAE,MAAM,gBAAgB,QAAO,IAAK,YAAY;IACpD,MAAM;IACN,cAAc;EACf,CAAA;AAED,QAAM,QAAQ,SAAS,OAAO;AAE9B,QAAM,EAAE,mBAAmB,iBAAgB,IAAK,gBAAgB,CAAC,KAAK,CAAC;AAEvE,aACEC,yBAAAI,6BAAA,EAAA,UAAA,KACEL,wBAAA,OAAA,EACE,WAAU,+BACV,KAAK,KAAK,cAAY,GAClB,kBAAiB,GAAE,cAEvBA,wBAAC,MAAI,EAAC,WAAU,qCAAoC,MAAK,OAAM,CAAA,EAAG,CAAA,GAEnE,cACCA,wBAAA,OAAA,EACE,WAAU,4CACV,KAAK,KAAK,aACV,OAAO,gBAAc,GACjB,iBAAgB,GAAE,UAErB,YAAW,CAAA,CAEf,EAAA,CAAA;AAGP;AAEA,IAAM,WAAW,CAAC,UAAkD;AAClE,QAAM,EAAE,UAAU,OAAM,IAAK;AAC7B,aACEA,wBAAA,OAAA,EACE,WAAW,aAAK,8BAA8B;IAC5C,oCAAoC,WAAW,OAAO;IACtD,kCAAkC,WAAW,OAAO;IACpD,mCAAmC,WAAW,OAAO;GACtD,GAAC,cAEFA,wBAAA,OAAA,EAAK,WAAU,oCAAkC,SAAU,CAAA,EAAO,CAAA;AAGxE;AAEO,IAAM,WAAW,CAAC,UAKpB;AACH,QAAM,EAAE,OAAO,OAAO,aAAa,WAAU,IAAK;AAElD,QAAM,EAAE,EAAC,IAAK,QAAO;AACrB,QAAM,SAAS,aAAa,SAAS,UAAU,IAAI;AAEnD,aACEC,yBAAA,OAAA,EAAK,WAAU,+BAA6B,UAAA,KAC1CA,yBAAA,OAAA,EAAK,WAAU,uCAAqC,UAAA,KAClDA,yBAAA,OAAA,EAAK,WAAU,qCAAmC,UAAA,CAC/C,OACA,mBAAeD,wBAAC,qBAAmB,EAAC,YAAwB,CAAA,CAAI,EAAA,CAAA,OAEnEA,wBAAA,OAAA,EAAK,WAAU,qCAAmC,UAAE,MAAK,CAAA,CAAO,EAAA,CAAA,GAEjE,cAAUA,wBAAC,UAAQ,EAAC,QAAc,UAAG,EAAE,MAAM,EAAC,CAAA,CAAY,EAAA,CAAA;AAGjE;AAEA,IAAM,WAAW,CAAC,WAIL;AACX,QAAM,EAAE,OAAO,UAAU,UAAS,IAAK;AACvC,MAAI,SAAS;AAAU,WAAO,OAAO;AACrC,MAAI,SAAS,YAAY,SAAS;AAAW,WAAO,OAAO;AAC3D,MAAI,SAAS;AAAW,WAAO,OAAO;AACtC,SAAO,OAAO;AAChB;AAEA,IAAM,cAAc,CAAC,UAAgC;AACnD,QAAM,EACJ,mBAAmB,GACnB,oBAAoB,GACpB,wBAAwB,IAAG,IACzB;AACJ,MAAIQ,QAAO;AACX,MAAI,KAAK,GAAG;AACV,IAAAA,QAAO,GAAG,CAAC,IAAI,CAAC;AAChB,QAAI,KAAK;AACP,MAAAA,SAAQ,IAAI,GAAG;IACjB;EACF;AACA,SAAOA;AACT;AAEA,IAAM,cAAc,CAAC,oBAA4C;AAC/D,QAAM,EAAE,kBAAiB,IAAK,gBAAgB;AAC9C,MAAI,CAAC,qBAAqB,CAAC,kBAAkB,OAAU,UAAU,KAAK,GAAG;AACvE,WAAO;EACT;AACA,QAAM,CAAA,EAAGE,KAAI,IAAI,kBAAkB,OAAU,UAAU,KAAK,EAAE,MAAM,GAAG;AACvE,SAAOA,QAAO,KAAKA,KAAI,MAAM;AAC/B;AAEA,IAAM,mBAAmB,CAAC,oBAA4C;AACpE,QAAM,EAAE,kBAAiB,IAAK,gBAAgB;AAC9C,MAAI,CAAC,qBAAqB,CAAC,kBAAkB,OAAU,UAAU,KAAK,GAAG;AACvE,WAAO;EACT;AACA,QAAM,CAAA,EAAGA,KAAI,IAAI,kBAAkB,OAAU,UAAU,KAAK,EAAE,MAAM,GAAG;AACvE,SAAOA,SAAQ;AACjB;AAEA,IAAM,0BAA0B,CAC9B,yBACA,oBACE;AACF,QAAM,EACJ,gBAAgB,EACd,gBAAgB,wBAChB,WAAW,kBAAiB,EAC7B,IACC;AAEJ,QAAM,EACJ,gBAAgB,EAAE,gBAAgB,UAAS,EAAE,IAC3C;AAEJ,QAAM,YAAY,iBAAiB;AACnC,QAAM,cAAc,YAAY;AAChC,SAAO,IAAK,YAAY,IAAK,aAAa,QAAQ,CAAC,CAAC;AACtD;AAEA,IAAM,4BAA4B,CAChC,yBACA,oBACE;AACF,QAAM,EACJ,iBAAiB,EACf,oBAAoB,4BACpB,WAAW,kBAAiB,EAC7B,IACC;AAEJ,QAAM,EACJ,iBAAiB,EAAE,oBAAoB,UAAS,EAAE,IAChD;AAEJ,QAAM,gBAAgB,qBAAqB;AAC3C,QAAM,cAAc,YAAY;AAChC,SAAO,IAAK,gBAAgB,IAAK,aAAa,QAAQ,CAAC,CAAC;AAC1D;AAEA,IAAM,+BAA+B,CACnC,yBACA,oBACE;AACF,QAAM,qBAAqB,wBAAwB;AACnD,QAAM,aAAa,gBAAgB;AAEnC,QAAM,YACJ,WAAW,iBAAiB,mBAAmB;AACjD,QAAM,cAAc,WAAW,YAAY,mBAAmB;AAE9D,SAAO,IAAK,YAAY,IAAK,aAAa,QAAQ,CAAC,CAAC;AACtD;AAEA,IAAM,iCAAiC,CACrC,yBACA,oBACE;AACF,QAAM,qBAAqB,wBAAwB;AACnD,QAAM,aAAa,gBAAgB;AAEnC,QAAM,gBACJ,WAAW,qBAAqB,mBAAmB;AACrD,QAAM,cAAc,WAAW,YAAY,mBAAmB;AAE9D,SAAO,IAAK,gBAAgB,IAAK,aAAa,QAAQ,CAAC,CAAC;AAC1D;AC1aO,IAAM,kBAAkB,UAC7BV,wBAAC,YAAU,EAAC,WAAU,WAAU,cAAc,kBAAgB,cAC5DA,wBAAC,WAAS,CAAA,CAAA,EAAG,CAAA;AAIjB,IAAM,uBAAmB,yBAGvB,SAASiB,kBAAiB,OAAO,KAAG;AACpC,QAAM,EAAE,EAAC,IAAK,QAAO;AACrB,QAAM,EAAE,SAAS,UAAS,IAAK;AAE/B,aACEjB,wBAAC,iBAAe,EACd,KACA,QAAQ,WACR,SACA,OAAO,WAAW,EAAE,YAAY,GAAC,eACrB,gBAAc,cAE1BA,wBAAC,MAAI,EAAC,MAAK,QAAO,CAAA,EAAG,CAAA;AAG3B,CAAC;ACxBM,IAAM,0BAA0B,CACrC,UACE;AACF,QAAM,EAAE,EAAC,IAAK,QAAO;AACrB,QAAM,EACJ,SACA,MAAAgB,QAAO,2BACP,gBAAgB,OAChB,aAAY,IACV;AACJ,QAAM,CAAC,iBAAiB,kBAAkB,QAAI,uBAAS,KAAK;AAE5D,aACEhB,wBAAC,aAAW,EACV,OAAO,WAAW,EAAE,UAAU,GAC9B,iBAAgC,cAEhCA,wBAAC,iBAAe,EACd,MAAMgB,OACN,eACA,SAAgB,eACJ,uBACZ,cAAc,CAAC,UAAS;AACtB,uBAAmB,KAAK;AACxB,mBAAe,KAAK;EACtB,GAAC,cAEDhB,wBAAC,MAAI,EAAC,MAAK,UAAS,CAAA,EAAG,CAAA,EACP,CAAA;AAGxB;ACtCO,IAAM,qBAAqB,CAAC,EAAE,KAAI,MAA0B;AACjE,MAAI,CAAC,KAAK;AAAQ,WAAO;AAEzB,aACEA,wBAAAK,6BAAA,EAAA,cACEL,wBAAA,OAAA,EAAK,WAAU,kCAAgC,UAC5C,KAAK,IAAI,CAAC,eACTA,wBAAC,wBAAsB,EAAc,OAAc,GAAtB,MAAM,CACpC,EAAC,CAAA,EACE,CAAA;AAGZ;AAEA,IAAM,yBAAyB,CAAC,EAAE,OAAM,MAA0B;AAChE,QAAM,OAAO,QAAO;AAEpB,QAAM,0BAA0B,MAAK;AACnC,QAAI;AAAQ,YAAM,YAAY,MAAM;EACtC;AAEA,aACEC,yBAAA,OAAA,EAAK,WAAU,uCAAqC,UAAA,KAClDD,wBAAA,OAAA,EAAK,WAAU,qDAAmD,UAC/D,OAAM,CAAA,OAETA,wBAAC,YAAU,EAAC,gBAAgB,CAAC,cAAc,WAAW,GAAC,cACrDA,wBAAC,YAAU,EAAC,SAAS,yBAAuB,UAAA,UAAA,CAAA,EAAsB,CAAA,CACvD,EAAA,CAAA;AAGnB;ACzBO,IAAM,4BAA4B,CAAC,EACxC,QAAO,MAC4B;AACnC,QAAM,EAAE,iBAAiB,6BAA4B,IAAK,kBAAiB;AAC3E,QAAM,eAAe,gBAAe;AACpC,QAAM,4BAA4B,6BAA4B;AAC9D,QAAM,EAAE,EAAC,IAAK,QAAO;AAErB,aACEC,yBAAA,OAAA,EAAK,WAAU,sCAAoC,UAAA,KACjDA,yBAAA,OAAA,EAAK,WAAU,6CAA2C,UAAA,CACvD,EAAE,cAAc,GAAG,SACpBA,yBAAA,QAAA,EAAM,WAAU,mDAAiD,UAAA,CAAA,KAC7D,aAAa,QAAM,GAAA,EAAA,CAAA,GAEtB,4BAA4B,SAC3BD,wBAAA,QAAA,EAAM,WAAU,uDAAqD,UAClE,EAAE,aAAa,EAAE,OAAO,0BAAyB,CAAE,EAAC,CAAA,CAExD,EAAA,CAAA,OAEHA,wBAAC,YAAU,EACT,SAAS,SACT,WAAU,oDACV,MAAK,QAAO,CAAA,CACZ,EAAA,CAAA;AAGR;ACjBO,IAAM,6BAA6B,CAAC,EACzC,aACA,cAAc,mBAAkB,MACI;AACpC,QAAM,YAAY,SAAS,WAAW;AACtC,QAAM,YAAY,SAAS,WAAW;AACtC,QAAM,aAAa,SAAS,WAAW;AAEvC,QAAM,EAAE,EAAC,IAAK,QAAO;AAErB,aACEC,yBAAA,OAAA,EAAK,WAAU,uCAAqC,UAAA,KAClDD,wBAAC,QAAM,EAAC,MAAM,YAAY,MAAM,UAAU,YAAY,MAAK,CAAA,OAC3DA,wBAAC,aAAW,EAAC,YAAwB,CAAA,OACrCC,yBAAA,OAAA,EAAK,WAAU,8DAA4D,UAAA,KACzED,wBAAC,gBAAc,EACb,OAAO,YAAY,EAAE,eAAe,IAAI,EAAE,gBAAgB,GAC1D,WAAW,aACT,6CACA,6CACE,YAAY,QAAQ,SACtB,EAAE,EACH,CAAA,OAEHA,wBAAC,gBAAc,EACb,OAAO,YAAY,EAAE,WAAW,IAAI,EAAE,YAAY,GAClD,WAAW,aACT,6CACA,6CACE,YAAY,WAAW,YACzB,EAAE,EACH,CAAA,GAEF,kBACCA,wBAAC,gBAAc,EACb,OAAO,EAAE,QAAQ,GACjB,WAAW,aACT,6CACA,kDAAkD,EACnD,CAAA,OAILA,wBAAC,YAAU,EAAC,WAAU,cAAa,cAAcM,gBAAY,cAC3DN,wBAAC,uBAAuB,UAAQ,EAC9B,OAAO,EAAE,aAAa,WAAW,OAAM,GAAE,cAEzCA,wBAAC,+BAA6B,CAAA,CAAA,EAAG,CAAA,EACD,CAAA,CACvB,EAAA,CAAA,CACT,EAAA,CAAA;AAGZ;AAEA,IAAM,iBAAiB,CAAC,cACtBA,wBAAC,aAAW,EAAA,GAAK,MAAK,CAAA;AAQxB,IAAM,qBAAqB,CAAC,EAAE,YAAW,MAAwB;AAC/D,QAAM,gBAAgB,iBAAgB;AACtC,QAAM,EAAE,EAAC,IAAK,QAAO;AAErB,QAAM,SAAS,YAAY,WAAW,eAAe,KAAK,EAAE,IAAI,IAAI;AACpE,QAAM,WAAW,YAAY,QAAQ,YAAY,UAAU,EAAE,SAAS;AACtE,MAAI;AACJ,MAAI,CAAC,YAAY,MAAM;AACrB,kBAAc,UAAU,YAAY,EAAE,SAAS;EACjD,WAAW,QAAQ;AACjB,kBAAc,GAAG,QAAQ,KAAK,MAAM;EACtC,OAAO;AACL,kBAAc;EAChB;AAEA,aACEA,wBAAC,aAAW,EACV,WAAU,qDACV,OAAO,aAAW,UAEjB,YAAW,CAAA;AAGlB;AAEA,IAAMM,qBAAe,yBACnB,SAAS,aAAa,OAAO,KAAG;AAC9B,aAAON,wBAAC,YAAU,EAAC,SAAS,MAAM,WAAW,MAAK,YAAW,IAAQ,CAAA;AACvE,CAAC;ACxGI,IAAM,yBAAyB,CAAC,EACrC,KAAI,UAEJA,wBAAAA,OAAAA,EAAK,WAAU,kCAAgC,UAC5C,KAAK,IAAI,CAAC,oBACTA,wBAAC,4BAA0B,EAEzB,YAAwB,GADnB,YAAY,SAAS,CAG7B,EAAC,CAAA;ACjBC,IAAM,6BAA6B,MAAK;AAC7C,QAAM,EAAE,EAAC,IAAK,QAAO;AACrB,aACEA,wBAAA,OAAA,EAAK,WAAU,sCAAoC,UAChD,EAAE,uBAAuB,EAAC,CAAA;AAGjC;ACKO,IAAM,cAAc,CAAC,EAC1B,YACA,UACA,GAAG,KAAI,MACc;AACrB,QAAM,CAAC,cAAc,eAAe,QAAI,uBACtC,IAAI;AAEN,8BAAU,MAAK;AACb,QAAI,CAAC;AAAc;AAEnB,UAAM,gBAAgB,CAAC,MAAoB;AACzC,UAAI,EAAE,IAAI,YAAW,MAAO;AAAU,mBAAU;IAClD;AAEA,iBAAa,iBAAiB,WAAW,aAAa;AAEtD,WAAO,MAAK;AACV,mBAAa,oBAAoB,WAAW,aAAa;IAC3D;EACF,GAAG,CAAC,YAAY,YAAY,CAAC;AAE7B,aACEC,yBAAA,OAAA,EACE,WAAW,aAAK,sCAAsC;IACpD,8CAA8C;GAC/C,GAAC,UAAA,KAEFD,wBAAAA,SAAAA,EAAO,aAAY,UAAQ,GAAK,MAAM,KAAK,gBAAe,CAAA,GACzD,eACCA,wBAAA,UAAA,EACE,WAAU,sCACV,SAAS,YAAU,cAEnBA,wBAAA,QAAA,EAAM,WAAU,wCAAuC,CAAA,EAAG,CAAA,QAG5DA,wBAAAA,QAAAA,EAAM,WAAU,gCAA+B,CAAA,CAChD,EAAA,CAAA;AAGP;ACnCM,SAAU,cAAiB,EAC/B,4BAA0B,kBAC1ByB,qBAAmBC,kBACnB,uBACA,eACA,iBAAgB,GACM;AACtB,MAAI,uBAAuB;AACzB,eACE1B,wBAAA,OAAA,EAAK,WAAU,sCAAoC,cACjDA,wBAACyB,oBAAgB,CAAA,CAAA,EAAG,CAAA;EAG1B;AACA,MAAI,CAAC,cAAc,QAAQ;AACzB,eAAOzB,wBAAC,4BAA0B,CAAA,CAAA;EACpC;AAEA,aAAOA,wBAAC,kBAAgB,EAAC,MAAM,cAAa,CAAA;AAC9C;ACrBO,IAAM,YAAY,CAAI,EAC3B,mBAAmB,KACnB,UACA,cAAc,GAAE,MAC4B;AAC5C,QAAM,CAAC,eAAe,gBAAgB,QAAI,uBAAc,CAAA,CAAE;AAC1D,QAAM,CAAC,uBAAuB,wBAAwB,QAAI,uBAAS,KAAK;AAExE,QAAM,kBAAc,qBAAO,QAAQ;AACnC,cAAY,UAAU;AAEtB,8BAAU,MAAK;AACb,QAAI,CAAC,YAAY,QAAQ;AACvB,+BAAyB,KAAK;AAC9B,uBAAiB,CAAA,CAAE;AACnB;IACF;AAEA,6BAAyB,IAAI;AAE7B,UAAM,UAAU,WAAW,YAAW;AACpC,UAAI;AACF,cAAM,UAAU,MAAM,YAAY,QAAQ,WAAW;AACrD,yBAAiB,OAAO;MAC1B,SAAS,OAAO;AACd,gBAAQ,MAAM,KAAK;MACrB;AACE,iCAAyB,KAAK;MAChC;IACF,GAAG,gBAAgB;AAEnB,WAAO,MAAK;AACV,mBAAa,OAAO;IACtB;EACF,GAAG,CAAC,kBAAkB,WAAW,CAAC;AAElC,SAAO;IACL;IACA;;AAEJ;ACbA,IAAM,gBAAgB;EACpB,QAAQ;EACR,SAAS;;AAGJ,IAAM,uBAAuB,CAAC,EACnC,SACA,qBACA,sBACA,uBAAsB,MACO;AAC7B,QAAM,CAAC,aAAa,cAAc,QAAI,uBAAS,EAAE;AACjD,QAAM,CAAC,cAAc,eAAe,QAClC,uBAAqC,QAAQ;AAE/C,QAAM,iBAAa,0BAAY,MAAM,eAAe,EAAE,GAAG,CAAA,CAAE;AAE3D,aACEC,yBAAA,OAAA,EAAK,WAAU,+BAA6B,UAAA,KAC1CD,wBAAC,2BAAyB,EAAC,QAAgB,CAAA,OAC3CA,wBAAC,aAAW,EACV,OAAO,aACP,UAAU,CAAC,EAAE,cAAa,MAAO,eAAe,cAAc,KAAK,GACnE,YACA,UAAU,CAAC,CAAC,YAAW,CAAA,OAEzBA,wBAAC,kCAAgC,EAC/B,cACA,gBAAgC,CAAA,OAElCC,yBAAA,OAAA,EAAK,WAAU,wCAAsC,UAAA,CAClD,iBAAiB,gBAChBD,wBAAC,0BAAwB,EACvB,aACA,qBACA,uBAA8C,CAAA,GAGjD,iBAAiB,iBAChBA,wBAAC,2BAAyB,EACxB,aACA,sBACA,uBAA8C,CAAA,CAEjD,EAAA,CAAA,CACG,EAAA,CAAA;AAGZ;AAEA,IAAM,mCAAmC,CAAC,EACxC,cACA,gBAAe,MAIZ;AACH,QAAM,OAAO,QAAO;AACpB,QAAM,EAAE,EAAC,IAAK,QAAO;AAErB,QAAM,cAAU,0BAAY,MAAK;AAC/B,UAAM,aAAa,OAAO;EAC5B,GAAG,CAAC,IAAI,CAAC;AAET,aACEC,yBAAAA,OAAAA,EAAK,WAAU,+CAA6C,UAAA,KAC1DD,wBAAA,OAAA,EAAK,WAAU,qDAAmD,UAC/D,iBAAiB,gBAChBA,wBAAC,YAAU,EACT,gBAAgB,CAAC,cAAc,UAAU,GACzC,oBAAkB,MAAA,cAElBA,wBAAC,YAAU,EAAC,SAAS,SAAO,UAAG,EAAE,UAAU,EAAC,CAAA,EAAc,CAAA,EAE7D,CAAA,OAEHA,wBAAC,YAAU,EAAC,WAAU,cAAa,cAAcM,gBAAY,cAC3DN,wBAAC,aAAW,EAAA,UAER,OAAO,KAAK,aAAa,EACzB,IAAI,CAAC,WACLA,wBAAC,uBAAqB,EAAA,iBAEL,OAAO,cACtB,SAAS,MAAM,gBAAgB,EAAE,GAAC,UAEjC,cAAc,EAAE,EAAC,GAJb,EAAE,CAMV,EAAC,CAAA,EACU,CAAA,CACH,EAAA,CAAA;AAGnB;AAEA,IAAM,2BAA2B,CAAC,EAChC,aACA,qBAAqB,8BACrB,uBAAsB,MAIO;AAC7B,QAAM,EAAE,gBAAe,IAAK,kBAAiB;AAC7C,QAAM,eAAe,gBAAgB,EAAE,QAAQ,KAAI,CAAE;AAErD,QAAM,0BAAsB,0BAC1B,OAAO,gBAAuB;AAC5B,UAAM,cAAc,IAAI,OAAO,aAAa,GAAG;AAC/C,WAAO,aAAa,OAAO,CAAC,MAAM,EAAE,KAAK,MAAM,WAAW,CAAC;EAC7D,GACA,CAAC,YAAY,CAAC;AAGhB,QAAM,EAAE,uBAAuB,cAAa,IAAK,UAAU;IACzD,UAAU,gCAAgC;IAC1C,kBAAkB;IAClB;EACD,CAAA;AAED,aACEA,wBAAC,eAAa,EACZ,4BAA4B,4BAC5B,kBACA,uBACA,eAAe,cAAc,gBAAgB,cAC7C,kBAAkB,uBAAsB,CAAA;AAG9C;AAEA,IAAM,4BAA4B,CAAC,EACjC,sBAAsB,+BACtB,wBACA,YAAW,MAIkB;AAC7B,QAAM,EAAE,sBAAqB,IAAK,kBAAiB;AACnD,QAAM,eAAe,sBAAqB;AAE1C,QAAM,2BAAuB,0BAC3B,OAAO,gBAAuB;AAC5B,UAAM,cAAc,IAAI,OAAO,aAAa,GAAG;AAC/C,WAAO,aAAa,OAAO,CAAC,WAAW,OAAO,MAAM,WAAW,CAAC;EAClE,GACA,CAAC,YAAY,CAAC;AAGhB,QAAM,EAAE,uBAAuB,cAAa,IAAK,UAAU;IACzD,UAAU,iCAAiC;IAC3C,kBAAkB;IAClB;EACD,CAAA;AAED,aACEA,wBAAC,eAAa,EACZ,4BAA4B,4BAC5B,kBACA,uBACA,eAAe,cAAc,gBAAgB,cAC7C,kBAAkB,mBAAkB,CAAA;AAG1C;AAEA,IAAMM,qBAAe,yBACnB,SAASA,cAAa,OAAO,KAAG;AAC9B,aAAON,wBAAC,YAAU,EAAC,SAAS,MAAM,WAAW,MAAK,UAAS,IAAQ,CAAA;AACrE,CAAC;ACvMI,IAAM,cAAc,CAAC,UAA2B;AACrD,QAAM,EAAE,WAAW,MAAK,IAAK;AAC7B,QAAM,OAAO,QAAO;AACpB,QAAM,EAAE,iBAAgB,IAAK,kBAAiB;AAC9C,QAAM,YAAY,iBAAgB;AAElC,QAAM,CAAC,UAAU,WAAW,QAAI,uBAAkC,IAAI;AACtE,8BAAU,MAAK;AACb,QAAI,CAAC,YAAY,CAAC;AAAM;AACxB,UAAM,UAAU,KAAK,yBAAyB,QAAQ;AACtD,WAAO,MAAM,QAAO;EACtB,GAAG,CAAC,UAAU,IAAI,CAAC;AAEnB,MAAI,CAAC;AAAW,WAAO;AAEvB,aACEA,wBAAA,OAAA,EACE,WAAW,aAAK,2BAA2B,SAAS,GACpD,OACA,KAAI,0BACJ,KAAK,YAAW,CAAA;AAGtB;AC5BO,IAAM,0BAA0B,CAAC,EACtC,gBACA,UAAS,MACwB;AACjC,QAAM,EAAE,EAAC,IAAK,QAAO;AACrB,aACEC,yBAAA,OAAA,EAAK,WAAU,0CAAwC,UAAA,KACrDA,yBAAA,OAAA,EAAK,WAAU,yCAAuC,UAAA,KACpDD,wBAAA,QAAA,EAAA,UAAO,EAAE,iBAAiB,EAAC,CAAA,GAC1B,eAAe,aAASC,yBAAA,QAAA,EAAA,UAAA,CAAA,KAAQ,eAAe,QAAM,GAAA,EAAA,CAAA,IAAY,IAAI,EAAA,CAAA,GAEvE,iBACCD,wBAAC,YAAU,EAAC,MAAK,WAAU,OAAO,EAAE,SAAS,GAAG,SAAS,UAAS,CAAA,CACnE,EAAA,CAAA;AAGP;AClBA,IAAM,aAAa,CAAC,SAAgB;AAClC,QAAM,SAAS,IAAI,KAAK,IAAI;AAC5B,SAAO,OAAO,aAAY,EAAG,MAAM,GAAG,EAAE,CAAC;AAC3C;IACa,wBAAwB,CAAC,EACpC,UAAS,MACsB;AAC/B,aACEC,yBAAA,MAAA,EAAI,WAAU,wCAAsC,UAAA,KAClDD,wBAAAA,OAAAA,EAAK,WAAU,uFAAqF,UACjG,UAAU,SAAQ,CAAA,OAErBA,wBAAA,OAAA,EAAK,WAAU,mFAAiF,UAC7F,WAAW,UAAU,UAAU,EAAC,CAAA,OAEnCA,wBAAAA,OAAAA,EAAK,WAAU,mFAAiF,UAC7F,WAAW,UAAU,QAAQ,EAAC,CAAA,OAEjCA,wBAAA,OAAA,EAAK,WAAU,uFAAqF,cAClGA,wBAAA,KAAA,EACE,WAAW,aACT,sDACA,8DAA8D,GAEhE,MAAK,UACL,MAAM,UAAU,KAChB,UAAU,UAAU,UACpB,OAAM,0BAAwB,cAE9BA,wBAAC,MAAI,EAAC,MAAK,WAAU,CAAA,EAAG,CAAA,EACtB,CAAA,CACA,EAAA,CAAA;AAGZ;AC3CO,IAAM,4BAA4B,MAAK;AAC5C,aACEC,yBAAA,OAAA,EAAK,WAAU,0FAAwF,UAAA,KACrGD,wBAAAA,OAAAA,EAAK,WAAU,sDAAqD,CAAA,OACpEA,wBAAAA,KAAAA,EAAG,WAAU,uDAAqD,UAAA,0BAAA,CAAA,CAG9D,EAAA,CAAA;AAGV;ICDa,8BAA8B,CAAC,EAC1C,eAAc,MACoB;AAClC,aACEC,yBAAAI,6BAAA,EAAA,UAAA,CACG,eAAe,IAAI,CAAC,kBACnBL,wBAAC,uBAAqB,EAAC,UAAoB,GAAO,UAAU,QAAQ,CACrE,OACDA,wBAAC,kBAAgB,EAAC,MAAK,0BAAyB,CAAA,CAAG,EAAA,CAAA;AAGzD;ACcO,IAAM,oBAAoB,CAAC,EAChC,gBAAc,yBACd2B,4BAA0BC,yBAA8B,uBACxDC,0BAAwBC,uBACxB,yBAAyBC,2BACzB,SACA,2BAA2BC,6BAC3B,UAAS,MACkB;AAC3B,aACE/B,yBAAA,OAAA,EAAK,WAAU,kCAAgC,UAAA,KAC7CD,wBAAC2B,2BAAuB,EACtB,gBACA,UAAoB,CAAA,OAEtB3B,wBAAA,OAAA,EAAK,WAAU,2CAAyC,UACrD,cACCA,wBAAC,0BAAwB,EAAC,eAA8B,CAAA,IACtD,eAAe,aACjBC,yBAAAI,6BAAA,EAAA,UAAA,KACEL,wBAAA,MAAA,EAAI,WAAU,wCAAsC,cAClDC,yBAAA,MAAA,EAAI,WAAU,wCAAsC,UAAA,KAClDD,wBAAA,OAAA,EAAK,WAAU,4CAA0C,UAAA,OAAA,CAAA,OAGzDA,wBAAA,OAAA,EAAK,WAAU,wCAAsC,UAAA,aAAA,CAAA,OAGrDA,wBAAA,OAAA,EAAK,WAAU,wCAAsC,UAAA,WAAA,CAAA,OAGrDA,wBAAA,OAAA,EAAK,WAAU,2CAA0C,CAAA,CAAO,EAAA,CAAA,EAC7D,CAAA,OAEPA,wBAAA,MAAA,EAAI,WAAU,wCAAsC,UACjD,eAAe,IAAI,CAAC,kBACnBA,wBAAC6B,yBAAqB,EACpB,UAAoB,GACf,UAAU,QAAQ,CAE1B,EAAC,CAAA,CACC,EAAA,CAAA,QAGP7B,wBAAC,wBAAsB,CAAA,CAAA,EACxB,CAAA,CACG,EAAA,CAAA;AAGZ;AChCA,IAAM,+BAA2B,4BAC/B,IAAI;AAOC,IAAM,uBAAuB,MAA2B;AAC7D,QAAM,cAAU,yBAAW,wBAAwB;AACnD,MAAI,CAAC,SAAS;AACZ,UAAM,IAAI,MACR,sEAAsE;EAE1E;AACA,SAAO;AACT;AAEO,IAAM,4BAA4B,CACvC,UACE;AACF,QAAM,EAAE,UAAU,kBAAiB,IAAK;AACxC,QAAM,OAAO,QAAO;AACpB,QAAM,EAAE,iBAAiB,kBAAiB,IAAK,kBAAiB;AAChE,QAAM,WAAW,gBAAe;AAChC,QAAM,2BAA2B,CAAC,EAChC,YACA,SAAS,MAAM,sBACf,SAAS,MAAM,mBAAmB,SAChC,kCAAkC;AAGtC,QAAM,gBAAgB,kBACpB,cAAc,yBAAyB;AAEzC,QAAM,CAAC,sBAAsB,uBAAuB,QAAI,uBAAQ;AAChE,8BAAU,MAAK;AACb,UAAM,SAAS,kBAAkB,YAAW;AAC5C,QAAI,OAAO,WAAW,WAAW;AAC/B,8BAAwB,MAAM;IAChC,OAAO;AACL,aACG,KAAK,CAAC,MAAM,wBAAwB,CAAC,CAAC,EACtC,MAAM,CAAC,QACN,QAAQ,MACN,sDACA,GAAG,CACJ;IAEP;EACF,GAAG,CAAC,iBAAiB,CAAC;AAEtB,QAAM,cACJ,wBAAwB,iBAAiB;AAE3C,QAAM,CAAC,WAAW,YAAY,QAAI,uBAAS,KAAK;AAChD,QAAM,aAAS,qBAAsB,MAAS;AAC9C,8BAAU,MAAK;AACb,QAAI,CAAC,QAAQ,CAAC;AAAa;AAC3B,sBAAkB,UAAS,EAAG,KAAK,CAAC,MAAM,aAAa,CAAC,CAAC;AACzD,UAAM,cAAc,kBAAkB,GAAG,UAAU,CAAC,MAAM,aAAa,CAAC,CAAC;AACzE,UAAM,QAAQ,OAAO,WAAW,QAAQ,QAAO,GAC5C,KAAK,MAAM,kBAAkB,KAAK,EAAE,QAAQ,KAAK,OAAM,CAAE,CAAC,EAC1D,KAAK,MAAM,KAAK,WAAW,wBAAwB,iBAAiB,CAAC,EACrE,MAAM,CAAC,MAAM,QAAQ,MAAM,uCAAuC,CAAC,CAAC;AAEvE,WAAO,MAAK;AACV,aAAO,UAAU,KACd,KAAK,MAAM,KAAK,WAAW,yBAAwB,CAAE,EACrD,KAAK,MAAM,kBAAkB,QAAO,CAAE,EACtC,KAAK,MAAM,YAAW,CAAE;IAC7B;EACF,GAAG,CAAC,MAAM,aAAa,iBAAiB,CAAC;AAEzC,QAAM,mBAAe,sBACnB,OAAO;IACL;IACA;IACA,qBAAqB,CAAC,UAAS;AAC7B,UAAI,CAAC;AAAmB;AACxB,wBAAkB,oBAAoB,KAAK;IAC7C;IACA,YAAY,CAAC,oBAAmB;AAC9B,UAAI,CAAC;AAAmB;AACxB,YAAM,SACJ,OAAO,oBAAoB,aACvB,gBAAgB,SAAS,IACzB;AACN,UAAI,QAAQ;AACV,0BAAkB,OAAM,EAAG,MAAM,CAAC,QAAO;AACvC,kBAAQ,MAAM,uCAAuC,GAAG;QAC1D,CAAC;MACH,OAAO;AACL,0BAAkB,QAAO,EAAG,MAAM,CAAC,QAAO;AACxC,kBAAQ,MAAM,wCAAwC,GAAG;QAC3D,CAAC;MACH;IACF;MAEF,CAAC,WAAW,aAAa,iBAAiB,CAAC;AAE7C,aACEA,wBAAC,yBAAyB,UAAQ,EAAC,OAAO,cAAY,SAC3C,CAAA;AAGf;ACzJO,IAAM,sBAAsB,MAAK;AACtC,QAAM,OAAO,QAAO;AACpB,QAAM,EAAE,oBAAmB,IAAK,kBAAiB;AACjD,QAAM,mBAAmB,oBAAmB;AAE5C,MAAI,CAAC;AAAM,WAAO;AAElB,QAAM,kBAAkB,qBAAqB,aAAa;AAC1D,aACEA,wBAAA,OAAA,EAAK,WAAU,oCAAkC,UAC9C,KAAK,oBACJA,wBAAC,kBAAgB,EAAC,UAAU,gBAAe,CAAA,QAE3CC,yBAAAA,6BAAAA,EAAAA,UAAAA,KACED,wBAAC,kBAAgB,EAAC,UAAU,gBAAe,CAAA,OAC3CA,wBAAC,kBAAgB,EACf,SAAS,MAAK;AACZ,UAAM,SAAS,KAAK,gBAAgB,WAAW;AAC/C,SAAK,MAAM,EAAE,QAAQ,MAAM,OAAM,CAAE;EACrC,GACA,UAAU,gBAAe,CAAA,CACzB,EAAA,CAAA,EAEL,CAAA;AAGP;ACpBA,IAAM,yBAAuD;EAC3D,CAAC,aAAa,OAAO,GAAG;EACxB,CAAC,aAAa,OAAO,GAAG;EACxB,CAAC,aAAa,SAAS,GAAG;EAC1B,CAAC,aAAa,YAAY,GAAG;EAC7B,CAAC,aAAa,mBAAmB,GAAG;EACpC,CAAC,aAAa,OAAO,GAAG;EACxB,CAAC,aAAa,IAAI,GAAG;EACrB,CAAC,aAAa,OAAO,GAAG;EACxB,CAAC,aAAa,MAAM,GAAG;EACvB,CAAC,aAAa,IAAI,GAAG;;AAiBhB,IAAM,cAAc,CAAC,UAA2B;AACrD,QAAM,EAAE,cAAc,OAAO,qBAAqB,EAAC,IAAK;AACxD,QAAM,OAAO,QAAO;AACpB,QAAM,EAAE,EAAC,IAAK,QAAO;AACrB,QAAM,EAAE,qBAAqB,eAAc,IAAK,kBAAiB;AACjE,QAAM,eAAe,oBAAmB;AACxC,QAAM,UAAU,eAAc;AAC9B,QAAM,gBAAgB,iBAAgB;AAEtC,MAAI,CAAC;AAAM,WAAO;AAGlB,QAAM,iBAAiC,WAAW,CAAA,GAC/C,MAAM,GAAG,kBAAkB,EAC3B,IAAI,CAAC,EAAE,KAAI,MAAO,IAAI,EACtB,OAAO,CAAC,SAAS,KAAK,OAAO,eAAe,MAAM,WAAW;AAChE,MACE,eACA,CAAC,cAAc,KAAK,CAAC,SAAS,KAAK,OAAO,eAAe,EAAE,GAC3D;AAGA,UAAM,OAAO,QAAQ,KAAK,CAAC,EAAE,KAAI,MAAO,KAAK,OAAO,eAAe,EAAE;AACrE,QAAI,MAAM;AACR,oBAAc,OAAO,GAAG,GAAG,KAAK,IAAI;IACtC;EACF;AAEA,QAAM,oBAAoB,uBAAuB,YAAY;AAE7D,aACEC,yBAAA,OAAA,EAAK,WAAU,wDAAsD,UAAA,KACnED,wBAAA,OAAA,EAAK,WAAU,uCAAqC,UACjD,cAAc,IAAI,CAAC,aAClBC,yBAAA,OAAA,EAAmB,WAAU,qCAAmC,UAAA,KAC9DD,wBAAC,QAAM,EAAC,MAAM,KAAK,MAAM,UAAU,KAAK,MAAK,CAAA,GAC5C,KAAK,YACJA,wBAAAA,OAAAA,EAAK,WAAU,6BAA2B,cACxCA,wBAAA,QAAA,EAAM,WAAU,0BAAwB,UAAE,KAAK,KAAI,CAAA,EAAQ,CAAA,CAE9D,EAAA,GANO,KAAK,EAAE,CAQlB,EAAC,CAAA,GAGH,yBACCA,wBAAAA,OAAAA,EAAK,WAAU,8CAA4C,UACxD,EAAE,iBAAiB,EAAC,CAAA,GAIxB,CAAC,aAAa,SAAS,aAAa,OAAO,EAAE,SAAS,YAAY,SACjEA,wBAAC,qBAAmB,CAAA,CAAA,CACrB,EAAA,CAAA;AAGP;ACrEA,IAAM,aAAa,CAAC,GAAiB,MAAmB;AACtD,MAAI,EAAE,QAAQ,EAAE,QAAQ,EAAE,OAAO,EAAE;AAAM,WAAO;AAChD,MAAI,EAAE,QAAQ,EAAE,QAAQ,EAAE,OAAO,EAAE;AAAM,WAAO;AAChD,MAAI,EAAE,KAAK,EAAE;AAAI,WAAO;AACxB,MAAI,EAAE,KAAK,EAAE;AAAI,WAAO;AACxB,SAAO;AACT;AAOO,IAAM,qBAAqB,MAAK;AACrC,QAAM,OAAO,QAAO;AACpB,QAAM,EAAE,qBAAqB,kBAAiB,IAAK,kBAAiB;AACpE,QAAM,mBAAmB,oBAAmB;AAC5C,QAAM,CAAC,UAAU,WAAW,QAAI,uBAAS,KAAK;AAC9C,QAAM,CAAC,oBAAoB,qBAAqB,QAAI,uBAElD,CAAA,CAAE;AACJ,QAAM,2BAA2B,kBAC/B,cAAc,uBAAuB;AAGvC,QAAM,cAAc,kBAAkB;AACtC,8BAAU,MAAK;AACb,QAAI,CAAC,QAAQ,CAAC;AAA0B;AACxC,WAAO,KAAK,GAAG,2BAA2B,CAAC,UAAS;AAClD,UAAI,MAAM,KAAK,OAAO,aAAa;AACjC,8BAAsB,CAAC,aACrB,CAAC,GAAG,UAAU,KAAK,EAAE,KAAK,CAAC,GAAG,MAAM,WAAW,EAAE,MAAM,EAAE,IAAI,CAAC,CAAC;MAEnE;IACF,CAAC;EACH,GAAG,CAAC,MAAM,0BAA0B,WAAW,CAAC;AAEhD,QAAM,yBAAiD,CAAC,SAAS,SAAQ;AACvE,WAAO,YAAW;AAChB,YAAM,EAAE,MAAM,YAAW,IAAK;AAC9B,cAAQ,MAAI;QACV,KAAK;AACH,gBAAM,MAAM,iBAAiB,KAAK,IAAI,WAAW;AACjD;QACF,KAAK;AACH,gBAAM,MAAM,kBAAkB,KAAK,IAAI,WAAW;AAClD;;AAIJ,4BAAsB,CAAC,aACrB,SAAS,OAAO,CAAC,MAAM,MAAM,OAAO,CAAC;IAEzC;EACF;AAEA,QAAM,EAAE,MAAM,GAAG,GAAG,SAAQ,IAAK,oBAAoB;IACnD,WAAW;IACX,UAAU;EACX,CAAA;AAGD,MAAI,mBAAmB,WAAW;AAAG,WAAO;AAE5C,aACEC,yBAAA,OAAA,EAAK,WAAU,kCAAiC,KAAK,KAAK,cAAY,UAAA,KACpEA,yBAAA,OAAA,EAAK,WAAU,gDAA8C,UAAA,KAC3DA,yBAAA,QAAA,EAAM,WAAU,yDAAuD,UAAA,CACpE,mBAAmB,QAAM,8BAAA,EAAA,CAAA,OAE5BD,wBAAC,QAAM,EACL,MAAK,UACL,SAAS,MAAK;AACZ,gBAAY,CAAC,MAAM,CAAC,CAAC;EACvB,GAAC,UAEA,WAAW,kBAAkB,gBAAe,CAAA,CACtC,EAAA,CAAA,GAEV,gBACCA,wBAAC,uBAAqB,EACpB,KAAK,KAAK,aACV,OAAO;IACL,UAAU;IACV,KAAK,KAAK;IACV,MAAM,KAAK;IACX,WAAW;KAEb,oBACA,uBAA8C,CAAA,CAEjD,EAAA,CAAA;AAGP;AAOO,IAAM,4BAAwB,yBAGnC,SAASiC,uBAAsB,OAAO,KAAG;AACzC,QAAM,EAAE,oBAAoB,wBAAwB,GAAG,KAAI,IAAK;AAEhE,QAAM,EAAE,EAAC,IAAK,QAAO;AAErB,aACEjC,wBAAAA,OAAAA,EAAK,WAAU,uCAAsC,KAAQ,GAAM,MAAI,UACpE,mBAAmB,IAAI,CAAC,SAAS,aAAY;AAC5C,UAAM,EAAE,MAAM,YAAW,IAAK;AAC9B,eACEA,wBAACE,aAAAA,UAAQ,EAAA,UACN,YAAY,IAAI,CAAC,mBAChBD,yBAAA,OAAA,EAAK,WAAU,iCAA+B,UAAA,KAC5CD,wBAAA,OAAA,EAAK,WAAU,0CAAwC,UACpD,qBAAqB,KAAK,QAAQ,KAAK,IAAI,YAAY,CAAC,EAAC,CAAA,OAE5DA,wBAAC,QAAM,EACL,WAAU,gDACV,MAAK,UACL,SAAS,uBAAuB,SAAS,OAAO,GAAC,UAEhD,EAAE,OAAO,EAAC,CAAA,OAEbA,wBAAC,QAAM,EACL,WAAU,iDACV,MAAK,UACL,SAAS,uBAAuB,SAAS,QAAQ,GAAC,UAEjD,EAAE,QAAQ,EAAC,CAAA,OAEdA,wBAAC,QAAM,EACL,WAAU,iDACV,MAAK,UACL,SAAS,uBAAuB,SAAS,SAAS,GAAC,UAElD,EAAE,SAAS,EAAC,CAAA,CACN,EAAA,GAxByC,UAAU,CA0B/D,EAAC,GA5BW,GAAG,KAAK,EAAE,IAAI,QAAQ,EAAE;EA+B3C,CAAC,EAAC,CAAA;AAGR,CAAC;AAED,IAAM,SAAS,CACb,UACE;AACF,QAAM,EAAE,WAAW,GAAG,KAAI,IAAK;AAC/B,aACEA,wBAAA,UAAA,EACE,WAAW,aAAK,yCAAyC,SAAS,GAAC,GAC/D,KAAI,CAAA;AAGd;AAEA,IAAM,uBAAuB,CAC3B,UACA,YACA,MACE;AACF,UAAQ,YAAU;IAChB,KAAK,cAAc;AACjB,aAAO,EAAE,yCAAyC,EAAE,SAAQ,CAAE;IAChE,KAAK,cAAc;AACjB,aAAO,EAAE,sDAAsD;QAC7D;MACD,CAAA;IACH,KAAK,cAAc;AACjB,aAAO,EAAE,wDAAwD;QAC/D;MACD,CAAA;IACH;AACE,aAAO,EAAE,6DAA6D;QACpE;QACA;MACD,CAAA;;AAEP;ICzMa,cAAc,CAAC,EAC1B,IAAI,YAAY,OAChB,WACA,UACA,GAAG,MAAK,MACgC;AACxC,aACEA,wBAAC,WAAS,EAAA,GAAK,OAAO,WAAW,aAAK,aAAa,SAAS,GAAC,SAClD,CAAA;AAGf;ACZA,IAAM,8BAA8B,MAAK;AACvC,QAAM,EAAE,EAAC,IAAK,QAAO;AACrB,aACEA,wBAAA,OAAA,EAAK,WAAU,oDAAkD,UAC9D,EAAE,mBAAmB,EAAC,CAAA;AAG7B;AAEA,IAAM,yBAAyB,MAAK;AAClC,QAAM,EAAE,EAAC,IAAK,QAAO;AACrB,aACEA,wBAAA,OAAA,EAAK,WAAU,+CAA6C,UACzD,EAAE,iBAAiB,EAAC,CAAA;AAG3B;AAyBO,IAAM,eAAe,CAAC,EAC3B,WACA,SAAS,MACT,uBAAuB,6BACvB,kBAAkB,wBAClB,wBAAwB,iBAAgB,MAClB;AACtB,QAAM,EAAE,eAAc,IAAK,kBAAiB;AAC5C,QAAM,EAAE,SAAS,QAAQ,QAAQ,YAAW,IAAK,eAAc;AAE/D,MAAI;AACJ,MAAI,UAAU,SAAS,WAAW,GAAG;AACnC,mBAAWA,wBAAC,iBAAe,CAAA,CAAA;EAC7B,WAAW,WAAW,WAAW;AAC/B,UAAM,UAAU,CAAC;AACjB,mBACEC,yBAAAI,6BAAA,EAAA,UAAA,CACG,mBACCL,wBAAC,WAAS,EACR,QAAQ,aACR,WAAW,aAAK,4BAA4B;MAC1C,oCAAoC;MACpC,qCAAqC;KACtC,EAAC,CAAA,GAGL,eAAWA,wBAAC,uBAAqB,CAAA,CAAA,CAAG,EAAA,CAAA;EAG3C,OAAO;AACL,mBAAWA,wBAAC,sBAAoB,CAAA,CAAA;EAClC;AAEA,aACEA,wBAAA,OAAA,EAAK,WAAW,aAAK,sCAAsC,SAAS,GAAC,UAClE,SAAQ,CAAA;AAGf;AC3CA,IAAMM,oBAAe,yBACnB,SAASA,cAAa,OAAO,KAAG;AAC9B,aAAON,wBAAC,YAAU,EAAC,SAAS,MAAM,WAAW,MAAK,YAAW,IAAQ,CAAA;AACvE,CAAC;AAGI,IAAM,4BAA4B,MAAK;AAC5C,QAAM,OAAO,QAAO;AACpB,QAAM,EAAE,EAAC,IAAK,QAAO;AAErB,QAAM,kBAAkB,MAAK;AAC3B,UAAM,YAAY,QAAO,EAAG,MAAM,CAAC,QAAO;AACxC,cAAQ,MAAM,kCAAkC,GAAG;IACrD,CAAC;EACH;AAEA,aACEC,yBAAA,OAAA,EAAK,WAAU,mCAAiC,UAAA,KAC9CD,wBAAC,MAAI,EAAC,MAAK,mBAAkB,CAAA,OAC7BA,wBAAA,QAAA,EAAM,WAAU,0CAAwC,UACrD,EAAE,gCAAgC,EAAC,CAAA,OAEtCC,yBAAA,UAAA,EACE,SAAS,iBACT,MAAK,UACL,WAAU,2CAAyC,UAAA,KAEnDD,wBAAC,MAAI,EAAC,MAAK,QAAO,CAAA,GAAG,KAAE,EAAE,qBAAqB,CAAC,EAAA,CAAA,CACxC,EAAA,CAAA;AAGf;IAEa,2BAA2B,CAAC,EACvC,oBAAoB,MACpB,gBAAgB,gBAChB,iBAAiB,MAAI,+BACrBkC,kCAAgCC,8BAAoC,MAClC;AAClC,QAAM,EAAE,aAAa,UAAS,IAAK,0BAAyB;AAC5D,QAAM,kBAAkB,eAAe,WAAW;AAElD,MACE,YAAY,sBACZ,mBACA,cAAc,oBACd;AACA,eACElC,yBAAAI,6BAAA,EAAA,UAAA,KACEL,wBAAC,2BAAyB,CAAA,CAAA,OAC1BA,wBAAC,oBAAkB,EAAC,kBAAoC,CAAA,CAAI,EAAA,CAAA;EAGlE;AAEA,aACEC,yBAAAI,6BAAA,EAAA,UAAA,CACG,sBACCL,wBAAC,YAAU,EACT,UAAS,SACT,WAAW,eACX,cAAcM,eAAY,cAE1BN,wBAACkC,iCAA6B,CAAA,CAAA,EAAG,CAAA,OAGrClC,wBAAC,UAAQ,EAAC,YAAwB,CAAA,OAClCA,wBAAC,oBAAkB,EAAC,kBAAoC,CAAA,CAAI,EAAA,CAAA;AAGlE;AAEO,IAAM,qBAAqB,CAAC,EACjC,oBAAoB,KAAI,MACqC;AAC7D,QAAM,EAAE,aAAa,UAAS,IAAK,0BAAyB;AAC5D,QAAM,EACJ,oBACA,mBACA,KACA,WACA,MAAAU,OACA,OAAM,IACJ;AACJ,QAAM,OAAO,QAAO;AAEpB,QAAM,EAAE,EAAC,IAAK,QAAO;AACrB,QAAM,4BACJ,CAAC,CAAC,qBACF,OAAU,kBAAkB,iBAAiB,EAAE,YAAW;AAE5D,QAAM,gBAAgB,SAAS,WAAW;AAC1C,QAAM,gBAAgB,SAAS,WAAW;AAC1C,QAAM,WAAW,CAAC,CAAC,OAAO,IAAI;AAC9B,QAAM,gBACJ,cAAc,SAAS,eAAe,aAAa,SAAS,IAAI;AAElE,aACET,yBAAAI,6BAAA,EAAA,UAAA,KACEL,wBAAA,OAAA,EAAK,WAAU,kCAAgC,cAC7CC,yBAAA,QAAA,EAAM,WAAU,wCAAsC,UAAA,CACnDS,SAAQ,QAER,qBAAqB,CAAC,qBACrBV,wBAAA,QAAA,EAAM,WAAU,oDAAmD,CAAA,GAEpE,qBAAqB,CAAC,qBACrBA,wBAAA,QAAA,EAAM,WAAU,oDAAmD,CAAA,GAEpE,qBAAqB,qBACpBA,wBAAA,QAAA,EACE,OAAO,EAAE,4CAA4C,GACrD,WAAU,qDAAoD,CAAA,GAGjE,qBAAqB;MAEpBA,wBAAA,QAAA,EACE,OAAO,EAAE,OAAO,GAChB,SAAS,MAAM,MAAM,MAAM,SAAS,GACpC,WAAU,+CAA8C,CAAA,GAG3D,yBAAqBA,wBAAC,iBAAe,CAAA,CAAA,CAAG,EAAA,CAAA,EACpC,CAAA,GAER,yBACCA,wBAAC,cAAY,EACX,WACE,sBACA,sBAAsB,OAAU,kBAAkB,MAEpD,SAAS,EAAE,yBAAyB,GAAC,UAEpC,iCACCA,wBAAA,QAAA,EACE,WAAW,aACT,sDACA,uDAAuD,yBAAyB,EAAE,GAEpF,OAAO,0BAAyB,CAAA,EAEnC,CAAA,CAEJ,EAAA,CAAA;AAGP;AAEO,IAAM,kBAAkB,MAAK;AAClC,QAAM,EAAE,YAAW,IAAK,0BAAyB;AACjD,QAAM,EAAE,YAAY,kBAAiB,IAAK;AAC1C,aACEC,yBAAA,QAAA,EACE,WAAW,aACT,+BACA,cAAc,yCACd,qBAAqB,uCAAuC,GAC7D,UAAA,KAEDD,wBAAA,QAAA,EAAM,WAAU,mCAAkC,CAAA,OAClDA,wBAAA,QAAA,EAAM,WAAU,mCAAkC,CAAA,OAClDA,wBAAA,QAAA,EAAM,WAAU,mCAAkC,CAAA,CAAG,EAAA,CAAA;AAG3D;ACvIO,IAAM,sBAAkB,yBAC7B,SAASoC,iBACP,EACE,aACA,YAAY,cACZ,QACA,WACA,MAAM,EAAE,iBAAiB,2BAA0B,IAAK,CAAA,GACxD,WACA,kBACA,6BACA,oBAAoB,yBAAyC,GAE/D,KAAG;AAEH,QAAM,EAAE,oBAAoB,YAAY,mBAAmB,UAAS,IAClE;AAEF,QAAM,gBAAgB,SAAS,WAAW;AAC1C,QAAM,gBAAgB,SAAS,WAAW;AAC1C,QAAM,2BAA2B,oBAAoB,WAAW;AAEhE,QAAM,CAAC,gBAAgB,iBAAiB,QAAI,uBAC1C,IAAI;AAGN,QAAM,CAAC,qBAAqB,sBAAsB,QAChD,uBAAkC,IAAI;AAExC,QAAM,CAAC,gCAAgC,iCAAiC,QACtE,uBAAgC,IAAI;AAGtC,4BAA0B;IACxB;IACA;IACA;EACD,CAAA;AAED,QAAM,EAAE,yBAAwB,IAAK,kBAAiB;AACtD,QAAM,EAAE,0BAAyB,IAAK,yBAAwB;AAE9D,QAAM,kCAA8B,sBAClC,OAAO;IACL;IACA,wBAAwB;IACxB,cAAc;IACd,yBAAyB;IACzB;EACD,IACD;IACE;IACA;IACA;IACA;IACA;EACD,CAAA;AAGH,QAAM,gBAAgC,sBACpC,OAAO;IACL,iBAAiB,CAAC,YAAW;AAC3B,wBAAkB,OAAO;AACzB,6BAAuB,OAAO;IAChC;IACA,4BAA4B,CAAC,YAAW;AACtC,mCAA6B,OAAO;AACpC,wCAAkC,OAAO;IAC3C;EACD,IACD,CAAC,iBAAiB,0BAA0B,CAAC;AAG/C,aACEpC,wBAAAA,OAAAA,EAAAA,eACc,oBACZ,KAAK,CAAC,YAAW;AACf,sBAAkB,KAAK,OAAO;AAC9B,sBAAkB,OAAO;EAC3B,GACA,WAAW,aACT,+BACA,qBAAqB,iDACrB,cAAc,yCACd,CAAC,iBAAiB,yCAClB,CAAC,iBAAiB,yCAClB,SAAS,GACV,cAEDC,yBAAC,uBAAuB,UAAQ,EAAC,OAAO,6BAA2B,UAAA,CAEhE,CAAC,sBAAsB,CAAC,iBACvBA,yBAAAI,6BAAA,EAAA,UAAA,CACG,qBACCL,wBAAC,OAAK,EAAC,aAA0B,WAAU,aAAY,CAAA,GAExD,gCACCA,wBAAC,OAAK,EACJ,aACA,WAAU,wBAAuB,CAAA,CAEpC,EAAA,CAAA,OAGLA,wBAACa,SAAK,EACJ,kBACA,6BACA,aACA,WACA,MAAM,WACN,SACE,sBACA,cAAc,gBACd,0BAA0B,YAAY,SAAS,GAEjD,QACA,UAAQ,KAAA,CAAA,GAET,gBAAgB,iBAAiB,QAChCb,wBAAC,mBAAiB,CAAA,CAAA,IAElB,iBACD,EAAA,CAAA,EAC+B,CAAA;AAGxC,CAAC;AAGH,gBAAgB,cAAc;AClMvB,IAAM,aAET;AAEJ,WAAW,cAAc;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACTlB,IAAM,eAAe,EAAE,GAAE;ACKzB,IAAM,cAAc,CAAC,UAA8C;AACxE,aACEA,wBAAC,qBAAmB,EAAC,uBAAuB,cAAY,GAAM,MAAK,CAAA;AAEvE;AAEA,YAAY,cAAc;ACqBpB,SAAU,YAAe,KAAQ,QAAiB;AACtD,MAAI,UAAU,QAAQ;AACpB,WAAO,OAAO,KAAK,MAAM,CAAC,MAAM,YAAY,KAAK,CAAC,CAAC;EACrD;AAEA,MAAI,SAAS,QAAQ;AACnB,WAAO,OAAO,IAAI,KAAK,CAAC,MAAM,YAAY,KAAK,CAAC,CAAC;EACnD;AAEA,MAAI,UAAU,QAAQ;AACpB,WAAO,CAAC,YAAY,KAAK,OAAO,IAAI;EACtC;AAEA,SAAO,gBAAgB,KAAK,MAAM;AACpC;AAGA,IAAM,eAAe,CAAC,UACpB,OAAO,UAAU,YACjB,gFAAgF,KAC9E,KAAK;AAGT,SAAS,gBAAmB,KAAQ,YAAyB;AAC3D,MAAI,QAAQ;AAEZ,aAAW,OAAO,OAAO,KAAK,UAAU,GAAqB;AAC3D,UAAM,WAAW,WAAW,GAAG;AAC/B,UAAM,gBAAgB,YAAY,OAAO,aAAa;AACtD,QAAI,QAA6B,IAAI,GAAG;AAExC,QAAI,iBAAiB,MAAM;AACzB,cAAQ,MAAM,QAAO;IACvB,WAAW,aAAa,KAAK,GAAG;AAC9B,cAAQ,IAAI,KAAK,KAAK,EAAE,QAAO;IACjC;AAEA,QAAI,iBAAiB,SAAS,UAAU;AACtC,YAAM,aAAa;AACnB,YAAM,kBAAkB,aAAa,WAAW,GAAG,IAC/C,IAAI,KAAK,WAAW,GAAG,EAAE,QAAO,IAChC,WAAW;AACf,gBAAA,QAAU,oBAAoB;IAChC,WAAW,iBAAiB,UAAU,UAAU;AAC9C,YAAM,cAAc;AACpB,gBAAA,QAAU,YAAY,SAAS;IACjC,WAAW,iBAAiB,SAAS,UAAU;AAC7C,YAAM,aAAa;AACnB,gBAAA,QAAU,WAAW,IAAI,SAAS,KAAK;IACzC,WAAW,iBAAiB,eAAe,UAAU;AACnD,UAAI,MAAM,QAAQ,KAAK,GAAG;AACxB,cAAM,mBAAmB;AAGzB,kBAAA,QAAU,MAAM,SAAS,iBAAiB,SAAS;MACrD,OAAO;AACL,gBAAQ;MACV;IACF,WAAW,iBAAiB,SAAS,UAAU;AAC7C,YAAM,aAAa;AACnB,YAAM,kBAAkB,aAAa,WAAW,GAAG,IAC/C,IAAI,KAAK,WAAW,GAAG,EAAE,QAAO,IAChC,WAAW;AACf,gBAAA,QAAU,QAAQ;IACpB,WAAW,iBAAiB,UAAU,UAAU;AAC9C,YAAM,cAAc;AACpB,YAAM,mBAAmB,aAAa,YAAY,IAAI,IAClD,IAAI,KAAK,YAAY,IAAI,EAAE,QAAO,IAClC,YAAY;AAChB,gBAAA,QAAU,SAAS;IACrB,WAAW,iBAAiB,SAAS,UAAU;AAC7C,YAAM,aAAa;AACnB,YAAM,kBAAkB,aAAa,WAAW,GAAG,IAC/C,IAAI,KAAK,WAAW,GAAG,EAAE,QAAO,IAChC,WAAW;AACf,gBAAA,QAAU,QAAQ;IACpB,WAAW,iBAAiB,UAAU,UAAU;AAC9C,YAAM,cAAc;AACpB,YAAM,mBAAmB,aAAa,YAAY,IAAI,IAClD,IAAI,KAAK,YAAY,IAAI,EAAE,QAAO,IAClC,YAAY;AAChB,gBAAA,QAAU,SAAS;IAIrB,OAAO;AACL,YAAM,UAAU;AAChB,gBAAA,QAAU,YAAY;IACxB;AAEA,QAAI,CAAC,OAAO;AACV,aAAO;IACT;EACF;AAEA,SAAO;AACT;AChGO,IAAM,0BAA0B,CAAC,EACtC,0BAA0B,OAC1B,mBAAkB,MAIf;AACH,QAAM,EAAE,iBAAiB,sBAAqB,IAAK,kBAAiB;AACpE,QAAM,kBAAkB,gBAAe;AACvC,QAAM,qBAAqB,sBAAqB;AAChD,aAAO,sBAAQ,MAAK;AAClB,UAAM,yBAAyB,0BAC3B,qBACA;AAEJ,WAAO,qBACH,wBAAwB,wBAAwB,kBAAkB,IAClE;EACN,GAAG;IACD;IACA;IACA;IACA;EACD,CAAA;AACH;AAEO,IAAM,0BAA0B,CACrC,cACA,WACE;AACF,QAAM,iBACJ,OAAO,WAAW,aACd,SACA,CAAC,gBACC,YACE;IACE,QAAQ,YAAY;IACpB,YAAY,YAAY;IACxB,mBAAmB,YAAY;IAC/B,MAAM,YAAY;IAClB,OAAO,YAAY;IACnB,UAAU,SAAS,WAAW;IAC9B,UAAU,SAAS,WAAW;IAC9B,UAAU,SAAS,WAAW;IAC9B,gBAAgB,eAAe,WAAW;KAE5C,MAAM;AAGhB,SAAO,aAAa,OAAO,cAAc;AAC3C;AAEO,IAAM,+BAA+B,CAAC,SAA0B;AACrE,8BAAU,MAAK;AACb,QAAI,CAAC;AAAM;AACX,SAAK,sBAAsB,yBAAyB;AACpD,WAAO,MAAK;AACV,sBAAgB,IAAI;IACtB;EACF,GAAG,CAAC,IAAI,CAAC;AACX;AAEO,IAAM,6BAA6B,CACxC,MACA,mBACE;AACF,8BAAU,MAAK;AACb,QAAI,CAAC;AAAM;AAEX,QAAI,gBAAgB;AAClB,WAAK,sBAAsB,mBAAmB,eAAe,QAAQ,CAAC;IACxE,OAAO;AACL,WAAK,sBAAsB,uBAAuB;IACpD;AACA,WAAO,MAAK;AACV,sBAAgB,IAAI;IACtB;EACF,GAAG,CAAC,MAAM,cAAc,CAAC;AAC3B;AAEO,IAAM,2BAA2B,MAAK;AAC3C,QAAM,EAAE,mBAAkB,IAAK,kBAAiB;AAChD,QAAM,kBAAkB,mBAAkB;AAC1C,aAAO,sBACL,MAAM,gBAAgB,OAAO,CAAC,MAAM,CAAC,EAAE,kBAAkB,GACzD,CAAC,eAAe,CAAC;AAErB;AAEA,IAAM,kBAAkB,CAAC,SAAc;AAErC,QAAM,aAAa,UAAU,IAAI,KAAK,IAAI;AAC1C,OAAK,sBACH,WAAW,QAAQ,sBAAsB,iBAAiB;AAE9D;AAEA,IAAM,WAA+C,CAAC,GAAG,MAAK;AAC5D,MAAI,EAAE;AAAoB,WAAO;AACjC,MAAI,EAAE;AAAoB,WAAO;AACjC,SAAO;AACT;AC3CO,IAAM,mBAAmB,CAAC,UAAgC;AAC/D,QAAM,EAAE,iBAAiB,yBAAwB,IAAK,kBAAiB;AACvE,QAAM,OAAO,QAAO;AACpB,QAAM,eAAe,gBAAe;AACpC,QAAM,CAAC,cAAc,IAAI;AACzB,QAAM,qBAAqB,yBAAwB;AACnD,QAAM,wBAAwB,yBAAwB;AACtD,QAAM,YAAY,wBACd,aAAa,KAAK,cAAc,IAChC;AAEJ,+BAA6B,IAAI;AAEjC,QAAM,EAAE,0BAA0B,OAAO,kBAAiB,IAAK;AAC/D,QAAM,UAAU,yBACdA,wBAAC,oBAAkB,EACjB,sBAAsB,MAAM,sBAC5B,cAAc,MAAM,cACpB,eAAe,MAAM,eACrB,gBAAgB,MAAM,gBACtB,iBAAiB,MAAM,iBACvB,kBAAkB,MAAM,iBAAgB,CAAA;AAI5C,QAAM,6BACJ,0BACC,yBACCA;IAAC;;;MAEC,sBACE,0BAA0B,wBAAwB;MAEpD,cAAc,0BAA0B,gBAAgB;MACxD,eAAe,0BAA0B,iBAAiB;MAC1D,iBAAiB,0BAA0B,mBAAmB;MAC9D,kBAAkB,0BAA0B,oBAAoB;IAAI;EAAA;AAI1E,aACEC,yBAAA,OAAA,EAAK,WAAU,yCAAuC,UAAA,CACnD,CAAC,aAASD,wBAAC,mBAAiB,EAAC,cAAc,mBAAkB,CAAA,GAC7D,yBAAyB,iBACxBA,wBAAC,iBAAe,EACd,WAAU,8CACV,aAAa,WACb,mBAAmB,SACnB,WAAU,oBACV,oBAGH,sBACCA,wBAAC,iBAAe,EACd,WAAW,aACT,yBACE,aACE,sDACA,uDACE,0BAA0B,YAAY,WACxC,EAAE,CACH,GAEL,aAAa,gBACb,mBAAmB,8BAA8B,SACjD,QACE,MAAM,gCAAgC,QAAQ,SAAY,OAE5D,kBAEH,EAAA,CAAA;AAGP;AAEA,iBAAiB,cAAc;AAuBxB,IAAM,kBAAkB,CAAC,UAA+B;AAC7D,QAAM,EAAE,4BAA4B,MAAM,2BAA2B,KAAI,IACvE;AACF,QAAM,EAAE,qBAAqB,gBAAe,IAAK,kBAAiB;AAClE,QAAM,mBAAmB,oBAAmB;AAC5C,QAAM,WAAW,gBAAe;AAChC,QAAM,EAAE,EAAC,IAAK,QAAO;AAErB,aACEA,wBAAA,OAAA,EAAK,WAAU,yCAAuC,cACpDC,yBAAA,OAAA,EAAK,WAAU,2CAAyC,UAAA,CACrD,gBACCD,wBAAA,QAAA,EAAM,WAAU,2CAAyC,UACtD,SAAS,QAAO,IAAK,KAAK,IAAG,IAC1B,EAAE,wBAAwB,IAC1B,EAAE,uCAAuC,EAAE,SAAQ,CAAE,EAAC,CAAA,GAG7D,iCACCA,wBAAA,QAAA,EAAM,WAAU,qDAAmD,UAChE,EAAE,yCAAyC;IAC1C,OAAO,2BACH,SAAS,gBAAgB,IACzB;EACL,CAAA,EAAC,CAAA,CAEL,EAAA,CAAA,EACG,CAAA;AAGZ;AAEA,gBAAgB,cAAc;AAE9B,IAAM,qBAAqB,CAAC,UAQvB;AACH,QAAM,EACJ,mBAAmB,MACnB,uBAAuB,MACvB,2BAA2B,MAC3B,eAAe,MACf,gBAAgB,MAChB,iBAAiB,MACjB,kBAAkB,MAAK,IACrB;AACJ,QAAM,oBACJ,oBACA,wBACA,gBACA,iBACA,kBACA;AACF,QAAM,EAAE,YAAW,IAAK,0BAAyB;AACjD,QAAM,EAAE,qBAAqB,gBAAe,IAAK,kBAAiB;AAClE,QAAM,mBAAmB,oBAAmB;AAC5C,QAAM,WAAW,sBAAqB;AACtC,QAAM,mBAAmB,oBAAmB;AAC5C,QAAM,EAAE,SAAS,OAAM,IAAK,gBAAe;AAC3C,QAAM,iBAAiB,WAAW;AAClC,QAAM,EAAE,EAAC,IAAK,QAAO;AACrB,aACEA,wBAAA,OAAA,EAAK,WAAU,yCAAuC,UACnD,yBACCC,yBAAA,OAAA,EAAK,WAAU,8CAA4C,UAAA,CACxD,qBACCD,wBAAA,QAAA,EAAM,WAAU,4CAA0C,UACvD,EAAE,MAAM,EAAC,CAAA,GAGb,4BACCA,wBAAA,QAAA,EAAM,WAAU,+CAA6C,UAC1D,2BACG,SAAS,gBAAgB,IACzB,iBAAgB,CAAA,GAGvB,uBACCA,wBAAA,QAAA,EACE,WAAU,8CACV,OAAO,YAAY,QAAQ,YAAY,UAAU,IAAE,UAElD,YAAY,QAAQ,YAAY,UAAU,GAAE,CAAA,GAGhD,oBACCA,wBAAA,QAAA,EAAM,WAAU,0CAAwC,UACrD,eAAe,QAAQ,EAAC,CAAA,GAG5B,sBACCA,wBAAA,QAAA,EACE,WAAW,aACT,6CACA,kBACE,kDAAkD,GAEtD,SAAS,MAAM,QAAQ,UAAU,iBAAiB,IAAI,CAAC,EAAC,CAAA,GAG3D,wBACCA,wBAAA,QAAA,EACE,WAAU,+CACV,SAAS,iBAAgB,CAAA,CAE5B,EAAA,CAAA,EAEJ,CAAA;AAGP;AAEA,IAAM,wBAAwB,MAAK;AACjC,QAAM,EAAE,eAAe,eAAc,IAAK,kBAAiB;AAC3D,QAAM,aAAa,cAAa;AAChC,QAAM,UAAU,eAAc;AAC9B,QAAM,CAAC,UAAU,WAAW,QAAI,uBAAS,MAAK;AAC5C,QAAI,CAAC,WAAW,CAAC,QAAQ;AAAiB,aAAO;AACjD,UAAM,gBAAgB,IAAI,KAAK,QAAQ,eAAe;AACtD,UAAM,MAAM,oBAAI,KAAI;AACpB,WAAO,KAAK,OAAO,IAAI,QAAO,IAAK,cAAc,QAAO,KAAM,GAAI;EACpE,CAAC;AAED,8BAAU,MAAK;AACb,QAAI,CAAC;AAAY;AACjB,UAAM,WAAW,YAAY,MAAK;AAChC,kBAAY,CAAC,MAAM,IAAI,CAAC;IAC1B,GAAG,GAAI;AACP,WAAO,MAAK;AACV,oBAAc,QAAQ;IACxB;EACF,GAAG,CAAC,UAAU,CAAC;AAEf,SAAO;AACT;AAEA,IAAM,sBAAsB,MAAK;AAC/B,QAAM,EAAE,uBAAsB,IAAK,0BAAyB;AAC5D,QAAM,CAAC,cAAc,eAAe,QAAI,uBACtC,CAAC,CAAC,SAAS,iBAAiB;AAE9B,8BAAU,MAAK;AACb,UAAM,UAAU,MAAM,gBAAgB,CAAC,CAAC,SAAS,iBAAiB;AAClE,aAAS,iBAAiB,oBAAoB,OAAO;AACrD,WAAO,MAAK;AACV,eAAS,oBAAoB,oBAAoB,OAAO;IAC1D;EACF,GAAG,CAAA,CAAE;AACL,aAAO,0BAAY,MAAK;AACtB,QAAI,cAAc;AAChB,eAAS,eAAc,EAAG,MAAM,CAAC,QAAO;AACtC,gBAAQ,MAAM,6BAA6B,GAAG;MAChD,CAAC;IACH,OAAO;AACL,8BAAwB,kBAAiB,EAAG,MAAM,CAAC,QAAO;AACxD,gBAAQ,MAAM,8BAA8B,GAAG;MACjD,CAAC;IACH;EACF,GAAG,CAAC,cAAc,sBAAsB,CAAC;AAC3C;AAEA,IAAM,iBAAiB,CAAC,iBAAwB;AAC9C,QAAM,OAAO,KAAK,MAAM,eAAe,KAAK;AAC5C,QAAM,QAAQ,KAAK,MAAM,eAAe,IAAI;AAC5C,QAAM,UAAU,KAAK,MAAO,eAAe,OAAQ,EAAE;AACrD,QAAM,UAAU,eAAe;AAE/B,SAAO,GAAG,OAAO,OAAO,MAAM,EAAE,GAAG,QAAQ,QAAQ,MAAM,EAAE,GACzD,UAAU,KAAK,MAAM,EACvB,GAAG,OAAO,IAAI,UAAU,KAAK,MAAM,EAAE,GAAG,OAAO;AACjD;ACzVA,IAAM,aAAa;AAanB,IAAM,2BAA2B,CAAC,EAChC,OACA,QACA,kBACA,6BACA,kBAAiB,MACiB;AAClC,aACEA,wBAAA,OAAA,EACE,WAAW,aAAK,2CAA2C;IACzD,yCAAyC,MAAM,WAAW;IAC1D,8CACE,MAAM,UAAU,KAAK,MAAM,UAAU;IACvC,+CACE,MAAM,UAAU,KAAK,MAAM,UAAU;GACxC,GAAC,UAED,MAAM,IAAI,CAAC,oBACVA,wBAAC,iBAAe,EAEd,aACA,WAAS,MACT,QACA,kBACA,6BACA,kBAAoC,GAN/B,YAAY,SAAS,CAQ7B,EAAC,CAAA;AAGR;AAuDO,IAAM,sBAAsB,CAAC,UAAmC;AACrE,QAAM,EACJ,aAAa,MAAM,aAAa,KAAK,IACjC,MAAM,aAAa,aACnB,YACJ,0BAA0B,OAC1B,oBACA,8BAA8B,MAC9B,oBAAoB,MACpB,kBACA,oBAAoB,0BACpB,6BACA,MAAK,IACH;AACJ,QAAM,CAAC,MAAM,OAAO,QAAI,uBAAS,CAAC;AAClC,QAAM,CACJ,mCACA,oCAAoC,QAClC,uBAAgC,IAAI;AAExC,QAAM,OAAO,QAAO;AACpB,QAAM,qBAAqB,yBAAwB;AACnD,QAAM,eAAe,wBAAwB;IAC3C;IACA;EACD,CAAA;AAED,+BAA6B,IAAI;AAEjC,8BAAU,MAAK;AACb,QAAI,CAAC,qCAAqC,CAAC;AAAM;AAEjD,UAAM,UAAU,KAAK,YAAY,iCAAiC;AAElE,WAAO,MAAM,QAAO;EACtB,GAAG,CAAC,mCAAmC,IAAI,CAAC;AAG5C,QAAM,wBAAoB,sBACxB,MAAM,MAAM,cAAc,SAAS,GACnC,CAAC,cAAc,SAAS,CAAC;AAG3B,QAAM,YAAY,kBAAkB;AAGpC,8BAAU,MAAK;AACb,QAAI,OAAO,YAAY,GAAG;AACxB,cAAQ,KAAK,IAAI,GAAG,YAAY,CAAC,CAAC;IACpC;EACF,GAAG,CAAC,MAAM,SAAS,CAAC;AAEpB,QAAM,gBAAgB,kBAAkB,IAAI;AAC5C,QAAM,SAAS,8BAA8B,SAAY;AAEzD,MAAI,CAAC;AAAM,WAAO;AAElB,aACEC,yBAAA,OAAA,EACE,WAAU,6CACV,KAAK,sCAAoC,UAAA,CAExC,CAAC,aAASD,wBAAC,mBAAiB,EAAC,cAAc,mBAAkB,CAAA,OAC9DC,yBAAA,OAAA,EAAK,WAAU,oCAAkC,UAAA,CAC9C,qBAAqB,YAAY,SAChCD,wBAAC,YAAU,EACT,MAAK,cACL,UAAU,SAAS,GACnB,SAAS,MACP,QAAQ,CAAC,gBAAgB,KAAK,IAAI,GAAG,cAAc,CAAC,CAAC,EAAC,CAAA,GAI3D,qBACCA,wBAAC,0BAAwB,EACvB,OAAO,eACP,QACA,kBACA,mBACA,4BAAwD,CAAA,GAG3D,qBAAqB,YAAY,SAChCA,wBAAC,YAAU,EACT,UAAU,SAAS,YAAY,GAC/B,MAAK,eACL,SAAS,MACP,QAAQ,CAAC,gBAAgB,KAAK,IAAI,YAAY,GAAG,cAAc,CAAC,CAAC,EAAC,CAAA,CAGvE,EAAA,CAAA,CACG,EAAA,CAAA;AAGZ;AAEA,oBAAoB,cAAc;ACrN3B,IAAM,wBAAwB,CAInC,gBAIA,aACA,UACE;AACF,QAAM,CAAC,iBAAiB,kBAAkB,QAAI,uBAG3C;IACD,UAAU,OAAO,UAAU,WAAW,QAAQ;IAC9C,YAAY,OAAO,UAAU,WAAW,QAAQ;EACjD,CAAA;AAED,8BAAU,MAAK;AACb,QACE,CAAC,eACD,CAAC,kBACD,OAAO,UAAU,YACjB,OAAO,UAAU;AAEjB;AAEF,QAAI,aAA4B;AAChC,QAAI,cAA6B;AAEjC,UAAM,iBAAiB,IAAI,eAAe,CAAC,SAAS,aAAY;AAK9D,UAAI,QAAQ,SAAS,GAAG;AACtB,cAAM,QAAQ,YAAY;AAE1B,YAAI,OAAO;AACT,wBAAc,MAAM;AACpB,uBAAa,MAAM;AACnB,mBAAS,UAAU,WAAW;QAChC;MACF;AAIA,UAAI,gBAAgB,QAAQ,eAAe;AAAM;AAEjD,YAAM,WAAW,KAAK,MAAM,eAAe,eAAe,WAAW;AACrE,YAAM,aAAa,KAAK,MAAM,eAAe,cAAc,UAAU;AAErE,yBAAmB,CAAC,OAAM;AACxB,YAAI,GAAG,aAAa,YAAY,GAAG,eAAe;AAChD,iBAAO,EAAE,UAAU,WAAU;AAC/B,eAAO;MACT,CAAC;IACH,CAAC;AAED,mBAAe,QAAQ,cAAc;AACrC,mBAAe,QAAQ,WAAW;AAElC,WAAO,MAAK;AACV,qBAAe,WAAU;IAC3B;EACF,GAAG,CAAC,aAAa,OAAO,cAAc,CAAC;AAEvC,SAAO;AACT;AC+BA,IAAM,8BAA8B,UAClCA,wBAAC,0BAAwB,EAAC,eAAc,UAAS,CAAA;IAGtC,gBAAgB,CAAC,EAC5B,uBAAuB,6BACvB,6BAA6B,0BAC7B,kBACA,6BACA,0BAA0B,UAC1B,sBACA,8BAA8B,MAC9B,0BAA0B,OAC1B,oBACA,oBAAoB,MACpB,OACA,qBAAqB,MAAK,MACH;AACvB,QAAM,OAAO,QAAO;AACpB,QAAM,EAAE,gBAAe,IAAK,kBAAiB;AAC7C,QAAM,kBAAkB,gBAAe;AACvC,QAAM,qBAAqB,yBAAwB;AACnD,QAAM,CAAC,wBAAwB,GAAG,iBAAiB,IACjD,wBAAwB,EAAE,yBAAyB,mBAAkB,CAAE;AACzE,QAAM,CAAC,+BAA+B,gCAAgC,QACpE,uBAAgC,IAAI;AACtC,QAAM,CAAC,wBAAwB,yBAAyB,QACtD,uBAAgC,IAAI;AACtC,QAAM,CAAC,uBAAuB,wBAAwB,QACpD,uBAAgC,IAAI;AAEtC,QAAM,yBACJ,0BAA0B,eAAe,sBAAsB;AACjE,QAAM,YAAY,sBAChB,uBACA,wBACA,oBAAoB;AAGtB,QAAM,aACJ,4BAA4B,UAAU,4BAA4B;AACpE,QAAM,eACJ,4BAA4B,SAAS,4BAA4B;AAEnE,8BAAU,MAAK;AACb,QAAI,CAAC,iCAAiC,CAAC;AAAM;AAE7C,UAAM,UAAU,KAAK,YAAY,6BAA6B;AAE9D,WAAO,MAAM,QAAO;EACtB,GAAG,CAAC,+BAA+B,IAAI,CAAC;AAExC,QAAM,iBAAiB,gBAAgB,WAAW;AAClD,6BAA2B,MAAM,cAAc;AAC/C,kBAAgB,+BAA+B;IAC7C,SAAS;EACV,CAAA;AAED,MAAI,+BAA+B;AAEnC,QAAM,mBAAmB,aACrB,UAAU,WACV,UAAU;AAEd,MACE,OAAO,yBAAyB,eAChC,qBAAqB,MACrB;AACA,mCAA+B,kBAAkB;MAC/C;;;MAGA,oBAAoB,yBAAyB,IAAI;IAAE;EAEvD;AAEA,QAAM,SAAS,8BAA8B,SAAY;AAEzD,MAAI,CAAC;AAAM,WAAO;AAElB,QAAM,wBACJ,4BACC,6BAA6B,SAAS,KAAK;AAC9C,aACEC,yBAAA,OAAA,EAAK,WAAU,sCAAoC,UAAA,CAChD,CAAC,aAASD,wBAAC,mBAAiB,EAAC,cAAc,mBAAkB,CAAA,OAC9DC,yBAAA,OAAA,EACE,WAAW,aACT,6BACA,2BACE,sCAAsC,uBAAuB,EAAE,GAClE,UAAA,KAEDD,wBAAAA,OAAAA,EAAK,WAAU,wCAAsC,UAClD,8BACCA,wBAAC,iBAAe,EACd,aAAa,wBACb,WAAW,MACX,QACA,WACE,yBAAyB,qBAAqB,cAEhD,mBAAmB,4BACnB,kBACA,4BAAwD,CAAA,EAE3D,CAAA,GAEF,6BACCC,yBAAAA,OAAAA,EACE,KAAK,0BACL,WAAU,+DAA6D,UAAA,KAEvED,wBAAA,OAAA,EACE,WAAU,uDACV,KAAK,kCAAgC,cAErCC,yBAAA,OAAA,EACE,KAAK,2BACL,WAAU,+CAA6C,UAAA,CAEtD,8BACCD,wBAAA,OAAA,EACE,WAAU,+CAA6C,cAGvDA,wBAAC,iBAAe,EACd,aAAa,wBACb,mBAAmB,sBACnB,kBACA,6BACA,QACA,WAAW,KAAI,CAAA,EACf,GATG,uBAAuB,SAAS,GAYxC,6BAA6B,IAAI,CAAC,oBACjCA,wBAAA,OAAA,EACE,WAAU,+CAA6C,cAGvDA,wBAAC,iBAAe,EACd,aACA,mBAAmB,sBACnB,kBACA,6BACA,QACA,WAAW,KAAI,CAAA,EACf,GATG,YAAY,SAAS,CAW7B,CAAC,EAAA,CAAA,EACE,CAAA,GAEP,qBAAqB,kBACpBA,wBAAC,uBAAqB,EACpB,eAAe,8BAA6B,CAAA,GAG/C,qBAAqB,oBACpBA,wBAAC,yBAAuB,EACtB,eAAe,8BAA6B,CAAA,CAE/C,EAAA,CAAA,CAEJ,EAAA,CAAA,CACG,EAAA,CAAA;AAGZ;AAEA,cAAc,cAAc;AAM5B,IAAM,0BAA0B,CAAwB,EACtD,cAAa,MACa;AAC1B,QAAM,iBAAiB,4BAA4B,aAAa;AAEhE,QAAM,0BAA0B,MAAK;AACnC,mBAAe,SAAS,EAAE,MAAM,MAAM,UAAU,SAAQ,CAAE;EAC5D;AAEA,QAAM,wBAAwB,MAAK;AACjC,mBAAe,SAAS,EAAE,MAAM,KAAK,UAAU,SAAQ,CAAE;EAC3D;AACA,aACEC,yBAAAA,6BAAAA,EAAAA,UAAAA,CACG,kBAAkB,mBAAmB,eACpCD,wBAAC,YAAU,EACT,SAAS,yBACT,MAAK,cACL,WAAU,2DAA0D,CAAA,GAGvE,kBAAkB,mBAAmB,aACpCA,wBAAC,YAAU,EACT,SAAS,uBACT,MAAK,eACL,WAAU,4DAA2D,CAAA,CAExE,EAAA,CAAA;AAGP;AAEA,IAAM,wBAAwB,CAAwB,EACpD,cAAa,MACa;AAC1B,QAAM,iBAAiB,0BAA0B,aAAa;AAE9D,QAAM,wBAAwB,MAAK;AACjC,mBAAe,SAAS,EAAE,KAAK,MAAM,UAAU,SAAQ,CAAE;EAC3D;AAEA,QAAM,2BAA2B,MAAK;AACpC,mBAAe,SAAS,EAAE,KAAK,KAAK,UAAU,SAAQ,CAAE;EAC1D;AACA,aACEC,yBAAAA,6BAAAA,EAAAA,UAAAA,CACG,kBAAkB,mBAAmB,aACpCD,wBAAC,YAAU,EACT,SAAS,uBACT,MAAK,YACL,WAAU,0DAAyD,CAAA,GAGtE,kBAAkB,mBAAmB,gBACpCA,wBAAC,YAAU,EACT,SAAS,0BACT,MAAK,cACL,WAAU,6DAA4D,CAAA,CAEzE,EAAA,CAAA;AAGP;ACjSO,IAAM,MAAM,CAAC,UAAyB;AAC3C,QAAM,EAAE,EAAC,IAAK,QAAO;AACrB,QAAM,EACJ,0BAA0B,OAC1B,oBACA,8BAA8B,MAC9B,kBACA,oBAAoB,yBAAwB,IAC1C;AACJ,QAAM,CAAC,sBAAsB,uBAAuB,QAClD,uBAAgC,IAAI;AAEtC,QAAM,OAAO,QAAO;AACpB,QAAM,eAAe,wBAAwB;IAC3C;IACA;EACD,CAAA;AACD,QAAM,2BAA2B,aAAa,KAAK,CAAC,MAAM,eAAe,CAAC,CAAC;AAE3E,+BAA6B,IAAI;AAEjC,8BAAU,MAAK;AACb,QAAI,CAAC,wBAAwB,CAAC;AAAM;AACpC,WAAO,KAAK,YAAY,oBAAoB;EAC9C,GAAG,CAAC,sBAAsB,IAAI,CAAC;AAE/B,QAAM,SAAS,8BAA8B,SAAY;AAEzD,MAAI,CAAC;AAAM,WAAO;AAElB,aACEC,yBAAA,OAAA,EAAK,WAAU,yBAAwB,KAAK,yBAAuB,UAAA,CAChE,6BACE,yBAAyB,yBACxBA,yBAAA,OAAA,EAAK,WAAU,qCAAmC,UAAA,KAChDD,wBAAC,MAAI,EAAC,MAAK,mBAAkB,CAAA,OAC7BA,wBAAA,QAAA,EAAM,WAAU,4CAA0C,UACvD,EAAE,gCAAgC,EAAC,CAAA,CAC/B,EAAA,CAAA,QAGTA,wBAAC,iBAAe,EACd,aAAa,0BACb,WAAU,oBACV,WAAS,MACT,QAAQ,OACR,kBACA,kBAAoC,CAAA,IAGzC,aAAa,IAAI,CAAC,oBACjBA,wBAAC,iBAAe,EAEd,aACA,WAAS,MACT,QACA,kBACA,kBAAoC,GAL/B,YAAY,SAAS,CAO7B,CAAC,EAAA,CAAA;AAGR;AAEA,IAAI,cAAc;AChHX,IAAM,OAAO,MAAK;AACvB,QAAM,qBAAqB,yBAAwB;AACnD,aAAOA,wBAAC,mBAAiB,EAAC,cAAc,mBAAkB,CAAA;AAC5D;AAEA,KAAK,cAAc;ACwBnB,IAAM,iBAAiB,CAAC,UAA8B;AACpD,MAAI,UAAU;AAAG,WAAO;AACxB,MAAI,SAAS;AAAG,WAAO;AACvB,MAAI,SAAS;AAAG,WAAO;AACvB,MAAI,SAAS;AAAI,WAAO;AACxB,SAAO;AACT;AAMO,IAAM,OAAO,CAAC,UAA6B;AAChD,QAAM,EAAE,EAAC,IAAK,QAAO;AACrB,QAAM,EACJ,0BAA0B,OAC1B,oBACA,8BAA8B,MAC9B,YAAY,GACZ,oBAAoB,MACpB,kBACA,oBAAoB,yBAAwB,IAC1C;AAEJ,QAAM,CAAC,MAAM,OAAO,QAAI,uBAAS,CAAC;AAClC,QAAM,CAAC,gBAAgB,iBAAiB,QAAI,uBAC1C,IAAI;AAGN,QAAM,OAAO,QAAO;AACpB,QAAM,eAAe,wBAAwB;IAC3C;IACA;EACD,CAAA;AACD,QAAM,2BAA2B,aAAa,KAAK,CAAC,MAAM,eAAe,CAAC,CAAC;AAE3E,+BAA6B,IAAI;AAEjC,8BAAU,MAAK;AACb,QAAI,CAAC,kBAAkB,CAAC;AAAM;AAC9B,WAAO,KAAK,YAAY,cAAc;EACxC,GAAG,CAAC,gBAAgB,IAAI,CAAC;AAEzB,QAAM,wBAAoB,sBACxB,MAAM,MAAM,cAAc,SAAS,GACnC,CAAC,cAAc,SAAS,CAAC;AAG3B,QAAM,YAAY,kBAAkB;AAEpC,MAAI,OAAO,YAAY,GAAG;AACxB,YAAQ,KAAK,IAAI,GAAG,YAAY,CAAC,CAAC;EACpC;AAEA,QAAM,gBAAgB,kBAAkB,IAAI;AAC5C,QAAM,SAAS,8BAA8B,SAAY;AAEzD,MAAI,CAAC;AAAM,WAAO;AAElB,aACEC,yBAAA,OAAA,EACE,WAAU,qDACV,KAAK,mBAAiB,UAAA,CAErB,6BACE,yBAAyB,yBACxBA,yBAAA,OAAA,EAAK,WAAU,qCAAmC,UAAA,KAChDD,wBAAC,MAAI,EAAC,MAAK,mBAAkB,CAAA,OAC7BA,wBAAA,QAAA,EAAM,WAAU,4CAA0C,UACvD,EAAE,gCAAgC,EAAC,CAAA,CAC/B,EAAA,CAAA,QAGTA,wBAAC,iBAAe,EACd,aAAa,0BACb,WAAU,oBACV,WAAS,MACT,QAAQ,OACR,kBACA,kBAAoC,CAAA,QAG1CC,yBAAA,OAAA,EAAK,WAAU,yCAAuC,UAAA,CACnD,qBAAqB,OAAO,SAC3BD,wBAAC,YAAU,EACT,MAAK,cACL,SAAS,MACP,QAAQ,CAAC,gBAAgB,KAAK,IAAI,GAAG,cAAc,CAAC,CAAC,GAEvD,WAAU,0FAAyF,CAAA,GAGtG,qBACCA,wBAAA,OAAA,EACE,WAAW,aACT,+BACA,gCAAgC,eAAe,cAAc,MAAM,CAAC,EAAE,GACvE,UAEA,cAAc,IAAI,CAAC,oBAClBA,wBAAC,iBAAe,EAEd,aACA,WAAS,MACT,QACA,kBACA,kBAAoC,GAL/B,YAAY,SAAS,CAO7B,EAAC,CAAA,GAGL,qBAAqB,OAAO,YAAY,SACvCA,wBAAC,YAAU,EACT,MAAK,eACL,SAAS,MACP,QAAQ,CAAC,gBAAgB,KAAK,IAAI,YAAY,GAAG,cAAc,CAAC,CAAC,GAEnE,WAAU,2FAA0F,CAAA,CAEvG,EAAA,CAAA,CACG,EAAA,CAAA;AAGZ;AAEA,KAAK,cAAc;ACzJZ,IAAM,YAAY,EAAE,KAAK,MAAM,KAAI;AC+CnC,IAAM,mBAAmB,CAC9B,UACE;AACF,QAAM,EAAE,UAAU,QAAQ,UAAU,GAAG,UAAS,IAAK;AACrD,QAAM,SAAS,qBAAoB;AACnC,QAAM,CAAC,MAAM,OAAO,QAAI,uBAAQ;AAChC,QAAM,UAAU,eAAe,MAAM,YAAY,MAAK;EAAE,EAAE;AAE1D,8BAAU,MAAK;AACb,QAAI,CAAC;AAAQ;AACb,UAAM,SAAS,OAAO,KAAK,UAAU,MAAM;AAC3C,YAAQ,MAAM;AACd,WAAO,IAAG,EAAG,MAAM,CAAC,MAAK;AACvB,cAAQ,MAAM,wBAAwB,CAAC;AACvC,cAAQ,CAAC;IACX,CAAC;AACD,WAAO,MAAK;AACV,aAAO,MAAK,EAAG,MAAM,CAAC,MAAK;AACzB,gBAAQ,MAAM,wBAAwB,CAAC;MACzC,CAAC;AACD,cAAQ,MAAS;IACnB;EACF,GAAG,CAAC,QAAQ,UAAU,MAAM,CAAC;AAE7B,MAAI,CAAC,MAAM;AACT,WAAO;EACT;AAEA,aACEC,yBAAC,YAAU,EAAC,MAAU,UAAA,KACpBD,wBAAC,gBAAc,EAAA,GAAK,UAAS,CAAA,GAC5B,QAAQ,EAAA,CAAA;AAGf;AAEA,IAAM,iBAAiB,CAAC,UAKnB;AACH,QAAM,OAAO,kBAAkB,KAAK;AACpC,QAAM,EAAE,cAAa,IAAK,kBAAiB;AAC3C,QAAM,SAAS,cAAa;AAE5B,MAAI,CAAC;AAAM,WAAO;AAElB,MAAI,QAAQ;AACV,eAAOA,wBAAC,kBAAgB,EAAA,GAAK,MAAM,YAAW,CAAA;EAChD;AAEA,aAAOA,wBAAC,iBAAe,EAAA,GAAK,MAAM,eAAc,CAAA;AAClD;AAEA,IAAM,oBAAoB,CAAC,UAGtB;AACH,QAAM,OAAO,QAAO;AACpB,QAAM,EAAE,eAAe,mBAAkB,IAAK,kBAAiB;AAC/D,QAAM,cAAc,cAAa;AACjC,QAAM,eAAe,gBAAe;AACpC,QAAM,mBACJ,mBAAkB,GAAI,SAAS,gBAAgB,KAAK;AACtD,QAAM,cAAc,eAAe,gBAAgB;AACnD,QAAM,eAAe,MAAM,gBAAgB;AAC3C,QAAM,UACH,iBAAiB,UAAU,eAC3B,iBAAiB,UAAU;AAC9B,QAAM,UAAU,eAAe,MAAM,YAAY,MAAK;EAAE,EAAE;AAE1D,8BAAU,MAAK;AACb,QAAI,QAAQ,KAAK,MAAM,iBAAiB,aAAa,QAAQ,SAAS;AACpE,WAAK,KAAI,EAAG,MAAM,CAAC,MAAK;AACtB,gBAAQ,MAAM,uBAAuB,CAAC;AACtC,gBAAQ,CAAC;MACX,CAAC;IACH;EACF,GAAG,CAAC,MAAM,OAAO,CAAC;AAElB,SAAO;AACT;AAEA,IAAM,kBAAkB,MAAK;AAC3B,QAAM,EAAE,iBAAiB,gBAAe,IAAK,kBAAiB;AAC9D,QAAM,WAAW,gBAAe;AAChC,QAAM,WAAW,gBAAe;AAChC,QAAM,uBAAuB,UAAU,UAAU;AACjD,QAAM,CAAC,cAAc,eAAe,QAAI,uBAAS,MAC/C,kBAAkB,UAAU,oBAAoB,CAAC;AAGnD,8BAAU,MAAK;AACb,QAAI,CAAC,cAAc;AACjB,YAAM,SAAS,YAAY,MAAK;AAC9B,wBAAgB,kBAAkB,UAAU,oBAAoB,CAAC;MACnE,GAAG,GAAI;AAEP,aAAO,MAAM,cAAc,MAAM;IACnC;EACF,GAAG,CAAC,cAAc,UAAU,oBAAoB,CAAC;AAEjD,SAAO;AACT;AAEA,IAAM,oBAAoB,CACxB,UACA,yBACE;AACF,MAAI,CAAC,UAAU;AACb,WAAO;EACT;AAEA,SAAO,KAAK,IAAG,KAAM,CAAC,YAAY,wBAAwB,KAAK;AACjE;AClJA,IAAM,CAAC,OAAO,OAAO,KAAK,IACxB,SACA,MAAM,GAAG;AAEX,WAAW;EACT,MAAM,OAAU,QAAQ;EACxB;EACA;EACA;AACD,CAAA;",
  "names": ["_jsx", "_jsxs", "Fragment", "defaultDevice", "MenuVisualType", "_Fragment", "ToggleButton", "offset", "size", "BaseVideo", "name", "DefaultVideoPlaceholder", "DefaultPictureInPicturePlaceholder", "Video", "IconButton", "CompositeButton", "Menu", "ToggleMenuButton", "DefaultToggleMenuButton", "ToggleEndRecordingMenuButton", "ToggleReactionsMenuButton", "role", "ToggleDeviceSettingsMenuButton", "CancelCallToggleMenuButton", "Status", "LoadingIndicator", "DefaultLoadingIndicator", "CallRecordingListHeader", "DefaultCallRecordingListHeader", "CallRecordingListItem", "DefaultCallRecordingListItem", "DefaultEmptyCallRecordingList", "DefaultLoadingCallRecordingList", "PermissionRequestList", "ParticipantActionsContextMenu", "DefaultParticipantActionsContextMenu", "ParticipantView"]
}
